const ensureSWController=()=>{const r=new Promise((o,t)=>{setTimeout(()=>t(new Error("Service Worker timed out.")),100)}),e=new Promise(o=>{if(navigator.serviceWorker.controller)return o();navigator.serviceWorker.addEventListener("controllerchange",()=>o())});return Promise.race([e,r])},startApp=async()=>{if(!("serviceWorker"in navigator))throw console.warn("Service Worker not supported."),new Error("Platform not supported");await navigator.serviceWorker.register("/sw.js",{scope:"/",type:"module"});try{console.log("Waiting for Service Worker to take control..."),await ensureSWController(),console.log("\u2705 Service Worker is in control!");const{default:r}=await import("/bootstrap.js");await r.loadApp()}catch(r){console.log({error:r}),console.warn("Service Worker did not take control in time. Reloading..."),window.location.reload()}};startApp();
