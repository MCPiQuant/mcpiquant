const FILE_BUNDLE={"/bootstrap.js":{content:'import c,{installModulePrototype as d}from"/modules/mvc/helpers/core.js";const p={async loadApp(){try{const t=await fetch("/package.json");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();await this.bootstrap(e)}catch(t){console.error("Could not load \'package.json\'. Bootstrap failed.",{error:t})}},async loadDep({key:t,path:e,name:i,tag:o},n){if(t&&this[t])return;const s=await import(e,{tag:o});let a={};s.dependencies&&await this.inject(s.dependencies),s.locals&&(a=await this.inject(s.locals,!0));let r;if(s.component?r=s.component:i&&i in s?r=s[i]:typeof s.default=="function"?r=s.default({...this,$APP:this,...a},a):r=s.default,r?.constructor===Promise&&(r=await r),s.migration&&(this.settings.dependencies||(this.settings.dependencies={}),this.settings.dependencies[t]=e.replace("index.js","models/migration.js")),t&&!n&&(this[t]=r),o)return r;if(n)return[t,r]},addDep(t,e){this[t]=e},async inject(t,e=!1){const i=[];for(const[o,n]of Object.entries(t)){const s=await this.loadDep({key:o,path:Array.isArray(n)?n[0]:n,name:Array.isArray(n)?n[1]:void 0},e);e&&s&&Array.isArray(s)&&i.push(s)}if(e)return Object.fromEntries(i.filter(o=>Array.isArray(o)))},async bootstrap({dependencies:t=[],backend:e=!1,settings:i={},theme:o},n={}){return this.settings.set({...i,...n,backend:e,frontend:!e}),await this.inject(t),!e&&o&&this.theme.set({theme:o}),this.hooks.emit("init"),this},addHooks({hooks:t,base:e}){if(!this.hooks)return e;t&&Object.entries(typeof t=="function"?t({$APP:this,context:e}):t).map(([i,o])=>this.hooks.on(i,o))},addModule(t){if(t.dev&&this.settings.dev!==!0||this?.modules?.[t.name])return;t.base||(t.base={});const{alias:e,name:i,hooks:o,beforeSave:n}=t,s=t.base??this[i];return this.modules&&!this.modules[i]&&this.modules.set(i,t),t.base&&(d(s,n),this[i]=s,e&&(this[e]=s)),o&&this.addHooks({hooks:o,name:i,base:s}),this.hooks?.get("moduleAdded").map(a=>a.bind(this[t.name])({module:t})),this.log&&this.log(`Module \'${t.name}\' added successfully`),s}},h=(t=p)=>{const e=Object.create(t);for(const i in c)e.addModule(c[i]);return e},f=h();self.$APP=f;export default f;\n',metaType:"application/javascript"},"/modules/mvc/helpers/core.js":{content:'self.sleep=(e=0)=>new Promise(t=>setTimeout(t,e));export const ArrayStorageFunctions={add:function(...e){return e.forEach(t=>!this.includes(t)&&this.push(this._beforeSave?this._beforeSave(t):t)),this},remove:function(e){const t=Number.parseInt(e,10);return!Number.isNaN(t)&&t>=0&&t<this.length&&this.splice(t,1),this},list:function(){return[...this]},get:function(e){const t=Number.parseInt(e,10);return!Number.isNaN(t)&&t>=0&&t<this.length?this[t]:void 0}},ObjectStorageFunctions={set:function(...e){return e.length===1&&typeof e[0]=="object"&&e[0]!==null?Object.entries(e[0]).forEach(([t,s])=>{this[t]=this._beforeSave?this._beforeSave(s):s}):e.length===2&&typeof e[0]=="string"&&(this[e[0]]=this._beforeSave?this._beforeSave(e[1]):e[1]),this},add:function(e,t){if(typeof t=="object")return this[e]||(this[e]={}),Object.entries(t).forEach(([s,n])=>{this[e][s]=this._beforeSave?this._beforeSave(n):n}),this},get:function(...e){const[t,s]=e;if(e.length!==0)return e.length===2?this[t]?.[s]:this[t]},remove:function(...e){return e.length===2?delete this[e[0]][e[1]]:delete this[e[0]],this},list:function(){return Object.entries(this)},keys:function(){return Object.keys(this)}},installModulePrototype=(e,t)=>{e||(e={});const s=Object.create(Object.getPrototypeOf(e)),n=Array.isArray(e)?ArrayStorageFunctions:ObjectStorageFunctions;return t&&(s._beforeSave=t),Object.assign(s,n),Object.setPrototypeOf(e,s),e},installEventsHandler=e=>{const t=new Map,s=new Set;return e.listeners=t,e.hasListeners=n=>t.has(n),e.on=(n,o)=>{if(!o)return console.error(`Error adding listener to ${n}: no callback passed`);t.has(n)||t.set(n,new Set),t.get(n).add(o)},e.off=(n,o)=>{const r=t.get(n);r&&(r.delete(o),r.size===0&&t.delete(n))},e.onAny=n=>{if(!n)return console.error("Error adding onAny listener: no callback passed");s.add(n.bind(e))},e.offAny=n=>{s.delete(n)},e.emit=(n,o)=>{const r=[];return t.get(n)?.forEach(c=>{try{r.push(c(o))}catch(i){console.error(`Error in listener for key "${n}":`,i)}}),s.forEach(c=>{try{const i=c.bind(e);r.push(i({key:n,data:o}))}catch(i){console.error(`Error in onAny listener for key "${n}":`,i)}}),r},e};const a={install:installEventsHandler};export default{modules:{name:"modules",description:"Global modules store"},storage:{name:"storage",description:"Storage Module",base:{install:installModulePrototype}},error:{name:"error",base:console.error},log:{name:"log",base:console.log},icons:{name:"Icons",base:new Map(Object.entries(self.__icons||{}))},theme:{name:"theme"},components:{name:"components"},hooks:{name:"hooks",description:"Global Hooks store",base:{get:function(e){return this[e]||[]},on:function(e,t){this[e]=Array.isArray(this[e])?[...this[e],t]:[t]},set:function(e){Object.entries(e).forEach(([t,s])=>this.on(t,s))},emit:async function(e,...t){try{if(Array.isArray(this[e]))for(const s of this[e])await s(...t)}catch(s){console.error(`Error running hook \'${e}\':`,s)}},clear:function(e){this[e]=null}}},settings:{name:"settings",description:"Global settings store",base:{dev:!0,backend:!1,frontend:!0,mv3:!1,mv3Injected:!1,basePath:"",...self.__settings||{}},hooks:({context:e})=>({moduleAdded({module:t}){t.settings&&(e[t.name]=t.settings)}})},events:{name:"events",description:"Global events Store",base:installEventsHandler(a)},data:{name:"data",description:"Data Migration store"},routes:{name:"routes",description:"Routes store"},devFiles:{name:"devFiles",base:[]},app:{name:"app"}};\n',metaType:"application/javascript"},"/package.json":{content:`{
	"name": "mcpiquant",
	"version": "1",
	"dependencies": {
		"MVC": "/modules/mvc/index.js",
		"p2p": "/modules/p2p/index.js",
		"AI": "/modules/ai/index.js",
		"admin": "/modules/apps/admin/index.js",
		"uix": "/modules/uix/index.js",
		"icon-lucide": "/modules/icon-lucide/index.js"
	},
	"settings": {
		"name": "MCPiQuant.com"
	},
	"theme": {
		"font": {
			"family": "'Manrope'"
		}
	}
}
`,metaType:"application/json"},"/modules/mvc/index.js":{content:`export const dependencies={fs:"/modules/mvc/helpers/filesystem.js",View:"/modules/mvc/view/index.js",ThemeManager:"/modules/theme/index.js",Loader:"/modules/mvc/view/loader.js",SW:"/modules/sw/index.js",Backend:"/modules/mvc/controller/backend/index.js",Model:"/modules/mvc/model/frontend.js",Controller:"/modules/mvc/controller/index.js",Router:"/modules/router/index.js","user-frontend":"/index.js"};export default({$APP:e})=>{e.addModule({name:"template",path:"views/templates",root:!0}),e.addModule({name:"view",path:"views",root:!0})};
`,metaType:"application/javascript"},"/modules/mvc/helpers/filesystem.js":{content:'export default({$APP:o})=>{o.addModule({name:"fs"});const r=o.fs,c={async import(e,{tag:t,module:s}={}){try{const n=await import(e);return r[e]={tag:t,path:e,module:s,extension:t?"component":"js"},n}catch(n){return console.error(`Failed to import ${e}:`,n),{error:!0}}},async fetchResource(e,t,s){try{const n=await fetch(e);if(r[e]={path:e,extension:s},n.ok)return await t(n)}catch(n){console.warn(`Resource not found at: ${e}`,n)}return null},list(){const e={};return Object.values(r).forEach(t=>{const{extension:s}=t;e[t.extension]||(e[s]=[]),e[s].push(t)}),e},assets(){return Object.values(r).filter(({extension:e})=>!["js","component"].includes(e))},components(){return Object.values(r).filter(({tag:e,extension:t})=>t==="js"&&!!e)},json(e){return c.fetchResource(e,t=>t.json(),"json")},css:async(e,t=!1)=>{const s=await c.fetchResource(e,async u=>await u.text(),"css");if(!t)return s;const n=document.createElement("style");return n.textContent=s,document.head.appendChild(n),s},getFilePath(e){return o.settings.mv3Injected?chrome.runtime.getURL(e):`${o.settings.basePath}${e.startsWith("/")?e:`/${e}`}`},getRequestPath(e){const t=new URL(e);return t.pathname+t.search}};return c};\n',metaType:"application/javascript"},"/modules/mvc/view/index.js":{content:'window.$=i=>document.querySelector(i),window.$$=i=>document.querySelectorAll(i);export const dependencies={html:"/modules/mvc/view/html/index.js",T:"/modules/types/index.js"};export default({T:i,html:f})=>{const b=i.object({properties:{model:i.string(),id:i.string(),method:i.string(),filter:i.object(),includes:i.string(),order:i.string(),limit:i.number(),offset:i.number(),count:i.number()}}),g=i.array({}),m=i.object({});function u(a,t){t?.constructor&&(u(a,Object.getPrototypeOf(t)),t.constructor.tag&&a.classList.add(t.constructor.tag))}class C extends HTMLElement{static get observedAttributes(){return Object.keys(this.properties).filter(t=>this.properties[t].attribute!==!1)}static properties={_data:b,_rows:g,_row:m};static _attrs={};static plugins=[];state={};_hasUpdated=!1;_ignoreAttributeChange=!1;_changedProps={};on(t,e){if(typeof e!="function"){console.error(`Error adding listener to ${t}: callback is not a function.`);return}e.bind(this);const s=({detail:r})=>e(r);return this.addEventListener(t,s),s}off(t,e){this.removeEventListener(t,e)}emit(t,e){const s=new CustomEvent(t,{detail:e});this.dispatchEvent(s)}connectedCallback(){this.constructor.properties&&this.initProps(),u(this,Object.getPrototypeOf(this));for(const t of this.constructor.plugins){const{events:e}=t;Object.entries(e).map(([s,r])=>r&&this.on(s,r.bind(this)))}this.emit("connected",{instance:this,component:this.constructor}),this.requestUpdate()}disconnectedCallback(){this.emit("disconnected",{instance:this,component:this.constructor})}defer(t){requestAnimationFrame(t.bind(this))}q(t){return this.querySelector(t)}qa(t){return this.querySelectorAll(t)}prop(t){return{value:this[t],setValue:(e=>this[t]=e).bind(this),instance:this,prop:t}}initProps(){for(const t of this.attributes){const e=this.constructor._attrs[t.name],s=this.constructor.properties[e];if(s&&s.type!=="boolean"&&t.value===""){this.removeAttribute(t.name);continue}this.state[e]=s?i.stringToType(t.value,{...s,attribute:!0}):t.value}for(const[t,e]of Object.entries(this.constructor.properties)){const{type:s,sync:r,defaultValue:n,attribute:o=!0,setter:h,getter:d}=e;if(r)continue;this.state[t]??=this[t]??n,Object.defineProperty(this,t,{get:d?d.bind(this):()=>this.state[t],set:h?h.bind(this):c=>{const l=this.state[t];l!==c&&(this.state[t]=c,o&&this.updateAttribute({key:t,value:c,skipPropUpdate:!0,type:s}),this.requestUpdate(t,l))}});const p=this.state[t];!o||this.hasAttribute(t)||p===void 0||(this.updateAttribute({key:t,value:p,skipPropUpdate:!0,type:s}),this._changedProps[t]=void 0)}}requestUpdate(t,e){return t&&(this._changedProps[t]=e),this.updateComplete&&clearTimeout(this.updateComplete),this.updateComplete=setTimeout(()=>{this.performUpdate(t===void 0)},0),this.updateComplete}performUpdate(t){const e=this._changedProps;this.updateComplete=null,!(this._hasUpdated&&!t&&!this.shouldUpdate(e))&&(this.emit("willUpdate",e),this.update(e),this._hasUpdated||(this._hasUpdated=!0,this.emit("firstUpdated",e)),this.emit("updated",e),this._changedProps={})}shouldUpdate(t){const e={...t};if(!this._hasUpdated)return!0;for(const[s,r]of Object.entries(e)){const n=this[s],o=this.constructor.properties[s];(o?.hasChanged?o.hasChanged(n,r):r!==n)?this.emit(`${s}Changed`,{oldValue:r,value:n,instance:this,component:this.constructor}):delete e[s]}return this._changedProps={},Object.keys(e).length>0}update(){f.render(this.render(),this)}render(){return null}attributeChangedCallback(t,e,s){e!==s&&(this.emit("attributeChangedCallback",{instance:this,component:this.constructor,key:t,value:s,oldValue:e}),!this._ignoreAttributeChange&&(this.state[t]=i.stringToType(s,this.constructor.properties[t]),this._hasUpdated&&this.requestUpdate(t,e)))}updateAttribute({key:t,value:e,type:s,skipPropUpdate:r=!1}){s&&(this._ignoreAttributeChange=r,s==="function"&&typeof e=="function"?this.setAttribute(t,e.toString()):s==="boolean"?e?this.setAttribute(t,""):this.removeAttribute(t):e===void 0?this.removeAttribute(t):["array","object"].includes(s)?this.setAttribute(t,JSON.stringify(e)):this.setAttribute(t,e),r?this._ignoreAttributeChange=!1:this[t]=e)}}return C};\n',metaType:"application/javascript"},"/modules/mvc/view/html/index.js":{content:'const He=!1,ze=!1,ve=!1,Be=!1,P=globalThis;let Ue;const h=void 0;let We=0,Ye;const _=s=>s,R=P.trustedTypes,Q=R?R.createPolicy("lit-html",{createHTML:s=>s}):void 0,$e=s=>s,H=(s,e,t)=>$e,Fe=s=>{},Xe=()=>{k=H},Ke=(s,e,t)=>k(s,e,t),z="$lit$",g=`lit$${Math.random().toFixed(9).slice(2)}$`,v="?"+g,Te=`<${v}>`,E=document,x=()=>E.createComment(""),S=s=>s===null||typeof s!="object"&&typeof s!="function",B=Array.isArray,G=s=>B(s)||typeof s?.[Symbol.iterator]=="function",U=`[ 	\n\\f\\r]`,ye=`[^ 	\n\\f\\r"\'\\`<>=]`,Ne=`[^\\\\s"\'>=/]`,b=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,Z=1,W=2,xe=3,q=/-->/g,J=/>/g,$=new RegExp(`>|${U}(?:(${Ne}+)(${U}*=${U}*(?:${ye}|("|\')|))|$)`,"g"),Se=0,ee=1,be=2,te=3,ne=/\'/g,ie=/"/g,se=/^(?:script|style|textarea|title)$/i,oe=1,M=2,I=3,Y=1,L=2,Ae=3,we=4,Ve=5,F=6,Oe=7,X=s=>(e,...t)=>({_$litType$:s,strings:e,values:t}),A=X(oe),ae=X(M),je=X(I),w=Symbol.for("lit-noChange"),c=Symbol.for("lit-nothing"),re=new WeakMap,T=E.createTreeWalker(E,129);let k=H;function le(s,e){if(!B(s)||!Object.hasOwn(s,"raw")){let t="invalid template strings array";throw new Error(t)}return Q!==void 0?Q.createHTML(e):e}const de=(s,e)=>{const t=s.length-1,n=[];let i=e===M?"<svg>":e===I?"<math>":"",o,a=b;for(let r=0;r<t;r++){const l=s[r];let u=-1,d,p=0,m;for(;p<l.length&&(a.lastIndex=p,m=a.exec(l),m!==null);)p=a.lastIndex,a===b?m[Z]==="!--"?a=q:m[Z]!==void 0?a=J:m[W]!==void 0?(se.test(m[W])&&(o=new RegExp(`</${m[W]}`,"g")),a=$):m[xe]!==void 0&&(a=$):a===$?m[Se]===">"?(a=o??b,u=-1):m[ee]===void 0?u=-2:(u=a.lastIndex-m[be].length,d=m[ee],a=m[te]===void 0?$:m[te]===\'"\'?ie:ne):a===ie||a===ne?a=$:a===q||a===J?a=b:(a=$,o=void 0);const D=a===$&&s[r+1].startsWith("/>")?" ":"";i+=a===b?l+Te:u>=0?(n.push(d),l.slice(0,u)+z+l.slice(u)+g+D):l+g+(u===-2?r:D)}const f=i+(s[t]||"<?>")+(e===M?"</svg>":e===I?"</math>":"");return[le(s,f),n]};class O{parts=[];constructor({strings:e,["_$litType$"]:t},n){let i,o=0,a=0;const f=e.length-1,r=this.parts,[l,u]=de(e,t);if(this.el=O.createElement(l,n),T.currentNode=this.el.content,t===M||t===I){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(i=T.nextNode())!==null&&r.length<f;){if(i.nodeType===1){if(i.hasAttributes())for(const d of i.getAttributeNames())if(d.endsWith(z)){const p=u[a++],D=i.getAttribute(d).split(g),C=/([.?@])?(.*)/.exec(p);r.push({type:Y,index:o,name:C[2],strings:D,ctor:C[1]==="."?me:C[1]==="?"?he:C[1]==="@"?pe:V}),i.removeAttribute(d)}else d.startsWith(g)&&(r.push({type:F,index:o}),i.removeAttribute(d));if(se.test(i.tagName)){const d=i.textContent.split(g),p=d.length-1;if(p>0){i.textContent=R?R.emptyScript:"";for(let m=0;m<p;m++)i.append(d[m],x()),T.nextNode(),r.push({type:L,index:++o});i.append(d[p],x())}}}else if(i.nodeType===8)if(i.data===v)r.push({type:L,index:o});else{let p=-1;for(;(p=i.data.indexOf(g,p+1))!==-1;)r.push({type:Oe,index:o}),p+=g.length-1}o++}h?.({kind:"template prep",template:this,clonableTemplate:this.el,parts:this.parts,strings:e})}static createElement(e,t){const n=E.createElement("template");return n.innerHTML=e,n}}function y(s,e,t=s,n){if(e===w||e===c)return e;let i=n!==void 0?t.__directives?.[n]:t.__directive;const o=S(e)?void 0:e._$litDirective$;return i?.constructor!==o&&(i?._$notifyDirectiveConnectionChanged?.(!1),o===void 0?i=void 0:(i=new o(s),i?._$initialize(s,t,n)),n!==void 0?(t.__directives??=[])[n]=i:t.__directive=i),i!==void 0&&(e=y(s,i._$resolve(s,e.values),i,n)),e}class ce{_$parts=[];_$disconnectableChildren=void 0;constructor(e,t){this._$template=e,this._$parent=t}get parentNode(){return this._$parent.parentNode}get _$isConnected(){return this._$parent._$isConnected}_clone(e){const{el:{content:t},parts:n}=this._$template,i=(e?.creationScope??E).importNode(t,!0);T.currentNode=i;let o=T.nextNode(),a=0,f=0,r=n[0];for(;r!==void 0;){if(a===r.index){let l;r.type===L?l=new N(o,o.nextSibling,this,e):r.type===Y?l=new r.ctor(o,r.name,r.strings,this,e):r.type===F&&(l=new ue(o,this,e)),this._$parts.push(l),r=n[++f]}a!==r?.index&&(o=T.nextNode(),a++)}return T.currentNode=E,i}_update(e){let t=0;for(const n of this._$parts)n!==void 0&&(h?.({kind:"set part",part:n,value:e[t],valueIndex:t,values:e,templateInstance:this}),n.strings!==void 0?(n._$setValue(e,n,t),t+=n.strings.length-2):n._$setValue(e[t])),t++}}class N{type=L;_$committedValue=c;get _$isConnected(){return this._$parent?._$isConnected??this.__isConnected}_$disconnectableChildren=void 0;constructor(e,t,n,i){this._$startNode=e,this._$endNode=t,this._$parent=n,this.options=i,this.__isConnected=i?.isConnected??!0}get parentNode(){let e=_(this._$startNode).parentNode;const t=this._$parent;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$startNode}get endNode(){return this._$endNode}_$setValue(e,t=this){e=y(this,e,t),S(e)?e===c||e==null||e===""?(this._$committedValue!==c&&(h?.({kind:"commit nothing to child",start:this._$startNode,end:this._$endNode,parent:this._$parent,options:this.options}),this._$clear()),this._$committedValue=c):e!==this._$committedValue&&e!==w&&this._commitText(e):e._$litType$!==void 0?this._commitTemplateResult(e):e.nodeType!==void 0?this._commitNode(e):G(e)?this._commitIterable(e):this._commitText(e)}_insert(e){return _(_(this._$startNode).parentNode).insertBefore(e,this._$endNode)}_commitNode(e){this._$committedValue!==e&&(this._$clear(),h?.({kind:"commit node",start:this._$startNode,parent:this._$parent,value:e,options:this.options}),this._$committedValue=this._insert(e))}_commitText(e){if(this._$committedValue!==c&&S(this._$committedValue)){const t=_(this._$startNode).nextSibling;h?.({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}else this._commitNode(E.createTextNode(e)),h?.({kind:"commit text",node:_(this._$startNode).nextSibling,value:e,options:this.options});this._$committedValue=e}_commitTemplateResult(e){const{values:t,["_$litType$"]:n}=e,i=typeof n=="number"?this._$getTemplate(e):(n.el===void 0&&(n.el=O.createElement(le(n.h,n.h[0]),this.options)),n);if(this._$committedValue?._$template===i)h?.({kind:"template updating",template:i,instance:this._$committedValue,parts:this._$committedValue._$parts,options:this.options,values:t}),this._$committedValue._update(t);else{const o=new ce(i,this),a=o._clone(this.options);h?.({kind:"template instantiated",template:i,instance:o,parts:o._$parts,options:this.options,fragment:a,values:t}),o._update(t),h?.({kind:"template instantiated and updated",template:i,instance:o,parts:o._$parts,options:this.options,fragment:a,values:t}),this._commitNode(a),this._$committedValue=o}}_$getTemplate(e){let t=re.get(e.strings);return t===void 0&&re.set(e.strings,t=new O(e)),t}_commitIterable(e){B(this._$committedValue)||(this._$committedValue=[],this._$clear());const t=this._$committedValue;let n=0,i;for(const o of e)n===t.length?t.push(i=new N(this._insert(x()),this._insert(x()),this,this.options)):i=t[n],i._$setValue(o),n++;n<t.length&&(this._$clear(i&&_(i._$endNode).nextSibling,n),t.length=n)}_$clear(e=_(this._$startNode).nextSibling,t){for(this._$notifyConnectionChanged?.(!1,!0,t);e&&e!==this._$endNode;){const n=_(e).nextSibling;_(e).remove(),e=n}}setConnected(e){this._$parent===void 0&&(this.__isConnected=e,this._$notifyConnectionChanged?.(e))}}class V{type=Y;_$committedValue=c;_$disconnectableChildren=void 0;get tagName(){return this.element.tagName}get _$isConnected(){return this._$parent._$isConnected}constructor(e,t,n,i,o){this.element=e,this.name=t,this._$parent=i,this.options=o,n.length>2||n[0]!==""||n[1]!==""?(this._$committedValue=new Array(n.length-1).fill(new String),this.strings=n):this._$committedValue=c}_$setValue(e,t=this,n,i){const o=this.strings;let a=!1;if(o===void 0)e=y(this,e,t,0),a=!S(e)||e!==this._$committedValue&&e!==w,a&&(this._$committedValue=e);else{const f=e;e=o[0];let r,l;for(r=0;r<o.length-1;r++)l=y(this,f[n+r],t,r),l===w&&(l=this._$committedValue[r]),a||=!S(l)||l!==this._$committedValue[r],l===c?e=c:e!==c&&(e+=(l??"")+o[r+1]),this._$committedValue[r]=l}a&&!i&&this._commitValue(e)}_commitValue(e){e===c?_(this.element).removeAttribute(this.name):(h?.({kind:"commit attribute",element:this.element,name:this.name,value:e,options:this.options}),_(this.element).setAttribute(this.name,e??""))}}class me extends V{type=Ae;_commitValue(e){h&&h({kind:"commit property",element:this.element,name:this.name,value:e,options:this.options}),this.element[this.name]=e===c?void 0:e}}class he extends V{type=we;_commitValue(e){h?.({kind:"commit boolean attribute",element:this.element,name:this.name,value:!!(e&&e!==c),options:this.options}),_(this.element).toggleAttribute(this.name,!!e&&e!==c)}}class pe extends V{type=Ve;constructor(e,t,n,i,o){super(e,t,n,i,o)}_$setValue(e,t=this){if(e=y(this,e,t,0)??c,e===w)return;const n=this._$committedValue,i=e===c&&n!==c||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,o=e!==c&&(n===c||i);h?.({kind:"commit event listener",element:this.element,name:this.name,value:e,options:this.options,removeListener:i,addListener:o,oldListener:n}),i&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,e),this._$committedValue=e}handleEvent(e){typeof this._$committedValue=="function"?this._$committedValue.call(this.options?.host??this.element,e):this._$committedValue.handleEvent(e)}}class ue{type=F;_$disconnectableChildren=void 0;constructor(e,t,n){this.element=e,this._$parent=t,this.options=n}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e){h?.({kind:"commit to element binding",element:this.element,value:e,options:this.options}),y(this,e)}}const Qe={_boundAttributeSuffix:z,_marker:g,_markerMatch:v,_HTML_RESULT:oe,_getTemplateHtml:de,_TemplateInstance:ce,_isIterable:G,_resolveDirective:y,_ChildPart:N,_AttributePart:V,_BooleanAttributePart:he,_EventPart:pe,_PropertyPart:me,_ElementPart:ue},De=P.litHtmlPolyfillSupport;De?.(O,N),(P.litHtmlVersions??=[]).push("3.2.0");const Ce=(s,e,t)=>{const n=0,i=t?.renderBefore??e;let o=i._$litPart$;if(h?.({kind:"begin render",id:n,value:s,container:e,options:t,part:o}),o===void 0){const a=t?.renderBefore??null;i._$litPart$=o=new N(e.insertBefore(x(),a),a,void 0,t??{})}return o._$setValue(s),h?.({kind:"end render",id:n,value:s,container:e,options:t,part:o}),o},K=Symbol.for(""),Re=s=>{if(s?.r===K)return s?._$litStatic$},j=s=>({_$litStatic$:s,r:K}),Me=s=>{if(s._$litStatic$!==void 0)return s._$litStatic$;throw new Error(`Value passed to \'literal\' function must be a \'literal\' result: ${s}. Use \'unsafeStatic\' to pass non-literal values, but\n            take care to ensure page security.`)},Ie=(s,...e)=>({_$litStatic$:e.reduce((t,n,i)=>t+Me(n)+s[i+1],s[0]),r:K}),_e=new Map,fe=s=>(e,...t)=>{const n=t.length;let i,o;const a=[],f=[];let r=0,l=!1,u;for(;r<n;){for(u=e[r];r<n&&(o=t[r],(i=Re(o))!==void 0);)u+=i+e[++r],l=!0;r!==n&&f.push(o),a.push(u),r++}if(r===n&&a.push(e[n]),l){const d=a.join("$$lit$$");e=_e.get(d),e===void 0&&(a.raw=a,_e.set(d,e=a)),t=f}return s(e,...t)},ge=fe(A),Le=s=>ge`${j(s)}`,Ee=fe(ae),ke=s=>Ee`${j(s)}`,Pe={unsafeHTML:Le,unsafeStatic:j,staticHTML:ge,staticSVG:Ee,unsafeSVG:ke,render:Ce,html:A,literal:Ie,svg:ae,css};export function css(s,...e){return s.reduce((t,n,i)=>t+n+(e[i]??""),"")}Object.assign(A,Pe);export const component=A;export default A;\n',metaType:"application/javascript"},"/modules/types/index.js":{content:'const b={email:/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/},x=n=>{try{return n in c?n:JSON.parse(n)}catch{return}},c={undefined:void 0,null:null,"":null,[void 0]:void 0},y={any:n=>n,function:n=>n,extension:()=>{},boolean:(n,{attribute:e=!0}={})=>e&&n===""||["true",1,"1",!0].includes(n),string:n=>n in c?c[n]:String(n),array:(n,e={})=>{if(Array.isArray(n))return n;const{itemType:t}=e;try{if(!n)throw n;const r=x(n);if(!Array.isArray(r))throw r;return t?r.map(u=>typeof u!="object"?u:Object.entries(u).reduce((i,[a,d])=>(i[a]=y[t[a]?.type]?y[t[a].type](d,e):d,i),{})):r}catch{return[]}},number:n=>n&&Number(n),date:n=>new Date(n),datetime:n=>{if(!n)return null;const e=new Date(n);return Number.isNaN(e.getTime())?null:e},object:(n,e={})=>{const t=typeof n=="string"?x(n):n;return e.properties&&Object.entries(e.properties).map(([r,u])=>{u.defaultValue!==void 0&&(t[r]=u.defaultValue)}),t}},w=(n,e={})=>{const{type:t}=e;return(y[t]||(r=>r))(n,e)},V={datetime:(n,e={})=>{if(e.min&&n<new Date(e.min))return["minimum",null];if(e.max&&n>new Date(e.max))return["maximum",null]},number:(n,e={})=>{if("min"in e&&n<e.min)return["minimum",null];if("max"in e&&n>e.max)return["maximum",null];if(Number.isNaN(Number(n)))return["NaN",null]}},N=(n,e)=>{if(e.required===!0&&(n==null||n===""))return["required",null];const t=y[e.type];if(e.relationship)return e.many?[null,Array.isArray(n)?n.map(i=>e.mixed?i:i?.id??i):[]]:[null,n?.id??n];const r=t?t(n,e):[void 0,null,""].includes(n)?e.defaultValue??null:n,u=V[e.type];if(u){const i=u(n,e);if(i)return i}if("format"in e||b[e.key]){const i="format"in e?e.format:b[e.key];if(!(typeof i=="function"?e.format:f=>i.test(f))(r))return["invalid",null]}return[null,r]};function A(n,e){return n.replace(/\\${(.*?)}/g,(t,r)=>e[r.trim()])}const _=(n,{schema:e,row:t={},undefinedProps:r=!0,validateVirtual:u=!1})=>{if(!e)return[null,n];const i={};let a=!1;const d=r?e:n;for(const s in d){const l={...e[s],key:s};if("virtual"in l||l.persist===!1)continue;const[o,g]=[void 0,null,""].includes(n[s])&&!l.required?[null,l.defaultValue]:N(n[s],l);o?(a=!0,i[s]=o):g!==void 0&&(n[s]=g)}const f=Object.fromEntries(Object.entries(e).filter(([s,l])=>"virtual"in l));for(const s in f)if(u){const[l,o]=N(A(f[s].virtual,{...t,...n}),f[s]);l?(a=!0,i[s]=l):o!==void 0&&(n[s]=o)}else n[s]=A(f[s].virtual,{...t,...n});return a?[i,null]:[null,n]},m=(n,e)=>{const t=typeof e=="object"&&!Array.isArray(e)&&e!==null?e:{defaultValue:e};return{type:n,persist:!0,attribute:!0,...t}},O=n=>(...e)=>{const t=e[0];let r,u=e[2];typeof e[1]=="string"?r=e[1]:u=e[1];const i=T.includes(n);return{type:i?n==="belongs_many"?"array":"string":n==="one"?"object":"array",many:q.includes(n),belongs:i,persist:i,relationship:n,defaultValue:n==="belongs_many"?[]:null,polymorphic:t==="*"||Array.isArray(t),targetModel:t,targetForeignKey:r,index:T.includes(n),...u}},D={createType:m,stringToType:w,validateType:_},H=["one","many","belongs","belongs_many"],q=["many","belongs_many"],T=["belongs","belongs_many"],E={get(n,e){if(n[e])return n[e];const t=e.toLowerCase();return H.includes(e)?O(e):t==="extension"?(r={})=>m("extension",{...r,persist:!1,extension:!0}):(r={})=>{if(!y[t])throw new Error(`Unknown type: ${t}`);return m(t,r)}}},F=new Proxy(D,E);export default F;\n',metaType:"application/javascript"},"/modules/theme/index.js":{content:'import b from"https://cdn.jsdelivr.net/npm/@unocss/preset-web-fonts/+esm";import S from"https://cdn.jsdelivr.net/npm/@unocss/preset-wind4@66.3.3/+esm";export default async({$APP:s})=>{const e=(t,n)=>{const r={},y=[97,92,84,75,66,55,45,35,24,15],p=[50,100,200,300,400,500,600,700,800,900];for(let a=0;a<p.length;a++)r[p[a]]=`hsl(${t}, ${n}, ${y[a]}%)`;return r.DEFAULT=r[500],r},i=e(198,"100%"),m=e(120,"100%"),d=e(175,"100%"),g=e(149,"87%"),f=e(32,"100%"),u=e(345,"100%"),o=e(0,"0%");o.DEFAULT=o[700];const l="Manrope";window.__unocss={theme:{text:{color:"var(--color-surface-100)"},font:{family:`\'${l}\', -apple-system, BlinkMacSystemFont, \'Segoe UI\', \'Helvetica Neue\', Arial, sans-serif`,icon:{family:"lucide"}},background:{color:"var(--colors-primary-100)"},colors:{primary:i,secondary:m,tertiary:d,success:g,warning:f,danger:u,default:o,surface:o},boxShadow:{md:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",lg:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)"}},extendTheme:t=>s.theme.set(t),presets:[b({provider:"google",fonts:{sans:l}}),S({preflights:{theme:!0}})]},await import("https://cdn.jsdelivr.net/npm/@unocss/runtime/core.global.js");const c=document.createElement("style");c.id="compstyles",document.head.appendChild(c);async function x(t){const n=await s.fs.css(t,!0);n&&(c.textContent+=n)}const h={loadComponentCSS:x};return s.events.on("INIT_APP",()=>{s.fs.css("theme.css",!0)}),h};\n',metaType:"application/javascript"},"/modules/mvc/view/loader.js":{content:'export default async({View:C,ThemeManager:O,$APP:o})=>{const b=(e=!1)=>`${o.settings.basePath}${e?"":"/modules"}`,m=new Map,l=new Map,u=new Map,S=e=>{if(o.components?.[e]?.path)return o.components[e].path;const n=e.split("-"),t=n[0],s=o.modules[t],r=n.slice(1).join("-");return s?[b(s.root),s.path??t,r].join("/"):[o.settings.basePath,e].join("/")};async function M(e){if(m.has(e))return m.get(e);const n=S(e),t=await o.loadDep({tag:e,path:`${n}.js`});return t?(o.components[e]||(o.components[e]={}),o.components[e].path=n,o.components[e].definition=t,m.set(e,t),t):(console.warn(`[Loader] No default export found for component ${e} at ${n}.js`),null)}async function k(e,n){const{properties:t={},icons:s,formAssociated:r=!1,css:y,style:E=!1,extends:c,types:v,connected:q,disconnected:_,willUpdate:I,firstUpdated:U,updated:z,class:N,...B}=n,L=c?await h(c):C;c&&(L.plugins=[...C.plugins,...L.plugins]);const i=class extends L{static icons=s;static css=y;static formAssociated=r;constructor(){super(),N&&this.classList.add(...N.split(" "))}static properties=(()=>{const f=super.properties||{},j=super.theme||{},d={...f};for(const p of Object.keys(t)){const a=t[p];a.type==="object"&&a.properties&&(a.properties=d[p]?.properties?{...d[p]?.properties,...a.properties}:a.properties),d[p]=d[p]?{...d[p],...a}:{...a},a.theme&&(j[p]=d[p].theme)}return v&&(j.types=v),super.theme=j,d})()};return Object.assign(i.prototype,B),i.tag=e,i._attrs=Object.fromEntries(Object.keys(i.properties).map(f=>[f.toLowerCase(),f])),i.plugins=[...i.plugins.filter(f=>!f.test||f.test({component:i}))],i.plugins.push({events:{connected:q,disconnected:_,willUpdate:I,firstUpdated:U,updated:z},name:"base"}),(!customElements.get(e)||o.settings.preview)&&customElements.define(e,i),E&&O.loadComponentCSS(`${o.components[e].path}.css`),l.set(e,i),i}async function h(e){if(e=e.toLowerCase(),customElements.get(e))return l.has(e)||l.set(e,customElements.get(e)),l.get(e);if(l.has(e))return l.get(e);if(u.has(e))return u.get(e);const n=(async()=>{try{const t=await M(e);return t?await k(e,t):(console.warn(`[Loader] Definition for ${e} not found after loading.`),null)}catch(t){return console.error(`[Loader] Failed to define component ${e}:`,t),u.delete(e),null}})();return u.set(e,n),n}const w=(...e)=>{if(typeof e[0]=="string"){const n=e[0].toLowerCase(),t=e[1];o.hooks.emit("componentAdded",{tag:n,component:t}),o.settings.dev||h(n).catch(s=>console.error(`[Loader] Error during preview definition for ${n}:`,s))}else typeof e[0]=="object"&&e[0]!==null&&Object.entries(e[0]).forEach(([n,t])=>{w(n,t)})},D=async(e=document.body)=>{if(!e||typeof e.querySelectorAll!="function")return;const n=e.querySelectorAll(":not(:defined)"),t=new Set;n.forEach(s=>{const r=s.tagName.toLowerCase();r.includes("-")&&t.add(r)}),await Promise.allSettled(Array.from(t).map(s=>h(s)))},T=()=>{new MutationObserver(async n=>{const t=new Set;for(const s of n)s.type!=="childList"||s.addedNodes.length===0||s.addedNodes.forEach(r=>{if(r.nodeType!==Node.ELEMENT_NODE)return;const y=E=>{const c=E.tagName.toLowerCase();c.includes("-")&&!customElements.get(c)&&!u.has(c)&&t.add(c)};y(r),typeof r.querySelectorAll=="function"&&r.querySelectorAll(":not(:defined)").forEach(y)});t.size>0&&await Promise.allSettled(Array.from(t).map(s=>h(s)))}).observe(document.body,{childList:!0,subtree:!0})},x=()=>{o.events.on("INIT_APP",()=>{D(document.body),T()})};return o.settings.dev&&o.hooks.on("init",x),o.hooks.set({componentAdded({tag:e,component:n}){m.has(e)||m.set(e,n),o.components[e]||(o.components[e]={}),o.components[e].definition=n},moduleAdded({module:e}){e.components&&Object.entries(e.components).forEach(([n,t])=>{if(Array.isArray(t))t.forEach(s=>{const r=`${e.name}-${s}`;o.components[r]||(o.components[r]={}),o.components[r].path=`${b(e.root)}/${e.name}/${n}/${s}`});else{const s=`${e.name}-${n}`;o.components[s]||(o.components[s]={}),o.components[s].path=`${b(e.root)}/${e.name}/${n}`}})}}),o.define=w,{define:w}};\n',metaType:"application/javascript"},"/modules/sw/index.js":{content:`export default({$APP:o})=>{o.addModule({name:"sw"}),o.addModule({name:"swEvents"});const r={},i=async(t={})=>{const{data:n}=t,{eventId:e,type:a,payload:s}=n;if(e&&r[e]){try{r[e].resolve(s)}catch(g){r[e].reject(new Error(g))}finally{delete r[e]}return}const c=o.swEvents[a];c&&await c({payload:s})};navigator.serviceWorker.onmessage=i,navigator.serviceWorker.onmessageerror=t=>{console.error(t)};const d=t=>navigator.serviceWorker.controller.postMessage(t),l=(t,n={})=>{const e=Date.now().toString()+Math.random().toString(36).substr(2,9);return new Promise((a,s)=>{r[e]={resolve:a,reject:s},d({type:t,payload:n,eventId:e})})};return o.swEvents.set({"SW:REQUEST_DATA_SYNC":({payload:t})=>{const{model:n,key:e,data:a}=t,s=o.Model[n];s&&s.emit(e,a)}}),{postMessage:d,request:l}};
`,metaType:"application/javascript"},"/modules/mvc/controller/backend/index.js":{content:'export default({View:I,$APP:r})=>{let m,_;const f={},T=async(e={})=>{const{data:t}=e,{eventId:o,type:s,payload:d,connection:l}=t,a=r.events[s];let i=d;const n=o&&(u=>_.postMessage({eventId:o,payload:u,connection:l}));if(a&&(i=await a({respond:n,payload:d,eventId:o})),o&&f[o]){try{f[t.eventId].resolve(i)}catch(u){f[t.eventId].reject(new Error(u))}finally{delete f[o]}return}if(n)return n(i)},S=async()=>{m=new Worker(`/worker.js?project=${encodeURIComponent(JSON.stringify(r.settings))}`,{type:"module"});const e=new MessageChannel;_=e.port1,_.onmessage=T,_.onmessageerror=l=>{console.error(l)},m.postMessage({type:"INIT_PORT"},[e.port2]);const{user:t,device:o,app:s,models:d}=await y("INIT_APP");r.models.set(d),r.events.emit("INIT_APP",{user:t,device:o,app:s}),r.about={user:t,device:o,app:s},await navigator.storage.persist()},C=(e,t,o)=>{if(!e){setTimeout(()=>o(t),100);return}e.postMessage(t)},g=e=>C(_,e,g),y=(e,t={},o=null)=>{const s=Date.now().toString()+Math.random().toString(36).substr(2,9),d={type:e,payload:t,eventId:s};return new Promise((l,a)=>{o&&(d.connection=o),f[s]={resolve:l,reject:a},g(d)})};r.hooks.on("init",S);const c=({instance:e})=>{const{id:t,model:o,limit:s,offset:d=0,includes:l,recursive:a,order:i,filter:n,row:u,rows:M}=e._data;if(u){e._row=u;return}if(M){e._rows=M;return}const h=e._data.method??t?"get":"getMany",p={limit:s,offset:d,order:i,recursive:a};n&&(p.filter=n),l&&(p.includes=Array.isArray(l)?l:l.split(","));const v=w=>{h.toLowerCase()==="get"?e._row=w:(e._rows=w.items??w,w.count&&(e._data.count=w.count)),e.requestUpdate(),e.emit("dataLoaded",{instance:e,rows:e._rows,row:e._row,component:e.constructor})};h.toLowerCase()==="get"?r.Model[o].get(t,p).then(v):r.Model[o].getAll(p).then(v)};return I.plugins.push({name:"dataQuery",events:{connected:({instance:e})=>{if(!e._data)return;e._listeners={};const{model:t,id:o}=e._data,s=e._row;s&&!o&&(e._data.id=s.id),(s&&!o||e._rows)&&e.emit("dataLoaded",{instance:e,component:e.constructor});const d=r.Model[t]?.rows;if(d){if(o){const l=`get:${o}`;s!==void 0&&d[o]===void 0&&(d[o]=s),e._listeners[l]=()=>{e._row=d[o],e.requestUpdate()},r.Model[t].on(l,e._listeners[l])}else e._listeners.any=()=>c({instance:e}),r.Model[t].onAny(e._listeners.any);!e._row&&!e._rows&&c({instance:e}),e.syncable=!0}},disconnected:({instance:e})=>{e._listeners&&Object.entries(e._listeners).forEach(([t,o])=>{!e?._data?.model||!r.Model[e._data.model]||(t==="any"?r.Model[e._data.model].offAny(o):r.Model[e._data.model].off(t,o))})}}}),r.events.on("INIT_APP",async()=>{r.events.set({UPDATE_MODELS:({payload:{models:e}})=>r.models.set(e),REQUEST_DATA_SYNC:({payload:{model:e,key:t,data:o}})=>{r.Model[e].emit(t,o),r.SW.request("SW:BROADCAST_DATA_SYNC",{key:t,model:e,data:o})}})}),y};\n',metaType:"application/javascript"},"/modules/mvc/model/frontend.js":{content:`import e from"/modules/mvc/model/index.js";export default({Backend:r})=>{const t=(o,u,d={})=>r(o,{model:u,...d});return e.request=t,e};
`,metaType:"application/javascript"},"/modules/mvc/model/index.js":{content:'import c from"/bootstrap.js";import R from"/modules/types/index.js";const M=({context:e,collection:t="models"})=>({module:n})=>{if(!n[t])return;const r=Object.fromEntries(Object.keys(n[t]).map(o=>{const s={id:R.string({primary:!0}),...n[t][o]};return[o,Object.fromEntries(Object.entries(s).map(([a,d])=>(d.name=a,d.relationship&&!d.targetForeignKey&&(d.targetForeignKey=o),[a,d])))]}));e.set(r)};c.addModule({name:"models",hooks:({context:e})=>({moduleAdded:M({context:e,collection:"models"}),moduleUpdated:M({context:e,collection:"models"})})});const D={get(e,t,n){return t==="remove"?()=>i.request("REMOVE",e._modelName,{id:e.id}):t==="update"?()=>{const r={...e};return delete r._modelName,i.request("EDIT",e._modelName,{row:r})}:t==="include"?async r=>{if(!e.id||!e._modelName)return console.error("Cannot run .include() on an object without an ID or model name."),n;if(!(e._modelName in c.models))throw new Error(`Model ${e._modelName} does not exist in models`);const s=c.models[e._modelName][r];if(!s)throw new Error(`Relationship \'${r}\' not found in ${e._modelName} model`);const a=await i.request("GET_MANY",s.targetModel,{opts:{filter:s.belongs?e[r]:{[s.targetForeignKey]:e.id}}});return e[r]=p(a,s.targetModel),n}:e[t]},set(e,t,n){return e[t]=n,!0}},u=async({modelName:e,action:t,payload:n})=>{const r=await i.request(t,e,n);return t==="ADD_MANY"&&r&&Array.isArray(r.results)?(r.results.forEach(o=>{o.status==="fulfilled"&&o.value&&(o.value=f(o.value,e))}),r):t.includes("MANY")?n.opts.object?r:r?.items?(r.items=p(r.items,e),r):p(r,e):f(r,e)},g=e=>[{type:"static",name:"get",handler:(t,n={})=>u({modelName:e,action:"GET",payload:t?{id:t,opts:n}:{opts:n}})},{type:"static",name:"getAll",handler:(t={})=>u({modelName:e,action:"GET_MANY",payload:{opts:t}})},{type:"static",name:"add",handler:(t,n)=>u({modelName:e,action:"ADD",payload:{row:t,opts:n}})},{type:"static",name:"addMany",handler:(t,n)=>u({modelName:e,action:"ADD_MANY",payload:{rows:t,opts:n}})},{type:"static",name:"remove",handler:t=>i.request("REMOVE",e,{id:t})},{type:"static",name:"removeAll",handler:t=>i.request("REMOVE_MANY",e,{opts:{filter:t}})},{type:"static",name:"edit",handler:t=>u({modelName:e,action:"EDIT",payload:{row:t}})},{type:"static",name:"editAll",handler:(t,n)=>i.request("EDIT_MANY",e,{opts:{filter:t,updates:n}})},{type:"static",name:"upsert",handler:(t,n)=>u({modelName:e,action:t?.id?"EDIT":"ADD",payload:{row:t,opts:n}})},{type:"dynamic",prefix:"getBy",action:"GET"},{type:"dynamic",prefix:"getAllBy",action:"GET_MANY"},{type:"dynamic",prefix:"editAllBy",action:"EDIT_MANY"},{type:"dynamic",prefix:"editBy",action:"EDIT"},{type:"dynamic",prefix:"removeBy",action:"REMOVE"},{type:"dynamic",prefix:"removeAllBy",action:"REMOVE_MANY"}],f=(e,t)=>!e||typeof e!="object"||e.errors?e:(i[t].rows[e.id]=e,i[t].on(`get:${e.id}`,n=>{if(n===void 0){delete i[t].rows[e.id];return}const{id:r,...o}=n;Object.assign(i[t].rows[e.id],o)}),e._modelName=t,new Proxy(i[t].rows[e.id],D)),p=(e,t)=>Array.isArray(e)?e.map(n=>f(n,t)):e,T=e=>typeof e!="string"||!e?e:e.charAt(0).toLowerCase()+e.slice(1),A=new Map,i=new Proxy({},{get(e,t,n){if(t in e)return Reflect.get(e,t,n);if(A.has(t))return A.get(t);const r=t;if(!(t in c.models))throw new Error(`Model ${r} does not exist in models`);const o=c.models[r],s=g(r,o),a=new Proxy({},{get(d,y,x){if(y in d)return Reflect.get(d,y,x);for(const l of s){if(l.type==="static"&&l.name===y)return l.handler;if(l.type==="dynamic"&&y.startsWith(l.prefix)){const E=y.slice(l.prefix.length);if(!E)continue;const m=T(E);if(!(m in o))throw new Error(`Property \'${m}\' not found in model \'${r}\'`);return(_,h=null)=>{const w={opts:{filter:{[m]:_}}};return h&&(w.opts.row=h),u({modelName:r,action:l.action,payload:w})}}}throw new Error(`Method \'${y}\' not found in model \'${r}\'`)}});return c.events.install(a),a.rows=c.storage.install({}),A.set(t,a),a}});i.proxifyRow=f,i.proxifyMultipleRows=p,i.addModels=M;export default i;\n',metaType:"application/javascript"},"/modules/mvc/controller/index.js":{content:'import _ from"/modules/mvc/controller/adapter-storage.js";import m from"/modules/mvc/controller/adapter-url.js";export default({View:g,$APP:f,Backend:p})=>{const y={..._,...m,backend:p},b=e=>{if(typeof e=="string"&&e.includes(".")){const[n,t]=e.split(".",2);return{storeKey:n,path:t}}return{storeKey:e,path:null}},h=(e,n)=>{const t=typeof e=="function"?e:(r,s)=>s!==void 0?t.set(r,s):t.get(r);f.events.install(t);const c=(r,s)=>{a[n]?.emit(r,s)};return t.get=r=>{const{storeKey:s,path:i}=b(r),o=e.get(s);return i&&typeof o=="object"&&o!==null?o[i]:o},t.set=(r,s)=>{const{storeKey:i,path:o}=b(r);if(o){const u={...e.get(i)||{},[o]:s};return e.set(i,u),c(i,u),u}return e.set(i,s),c(i,s),s},t.remove=r=>{const{storeKey:s,path:i}=b(r);if(i){const o=e.get(s);return typeof o=="object"&&o!==null&&(delete o[i],e.set(s,o),c(s,o)),{key:s}}return e.remove(s),c(s,void 0),{key:s}},t.has=e.has,t.keys=e.keys,t.entries=e.entries,l.set(n,t),t},l=new Map,a=new Proxy({},{get(e,n){if(n in e)return e[n];if(l.has(n))return l.get(n);if(n in y)return h(y[n],n);if(f.mv3Connections?.includes(n))return(t,c={})=>(l.get("backend")||h(y.backend,"backend"))(t,c,n)}}),j=()=>{f.swEvents.set({"SW:PROP_SYNC_UPDATE":({payload:n})=>{const{sync:t,key:c,value:r}=n,s=a[t];s&&(console.log(`SYNC: Received update for ${t}.${c}`,r),s.emit(c,r,{skipBroadcast:!0}))}});const e=n=>{const t=a[n],c=new Map(t.entries()),r=new Set(t.listeners.keys());c.forEach((s,i)=>{t.emit(i,s),r.delete(i)}),r.forEach(s=>t.emit(s,void 0))};window.addEventListener("popstate",()=>{e("querystring"),e("hash")})};f.hooks.on("init",j);const O=(e,n,t)=>{if(n.scope){if(n.scope.includes(".")){const[c,r]=n.scope.split(".");if(t[c]?.[r])return`${t[c]?.[r]}:${e}`}if(t[n.scope])return`${t[n.scope]}:${e}`}return e},S=["local","session"];return g.plugins.push({name:"syncProps",test:({component:e})=>Object.entries(e.properties||{}).some(([,n])=>n.sync),events:{disconnected:({instance:e})=>{e._listeners&&Object.entries(e._listeners).forEach(([n,t])=>{const c=a[n];c&&Object.entries(t).forEach(([r,s])=>c.off(r,s))})},connected:({instance:e,component:n})=>{Object.entries(n.properties).filter(([,t])=>t.sync).forEach(([t,c])=>{const r=a[c.sync];if(!r)return;const s=O(t,c,e),i=r.get(s);S.includes(c.sync)&&!r.hasListeners(s)&&r.on(s,(d,u={})=>{u.skipBroadcast||f.SW.request("SW:BROADCAST_SYNCED_PROP",{value:d,sync:c.sync,key:s})});const o=d=>{e.state[t]=d,e.requestUpdate(t,"$$")};e._listeners||(e._listeners={}),e._listeners[c.sync]||(e._listeners[c.sync]={}),e._listeners[c.sync][s]=o,Object.getOwnPropertyDescriptor(e,t)||Object.defineProperty(e,t,{get:()=>e.state[t],set:d=>{e.state[t]!==d&&(e.state[t]=d,d!==r.get(s)&&r.set(s,d))}}),r.on(s,o),o(i??c.defaultValue)})}}}),f.Controller=a,a};\n',metaType:"application/javascript"},"/modules/mvc/controller/adapter-storage.js":{content:`const o=e=>typeof e=="object"&&e!==null||Array.isArray(e)?JSON.stringify(e):e,c=e=>{try{return JSON.parse(e)}catch{return e}},u=e=>t=>{const n=e.getItem(t);return n!==null?c(n):null},i=e=>(t,n)=>(e.setItem(t,o(n)),{key:t}),a=e=>t=>(e.removeItem(t),{key:t}),l=e=>()=>Object.keys(e),m=e=>t=>e.getItem(t)!==null&&e.getItem(t)!==void 0,s=e=>({has:m(e),set:i(e),remove:a(e),get:u(e),keys:l(e)}),r=new Map,d={has:e=>r.has(e),get:e=>r.get(e),set:(e,t)=>(r.set(e,t),{key:e}),remove:e=>(r.delete(e),{key:e}),keys:()=>r.keys()},g=s(window.localStorage),S=s(window.sessionStorage);export default{local:g,ram:d,session:S};
`,metaType:"application/javascript"},"/modules/mvc/controller/adapter-url.js":{content:'const r=()=>{const a=window.location.hash.substring(1);return new URLSearchParams(a)},n=a=>{const s=a.toString();window.location.hash=s},e={get:a=>r().get(a),has:a=>r().has(a),set:(a,s)=>{const t=r();return t.set(a,s),n(t),window.dispatchEvent(new Event("popstate")),{key:a}},remove:a=>{const s=r();return s.delete(a),n(s),{key:a}},keys:()=>[...r().keys()],entries:()=>[...r().entries()]},o={get(a){return new URLSearchParams(window.location.search).get(a)},set(a,s){const t=new URLSearchParams(window.location.search);return t.set(a,s),window.history?.pushState?.({},"",`${window.location.pathname}?${t}`),window.dispatchEvent(new Event("popstate")),{key:a}},remove(a){const s=new URLSearchParams(window.location.search);return s.delete(a),window.history.pushState?.({},"",`${window.location.pathname}?${s}`),{key:a}},keys(){return[...new URLSearchParams(window.location.search).keys()]},has(a){return new URLSearchParams(window.location.search).has(a)},entries:()=>[...new URLSearchParams(window.location.search).entries()]};export default{querystring:o,hash:e};\n',metaType:"application/javascript"},"/modules/router/index.js":{content:'export default({html:p,Controller:u,$APP:r})=>{class c{static stack=[];static routes={};static namedRoutes={};static init(t,e){if(!Object.keys(t).length)return console.error("Error: no routes loaded");this.routes=t,this.defaultTitle=e,this.namedRoutes={};for(const s in t){const n=t[s];n.name&&(this.namedRoutes[n.name]&&console.warn(`Router Warning: Duplicate route name "${n.name}" found. The path "${s}" will be used.`),this.namedRoutes[n.name]=s)}window.addEventListener("popstate",()=>{const s=window.location.pathname+window.location.search;this.handleHistoryNavigation(s)}),this.setCurrentRoute(window.location.pathname+window.location.search,!0)}static handleHistoryNavigation(t){const e=this.stack.findIndex(s=>this.normalizePath(s.path)===this.normalizePath(t));if(e!==-1){this.truncateStack(e);const s=this.matchRoute(t);s&&this.updateCurrentRouteInRam(s)}else this.setCurrentRoute(t,!0)}static create(t,e={}){const s=this.namedRoutes[t];if(!s)return console.error(`Router Error: Route with name "${t}" not found.`),null;const n=s.replace(/:(\\w+)/g,(o,i)=>e[i]!==void 0&&e[i]!==null?String(e[i]):(console.warn(`Router Warning: Parameter "${i}" was not provided for named route "${t}".`),o));return n.includes(":")?(console.error(`Router Error: Could not create path for "${t}". Final path still contains unresolved parameters: ${n}`),null):n}static replace(t,e={}){const n={...window.history.state||{},...e};window.history.replaceState(n,"",t)}static go(t,e){if(e){const s=this.create(t,e);s&&this.setCurrentRoute(s,!0);return}this.setCurrentRoute(t,!0)}static home(){this.stack=[],this.go("/")}static back(){if(this.stack.length<=1){this.home();return}this.stack=this.stack.slice(0,-1),window.history.back()}static pushToStack(t,e={},s=this.defaultTitle){t==="/"?this.stack=[]:this.stack.push({path:t,params:e,title:s}),this.setTitle(`${s} | ${r.settings.name}`)}static isRoot(){return this.stack.length===0}static truncateStack(t=0){t>=this.stack.length||(this.stack=this.stack.slice(0,t+1))}static normalizePath(t="/"){return((t.includes("url=")?t.split("url=")[1]:t.split("?")[0])||"/").replace(/\\/+$/,"")}static push(t,e={}){window.history.pushState(e,"",t);const s=new PopStateEvent("popstate",{state:e});window.dispatchEvent(s)}static setCurrentRoute(t,e=!0){if(!this.routes)return;const s=this.normalizePath(t),n=this.matchRoute(s);if(!n)return this.go("/");this.updateCurrentRouteInRam(n),e&&(this.pushToStack(s,n.params,n.route.title||this.defaultTitle),this.push(t,{path:s}))}static matchRoute(t){const e=t.split("?")[0];if(this.routes[e])return{route:this.routes[e],params:{},path:e,name:this.routes[e].name??e.slice(1)};for(const s in this.routes){const n=[],o=s.replace(/:([^/]+)/g,(d,a)=>(n.push(a),"([^/]+)")),i=new RegExp(`^${o.replace(/\\/+$/,"")}$`),h=e.match(i);if(!h)continue;const l={};return n.forEach((d,a)=>{l[d]=h[a+1]}),{route:this.routes[s],params:l,path:e,name:this.routes[s].name??e.slice(1)}}return null}static setTitle(t){document.title=t,this.stack.at(-1).title=t,this.currentRoute.route.title=t,u.ram.set("currentRoute",{...this.currentRoute})}static updateCurrentRouteInRam(t){this.currentRoute=t,this.currentRoute.root=this.isRoot(),u.ram.set("currentRoute",this.currentRoute)}}const m=()=>{c.init(r.routes)};return r.hooks.on("init",m),r.routes.set({"/":{component:()=>p`<app-index></app-index>`}}),r.addModule({name:"router"}),c};\n',metaType:"application/javascript"},"/index.js":{content:'export default({$APP:t,html:e})=>{const p={"/inspector":{component:()=>e`<mcp-inspector></mcp-inspector>`,title:"Inspector",template:"template-app"},"/servers":{name:"dev",component:()=>e`<mcp-servers></mcp-servers>`,title:"Servers",template:"template-app"},"/dev":{name:"dev",component:()=>e`<mcp-dev></mcp-dev>`,title:"Develop",template:"template-app"},"/":{name:"dev",component:()=>e`<mcp-dev></mcp-dev>`,title:"Develop",template:"template-app"},"/chat":{component:()=>e`<mcp-chat></mcp-chat>`,title:"Chat",template:"template-app"}};t.routes.set(p)};\n',metaType:"application/javascript"},"/modules/p2p/index.js":{content:`export default({$APP:e})=>{const t={};e.events.install(t),e.addModule({name:"p2p"});const s={"P2P:SEND_DATA_OP":({payload:n})=>{console.log("P2P DATA OP",{payload:n}),e.p2p.emit("SEND_DATA_OP",n)}};return e.events.set(s),t};
`,metaType:"application/javascript"},"/modules/ai/index.js":{content:'export const dependencies={CreateMessageRequestSchema:["@modelcontextprotocol/sdk/types.js","CreateMessageRequestSchema"],ElicitRequestSchema:["@modelcontextprotocol/sdk/types.js","ElicitRequestSchema"],ServerNotificationSchema:["@modelcontextprotocol/sdk/types.js","ServerNotificationSchema"],McpClient:["@modelcontextprotocol/sdk/client/index.js","Client"],McpServer:["@modelcontextprotocol/sdk/server/mcp.js","McpServer"],InMemoryTransport:["@modelcontextprotocol/sdk/inMemory.js","InMemoryTransport"],StreamableHTTPClientTransport:["@modelcontextprotocol/sdk/client/streamableHttp.js","StreamableHTTPClientTransport"],z:"zod"},locals={javascriptTransportPlugin:"/modules/ai/plugins/transports/javascript.js",httpTransportPlugin:"/modules/ai/plugins/transports/streamablehttp.js",toolsPlugin:"/modules/ai/plugins/core/tools.js",eventsPlugin:"/modules/ai/plugins/core/events.js",serversPlugin:"/modules/ai/plugins/core/servers.js",resourcesPlugin:"/modules/ai/plugins/core/resources.js",promptsPlugin:"/modules/ai/plugins/core/prompts.js",requestsPlugin:"/modules/ai/plugins/core/requests.js",notificationsPlugin:"/modules/ai/plugins/core/notifications.js",clientsPlugin:"/modules/ai/plugins/core/clients.js",rootsPlugin:"/modules/ai/plugins/core/roots.js",historyPlugin:"/modules/ai/plugins/history.js",chatPlugin:"/modules/ai/plugins/chat.js",conversationsPlugin:"/modules/ai/plugins/conversations.js"};export default async({historyPlugin:r,clientsPlugin:l,javascriptTransportPlugin:a,httpTransportPlugin:c,chatPlugin:u,conversationsPlugin:p,toolsPlugin:d,resourcesPlugin:g,requestsPlugin:m,eventsPlugin:h,serversPlugin:j,notificationsPlugin:f,rootsPlugin:P})=>{const v=(t=[])=>{const n={plugins:new Map,transports:new Map,config:{},isInitialized:!1,use(s){return this.plugins.has(s.name)?(console.warn(`Plugin "${s.name}" is already registered.`),this):(this.plugins.set(s.name,s),typeof s.initialize=="function"&&s.initialize(this),this)},addStore(s,e={}){this[s]||(this[s]=e)},init(s){if(this.isInitialized)return!console.log("AI Host already initialized.")&&this;if(this.config={generationConfig:{temperature:.7,max_tokens:2048},...s},s.defaultRoots){const e=this.plugin("roots");e&&s.defaultRoots.forEach(S=>e.addRoot(S))}return this.isInitialized=!0,console.log("AI Host Initialized."),this},plugin(s){const e=this.plugins.get(s);return e?e.api:null}};return t.forEach(s=>n.use(s)),n},o=[r,l,m,a,c,h,j,f,g,P,d,u,p],i=v(o);for(const t of o)t.api&&Object.assign(i,t.api);return i};\n',metaType:"application/javascript"},"/modules/ai/plugins/transports/javascript.js":{content:'export default async({$APP:a,McpServer:c,InMemoryTransport:o})=>({name:"transport:javascript",initialize(s){const t={name:"JavaScript",async createTransport(e,i){const{host:d,config:m}=i;let r;if(e.serverInstance)r=e.serverInstance;else if(e.command){const n=await import(e.command);if(typeof n.default!="function")throw new Error(`Module ${e.command} does not have a default export function.`);if(r=n.default({...a,$APP:a,host:d,config:m,...e.args}),!(r instanceof c))throw new Error(`Module ${e.command} did not return an McpServer instance.`)}else throw new Error("JavaScript transport requires \'serverInstance\' or \'command\'.");const[l,u]=o.createLinkedPair();return await r.connect(u),l}};s.transports.set(t.name,t)},api:{}});\n',metaType:"application/javascript"},"/modules/ai/plugins/transports/streamablehttp.js":{content:`export default({StreamableHTTPClientTransport:a})=>({name:"transport:http",initialize(n){const r={name:"StreamableHTTP",async createTransport(t){const e=t.url||t.command;if(!e)throw new Error("StreamableHTTP transport requires a 'url'.");return new a(new URL(e))}};n.transports.set(r.name,r)},api:{}});
`,metaType:"application/javascript"},"/modules/ai/plugins/core/tools.js":{content:'export default()=>({name:"tools",initialize(o){const n=o.plugin("history");if(!n)throw new Error("Tooling plugin requires the History plugin.");o.addStore("toolToAliasMap",new Map),o.addStore("promptToAliasMap",new Map),this.api.callTool=(t,r)=>n.withHistory("tool:call",{toolName:t,args:r},async()=>{let e=o.toolToAliasMap.get(t);if(!e&&(await o._updateAllToolMaps(),e=o.toolToAliasMap.get(t),!e))throw new Error(`Tool \'${t}\' not found on any connected server.`);return o.clients.get(e).callTool({name:t,arguments:r})}),this.api.listTools=({servers:t}={})=>n.withHistory("tools:list",{servers:t},async()=>{const r=[],e=t||Array.from(o.clients.keys());for(const i of e){const a=o.clients.get(i);if(a)try{const{tools:s=[]}=await a.listTools();r.push(...s.map(l=>({...l,server:i})))}catch(s){console.error(`Could not list tools for server ${i}:`,s)}}return{tools:r}}),this.api._updateAllToolMaps=async()=>{o.toolToAliasMap.clear();for(const t of o.clients.keys())await o._updateToolMapForAlias(t)},this.api._updateToolMapForAlias=async t=>{const r=o.clients.get(t);if(r)try{const{tools:e}=await r.listTools();for(const i of e)o.toolToAliasMap.has(i.name)&&console.warn(`Tool name conflict: \'${i.name}\' from server \'${t}\' is overwriting an existing tool.`),o.toolToAliasMap.set(i.name,t)}catch(e){console.error({error:e})}},this.api._cleanupMappingsForAlias=t=>{for(const[r,e]of o.toolToAliasMap.entries())e===t&&o.toolToAliasMap.delete(r);for(const[r,e]of o.promptToAliasMap.entries())e===t&&o.promptToAliasMap.delete(r)},this.api._updateAllPromptMaps=async()=>{o.promptToAliasMap.clear();for(const t of o.clients.keys())await o._updatePromptMapForAlias(t)},this.api._updatePromptMapForAlias=async t=>{const r=o.clients.get(t);if(!(!r||typeof r.listPrompts!="function"))try{const{prompts:e}=await r.listPrompts();console.log({prompts:e});for(const i of e)o.promptToAliasMap.has(i.name)&&console.warn(`Prompt name conflict: \'${i.name}\' from server \'${t}\' is overwriting an existing prompt.`),o.promptToAliasMap.set(i.name,t)}catch{}},this.api.getPrompt=({name:t,arguments:r})=>n.withHistory("prompt:get",{name:t,arguments:r},async()=>{let e=o.promptToAliasMap.get(t);if(!e&&(await o._updateAllPromptMaps(),e=o.promptToAliasMap.get(t),!e))throw new Error(`Prompt \'${t}\' not found.`);return o.clients.get(e).getPrompt({name:t,arguments:r})}),this.api.listPrompts=({servers:t}={})=>n.withHistory("prompts:list",{servers:t},async()=>{const r=[],e=t||Array.from(o.clients.keys());for(const i of e){const a=o.clients.get(i);if(a&&typeof a.listPrompts=="function")try{const{prompts:s=[]}=await a.listPrompts();r.push(...s.map(l=>({...l,server:i})))}catch(s){console.error(`Could not list prompts for server ${i}:`,s)}}return{prompts:r}}),this.api.processTemplate=(t,r={})=>n.withHistory("template:process",{templateName:t,variables:r},async()=>{const e=await this.api.getPrompt({name:t,arguments:r});let i=e.messages||e.content||"";typeof i!="string"&&(i=JSON.stringify(i));for(const[a,s]of Object.entries(r)){const l=new RegExp(`{{\\\\s*${a}\\\\s*}}`,"g");i=i.replace(l,String(s))}return{content:i,originalTemplate:e,variables:r}})},api:{}});\n',metaType:"application/javascript"},"/modules/ai/plugins/core/events.js":{content:`export default()=>({name:"events",initialize(n){const t=new Map;this.api={on(s,i){const e=t.get(s);e?e.push(i):t.set(s,[i])},off(s,i){const e=t.get(s);e&&(i?e.splice(e.indexOf(i)>>>0,1):t.set(s,[]))},emit(s,i){const e=t.get(s);e&&e.slice().forEach(a=>a(i))}},n.addStore("events",this.api)},api:{}});
`,metaType:"application/javascript"},"/modules/ai/plugins/core/servers.js":{content:`export default()=>({name:"servers",initialize(s){const e={availableServers:[{id:"default-feature-rich",name:"Default Feature-Rich Server",description:"A comprehensive server with a wide range of capabilities, including tools, resources, and prompts.",path:"/templates/servers/basic.js",tags:["Official","Recommended","Full-Featured"],icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>'},{id:"simple-greeter",name:"Simple Greeter Server",description:"A minimal server that demonstrates basic greeting functionality. Ideal for getting started.",path:"/templates/servers/greeter.js",tags:["Example","Beginner"],icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>'},{id:"data-api-server",name:"Data API Server",description:"Exposes a set of data resources for querying user and post information.",path:"/templates/servers/data-api.js",tags:["Example","Data","API"],icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7V4h16v3"></path><path d="M9 20h6"></path><path d="M12 4v16"></path></svg>'},{id:"custom-tool-server",name:"Custom Tool Server",description:"A server showcasing how to implement and use custom tools within the MCP.",path:"/templates/servers/custom-tool.js",tags:["Advanced","Tools"],icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg>'}],favoriteServerIds:[]};this.api={listServers:()=>[...e.availableServers],getFavorites:()=>[...e.favoriteServerIds],toggleFavorite:t=>{const r=e.favoriteServerIds.indexOf(t);r>-1?e.favoriteServerIds.splice(r,1):e.favoriteServerIds.push(t),s.events.emit("servers:favoritesChanged",[...e.favoriteServerIds])}}},api:{}});
`,metaType:"application/javascript"},"/modules/ai/plugins/core/resources.js":{content:'export default()=>({name:"resources",initialize(a){const u=new Map,i=a.plugin("history");if(!i)throw new Error("Resource plugin requires the History plugin.");const p=async({methodName:e,resultKey:s,serverAliases:o})=>{const r=[],c=o||Array.from(a.clients.keys());for(const t of c){const l=a.clients.get(t);if(l&&typeof l[e]=="function")try{const n=await l[e]();r.push(...(n[s]||[]).map(d=>({...d,server:t})))}catch(n){console.error(`Could not execute ${e} for server ${t}:`,n)}}return{[s]:r}};this.api.readResource=({uri:e,requestingServer:s=null})=>i.withHistory("resource:read",{uri:e,requestingServer:s},async()=>{const o=a.plugin("roots");if(s&&o&&!o.validateResourceAccess(s,e))throw new Error(`Server ${s} does not have access to resource ${e}`);for(const[r,c]of a.clients.entries())if(console.log({requestingServer:s,rootApi:o,valid:o.validateResourceAccess(r,e)}),!s||!o||o.validateResourceAccess(r,e))try{const t=await c.readResource({uri:e});if(console.log({uri:e,result:t}),t!=null)return t}catch{}throw new Error(`Resource not found or could not be read: ${e}`)}),this.api.readResourceCached=async({uri:e,requestingServer:s=null,maxAge:o=3e5})=>{const r=`${e}_${s||"global"}`,c=u.get(r);if(c&&Date.now()-c.timestamp<o)return c.data;const t=await this.api.readResource({uri:e,requestingServer:s});return u.set(r,{data:t,timestamp:Date.now()}),t},this.api.listResources=({servers:e}={})=>i.withHistory("resources:list",{servers:e},()=>p({methodName:"listResources",resultKey:"resources",serverAliases:e})),this.api.listResourceTemplates=({servers:e}={})=>i.withHistory("resourceTemplates:list",{servers:e},()=>p({methodName:"listResourceTemplates",resultKey:"resourceTemplates",serverAliases:e}))},api:{}});\n',metaType:"application/javascript"},"/modules/icon-lucide/lucide/chevron-down.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m6 9l6 6l6-6"/></svg>',metaType:"image/svg+xml"},"/modules/ai/plugins/core/prompts.js":{content:`export default()=>{};
`,metaType:"application/javascript"},"/modules/ai/plugins/core/requests.js":{content:'export default({ElicitRequestSchema:d,CreateMessageRequestSchema:l})=>({name:"requests",initialize(o){const c=new Map,a=new Map,p=new Set,i=o.plugin("history");if(o.addStore("requestHandlers",new Set),!i)throw new Error("Request plugin requires the History plugin.");const u=()=>p.forEach(e=>e());this.api.onRequestChange=e=>(p.add(e),()=>p.delete(e));const m=async(e,r)=>{const t=i.addToHistory({toolName:"elicitation/request",params:e.params.message,status:"pending",server:r,schema:e.params.requestedSchema}),n=new Promise(s=>c.set(t.id,{request:e,resolve:s,server:r}));u();try{const s=await n;return s.action==="decline"?(i.updateHistory(t.id,{status:"error",error:"User declined request."}),{action:"decline",content:{error:"User declined the request."}}):(i.updateHistory(t.id,{status:"success",result:s.content}),{action:"accept",content:s.content})}catch(s){return i.updateHistory(t.id,{status:"error",error:s.message}),{action:"decline",content:{error:"An error occurred during elicitation."}}}finally{c.delete(t.id),u()}},h=async(e,r)=>{const t=i.addToHistory({toolName:"sampling/request",params:e.params,status:"pending",server:r}),n=new Promise(s=>a.set(t.id,{request:e,resolve:s,server:r}));u();try{if((await n).approved)return i.updateHistory(t.id,{status:"success",result:{approved:!0}}),{model:"test-model",role:"assistant",content:{type:"text",text:"This is a test response"}};throw i.updateHistory(t.id,{status:"error",error:"User rejected request."}),new Error("User rejected the sampling request.")}catch(s){throw i.updateHistory(t.id,{status:"error",error:s.message}),s}finally{a.delete(t.id),u()}};o.requestHandlers.add([d,m]),o.requestHandlers.add([l,h]),this.api.listElicitationRequests=()=>i.withHistory("elicitations:list",{},async()=>({elicitationRequests:Array.from(c.entries()).map(([e,r])=>({id:e,server:r.server,requestText:r.request.params.message,schema:r.request.params.requestedSchema}))})),this.api.listSamplingRequests=()=>i.withHistory("sampling:list",{},async()=>({samplingRequests:Array.from(a.entries()).map(([e,r])=>({id:e,server:r.server,request:r.request.params}))})),this.api.respondToElicitation=({id:e,response:r,server:t,action:n="submit"})=>i.withHistory("elicitations:respond",{id:e,response:r,server:t,action:n},async()=>{const s=c.get(e);if(!s||s.server!==t)throw new Error(`Request not found or server mismatch for id: ${e}`);return s.resolve(n==="submit"?{action:"accept",content:r}:{action:"decline"}),{success:!0}}),this.api.approveSamplingRequest=({id:e,server:r})=>i.withHistory("sampling:approve",{id:e,server:r},async()=>{const t=a.get(e);if(!t||t.server!==r)throw new Error(`Sampling request not found or server mismatch for id: ${e}`);return t.resolve({approved:!0}),{success:!0}}),this.api.rejectSamplingRequest=({id:e,server:r})=>i.withHistory("sampling:reject",{id:e,server:r},async()=>{const t=a.get(e);if(!t||t.server!==r)throw new Error(`Sampling request not found or server mismatch for id: ${e}`);return t.resolve({approved:!1}),{success:!0}})},api:{}});\n',metaType:"application/javascript"},"/modules/ai/plugins/core/notifications.js":{content:`export default({ServerNotificationSchema:o})=>({name:"notifications",initialize(i){for(const e of o.options){const t=e.shape.method.value;i.requestHandlers.add([e,a=>{console.log("MCP Notification Received",{method:t,notification:a})}])}},api:{}});
`,metaType:"application/javascript"},"/modules/ai/plugins/core/clients.js":{content:'export default({McpClient:l})=>({name:"clients",initialize(e){if(!e.plugin("history"))throw new Error("System plugin requires the History plugin.");e.addStore("clients",new Map),this.api.listClients=()=>Array.from(e.clients.keys()),this.api.connect=async(t,r)=>e.plugin("history").withHistory("server:connect",{transportConfig:t,options:r},async()=>{const{alias:i,assignedRoots:o=[]}=r;if(e.clients.has(i))throw new Error(`Client with alias \'${i}\' already exists.`);const a=e.transports.get(t.type);if(!a)throw new Error(`Unsupported transport type: \'${t.type}\'`);const p=await a.createTransport(t,{...e.dependencies,host:e,config:e.config}),c=new l({name:`host-client-for-${i}`,version:"1.0.0"},{capabilities:{sampling:{},elicitation:{},logging:{},roots:{listChanged:!0}}});if(await c.connect(p),e.clients.set(i,c),[...e.requestHandlers].forEach(([n,u])=>c.setRequestHandler(n,y=>u(y,i))),o.length>0){const n=e.plugin("roots");n&&await n.assignRootsToServer(i,o)}return await e._updateToolMapForAlias(i),await e._updatePromptMapForAlias(i),console.log(`Client \'${i}\' connected via ${t.type}.`),{alias:i,transportType:t.type,success:!0}}),this.api.disconnect=async t=>e.plugin("history").withHistory("server:disconnect",{alias:t},async()=>{const s=e.clients.get(t);return s?(await s.disconnect(),e.clients.delete(t),e._cleanupMappingsForAlias(t),console.log(`Client \'${t}\' disconnected.`),{alias:t,success:!0}):(console.warn(`No client with alias \'${t}\' to disconnect.`),{success:!1,message:"Client not found"})})},api:{}});\n',metaType:"application/javascript"},"/modules/ai/plugins/core/roots.js":{content:'export default{name:"roots",initialize(c){const n=new Map,i=new Map,h=new Set,a=c.plugin("history");if(!a)throw new Error("Root plugin requires the History plugin.");const f=(t,o)=>{const e={action:t,uri:o,root:n.get(o),timestamp:new Date().toISOString()};h.forEach(r=>r(e))},u=async t=>{const o=c.clients.get(t),e=this.api.getServerRoots(t);if(o&&typeof o.setRoots=="function")try{await o.setRoots(e)}catch(r){console.error(`Failed to notify server ${t} of roots:`,r)}};this.api.addRoot=t=>{const{uri:o,path:e,name:r,description:d}=t,s=o||e;if(!s)throw new Error("Root URI or path is required");return a.withHistory("root:add",{uri:s},async()=>(n.set(s,{uri:s,name:r||s,description:d||`Root access to ${s}`}),f("added",s),{uri:s,success:!0}))},this.api.removeRoot=t=>a.withHistory("root:remove",{uri:t},async()=>n.has(t)?(n.delete(t),i.forEach(o=>o.delete(t)),f("removed",t),{success:!0}):{success:!1,message:"Root does not exist"}),this.api.assignRootsToServer=(t,o)=>a.withHistory("root:assign",{serverAlias:t,rootUris:o},async()=>{if(!c.clients.has(t))throw new Error(`Server ${t} is not connected`);for(const e of o)if(!n.has(e))throw new Error(`Root ${e} does not exist`);return i.set(t,new Set(o)),await u(t),{serverAlias:t,assignedCount:o.length}}),this.api.validateResourceAccess=(t,o)=>{const e=i.get(t);if(!e)return!1;for(const r of e)if(o.startsWith(r))return!0;return!1},this.api.getServerRoots=t=>{const o=i.get(t);return o?Array.from(o).map(e=>n.get(e)).filter(Boolean):[]},this.api.onRootChange=t=>(h.add(t),()=>h.delete(t))},api:{}};\n',metaType:"application/javascript"},"/modules/ai/plugins/history.js":{content:'export default()=>({name:"history",initialize(y){let o=[];const a=new Set,n=(t,e)=>{for(const s of a)try{s({action:t,entry:e,history:[...o]})}catch(r){console.error("Error in history listener:",r)}};this.api.onHistoryChange=t=>(a.add(t),()=>a.delete(t)),this.api.addToHistory=t=>{const e={id:Date.now()+Math.random(),timestamp:new Date().toISOString(),...t};return o=[e,...o],n("add",e),e},this.api.updateHistory=(t,e)=>{let s=null;return o=o.map(r=>r.id===t?(s={...r,...e,updatedAt:new Date().toISOString()},s):r),s&&n("update",s),s},this.api.getHistory=()=>[...o],this.api.clearHistory=()=>{o=[],n("clear",null)},this.api.withHistory=async(t,e,s)=>{const r=this.api.addToHistory({toolName:t,args:e,status:"pending"});try{const i=await s();return this.api.updateHistory(r.id,{status:"success",result:i}),typeof i=="object"&&i!==null&&!i.history&&(i.history=r),i}catch(i){return console.error(`Failed to execute ${t}:`,i),this.api.updateHistory(r.id,{status:"error",error:i.message}),{error:i,history:r}}}},api:{}});\n',metaType:"application/javascript"},"/modules/ai/plugins/chat.js":{content:'const R=e=>e.content?{role:e.role==="assistant"?"model":"user",parts:Array.isArray(e.content)?e.content.map(t=>({text:t.text})):[{text:e.content}]}:e.toolCalls?{role:"model",parts:e.toolCalls.map(t=>({functionCall:{name:t.name,args:t.arguments}}))}:e.role==="tool"?{role:"function",parts:[{functionResponse:{name:e.toolCallId,response:{result:e.result}}}]}:{role:"user",parts:[{text:""}]},x=(e=[])=>e.map(R),j=e=>{const t=e.candidates?.[0];if(!t?.content?.parts?.[0])return{role:"assistant",content:""};const a=[];let s="";for(const r of t.content.parts)r.text&&(s+=r.text),r.functionCall&&a.push({id:r.functionCall.name,name:r.functionCall.name,arguments:r.functionCall.args});return{role:"assistant",content:s||null,toolCalls:a.length>0?a:null}},M=e=>({name:e.name.replace(/\\//g,"__"),description:e.description,parameters:{type:"OBJECT",properties:e.inputSchema.properties}}),$=async({apiKey:e,model:t,messages:a,generationConfig:s,tools:r})=>{const l=`https://generativelanguage.googleapis.com/v1beta/models/${t}:generateContent?key=${e}`,i={contents:a,generationConfig:s,...r?.length>0&&{tools:[{functionDeclarations:r}]}},o=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!o.ok){const n=await o.json().catch(()=>({error:{message:"Failed to parse error."}}));throw new Error(`Gemini API Error: ${n.error?.message||o.statusText}`)}return o.json()};async function*J({apiKey:e,model:t,messages:a,generationConfig:s,tools:r}){const l=`https://generativelanguage.googleapis.com/v1beta/models/${t}:streamGenerateContent?key=${e}&alt=sse`,i={contents:a,generationConfig:s,...r?.length>0&&{tools:[{functionDeclarations:r}]}},o=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!o.ok){const m=await o.json().catch(()=>({error:{message:"Failed to parse error."}}));throw new Error(`Gemini Streaming API Error: ${m.error?.message||o.statusText}`)}const n=o.body.getReader(),c=new TextDecoder;let y="";for(;;){const{value:m,done:C}=await n.read();if(C)break;y+=c.decode(m,{stream:!0});const f=y.split(`\n`);y=f.pop();for(const g of f)if(g.startsWith("data: "))try{yield JSON.parse(g.substring(6))}catch{console.error("Failed to parse stream chunk:",g)}}}const D={name:"google",defaultModel:"gemini-1.5-flash",adaptMessages:x,adaptTools:e=>e.map(M),adaptResponse:j,callAPI:$,streamAPI:J,validateConfig:e=>(e.geminiApiKey||console.warn("Google API key is missing."),!0)},B=e=>{if(e.role==="tool"){const t=e.structuredContent?.result||e.result||e.content;return{role:"tool",tool_call_id:e.toolCallId,content:typeof t=="string"?t:JSON.stringify(t)}}return e.toolCalls?{role:"assistant",content:null,tool_calls:e.toolCalls.map(t=>({id:t.id,type:"function",function:{name:t.name,arguments:typeof t.arguments=="string"?t.arguments:JSON.stringify(t.arguments)}}))}:e.content?{role:e.role,content:Array.isArray(e.content)?e.content.map(t=>t.text||t).join(`\n`):e.content}:{role:"user",content:""}},v=(e=[])=>e.map(B),_=e=>{const t=e.choices?.[0];if(!t)return{role:"assistant",content:""};const{message:a}=t;return a.tool_calls?.length>0?{role:"assistant",toolCalls:a.tool_calls.map(s=>({id:s.id,name:s.function.name,arguments:typeof s.function.arguments=="string"?JSON.parse(s.function.arguments):s.function.arguments}))}:{role:"assistant",content:a.content??""}},b=e=>({type:"function",function:{name:e.name.replace(/\\//g,"__"),description:e.description,parameters:e.inputSchema}}),G=async({apiKey:e,model:t,messages:a,generationConfig:s,tools:r})=>{const l="https://openrouter.ai/api/v1/chat/completions",i={model:t,messages:a,...s,...r?.length>0&&{tools:r}},o=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(i)});if(!o.ok){const n=await o.json().catch(()=>({error:{message:"Failed to parse error."}}));throw new Error(`OpenRouter API Error: ${n.error?.message||o.statusText}`)}return o.json()};async function*F({apiKey:e,model:t,messages:a,generationConfig:s,tools:r}){const l="https://openrouter.ai/api/v1/chat/completions",i={model:t,messages:a,...s,...r?.length>0&&{tools:r},stream:!0},o=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(i)});if(!o.ok){const m=await o.json().catch(()=>({error:{message:"Failed to parse error."}}));throw new Error(`OpenRouter Streaming API Error: ${m.error?.message||o.statusText}`)}const n=o.body.getReader(),c=new TextDecoder;let y="";for(;;){const{value:m,done:C}=await n.read();if(C)break;y+=c.decode(m,{stream:!0});const f=y.split(`\n`);y=f.pop();for(const g of f)if(g.startsWith("data: ")&&g.substring(6).trim()!=="[DONE]")try{yield JSON.parse(g.substring(6))}catch{console.error("Failed to parse stream chunk:",g)}}}const K={name:"openrouter",defaultModel:"anthropic/claude-3.5-sonnet",adaptMessages:v,adaptTools:e=>e.map(b),adaptResponse:_,callAPI:G,streamAPI:F,validateConfig:e=>{if(!e.openrouterApiKey)throw new Error("OpenRouter API key is required.");return!0}},z=async({config:e,model:t,messages:a,generationConfig:s,tools:r})=>{const{localAIEndpoint:l,localAIApiKey:i}=e,o={model:t,messages:a,...s,...r?.length>0&&{tools:r}},n=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",...i&&{Authorization:`Bearer ${i}`}},body:JSON.stringify(o)});if(!n.ok){const c=await n.json().catch(()=>({error:{message:"Failed to parse error."}}));throw new Error(`Local AI API Error: ${c.error?.message||n.statusText}`)}return n.json()};async function*L({config:e,model:t,messages:a,generationConfig:s,tools:r}){const{localAIEndpoint:l,localAIApiKey:i}=e,o={model:t,messages:a,...s,...r?.length>0&&{tools:r},stream:!0};console.log({localAIEndpoint:l});const n=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",...i&&{Authorization:`Bearer ${i}`}},body:JSON.stringify(o)});if(!n.ok){const C=await n.json().catch(()=>({error:{message:"Failed to parse error."}}));throw new Error(`Local AI Streaming Error: ${C.error?.message||n.statusText}`)}const c=n.body.getReader(),y=new TextDecoder;let m="";for(;;){const{value:C,done:f}=await c.read();if(f)break;m+=y.decode(C,{stream:!0});const g=m.split(`\n`);m=g.pop();for(const A of g)if(A.startsWith("data: ")&&A.substring(6).trim()!=="[DONE]")try{yield JSON.parse(A.substring(6))}catch{console.error("Failed to parse stream chunk:",A)}}}const q={name:"local",defaultModel:"local-model",adaptMessages:v,adaptTools:e=>e.map(b),adaptResponse:_,callAPI:z,streamAPI:L,validateConfig:e=>{if(!e.localAIEndpoint)throw new Error("Local AI provider requires \'localAIEndpoint\' in config.");return!0}},H={google:D,openrouter:K,local:q},W=e=>{const t=H[e];if(!t)throw new Error(`Provider \'${e}\' not found.`);return t};export default()=>({name:"chat",initialize(e){const t=e.plugin("history");if(!t)throw new Error("Chat plugin requires the History plugin.");const a=e.plugin("tools");if(!a)throw new Error("Chat plugin requires the Tools plugin for tool execution.");const s=async function*(l,i){const o=[...l],{enabledTools:n=[],provider:c="openrouter",model:y,...m}=i,C=Array.from(e.clients.keys()),f=W(c);f.validateConfig(e.config);const{tools:g}=await a.listTools({servers:C.filter(u=>n.some(p=>e.toolToAliasMap.get(p)===u))}),A=f.adaptTools(g.filter(u=>n.includes(u.name))),S=f.adaptMessages(o),k=y||f.defaultModel,N=f.streamAPI({config:e.config,apiKey:e.config[`${c}ApiKey`],model:k,messages:S,generationConfig:m,tools:A});let I="",O=null;const w={};if(c==="openrouter"||c==="local")for await(const u of N){const p=u.choices?.[0];if(!p)continue;const{delta:h}=p;if(h?.content&&(I+=h.content,yield{type:"content",content:I,isComplete:!1}),h?.tool_calls)for(const d of h.tool_calls){const{index:P}=d;w[P]||(w[P]={id:"",type:"function",function:{name:"",arguments:""}});const E=w[P];d.id&&(E.id=d.id),d.function?.name&&(E.function.name+=d.function.name),d.function?.arguments&&(E.function.arguments+=d.function.arguments)}p.finish_reason&&(O=p.finish_reason)}else if(c==="google"){for await(const u of N){const p=f.adaptResponse(u);p.content&&(I+=p.content,yield{type:"content",content:I,isComplete:!1}),p.toolCalls&&p.toolCalls.forEach((h,d)=>{w[d]={id:h.id,function:{name:h.name,arguments:JSON.stringify(h.arguments)}}})}O=Object.keys(w).length>0?"tool_calls":"stop"}const T=Object.values(w).map(u=>({id:u.id,name:u.function.name,arguments:JSON.parse(u.function.arguments||"{}")}));if(O==="tool_calls"&&T.length>0){yield{type:"tool_calls_start",toolCalls:T},o.push({role:"assistant",content:null,toolCalls:T});const u=[];for(const p of T){const h=p.name.replace(/__/g,"/");try{const d=await a.callTool(h,p.arguments);yield{type:"tool_result",name:h,result:d},u.push({role:"tool",toolCallId:p.id,result:d.result})}catch(d){yield{type:"tool_error",name:h,error:d.message},u.push({role:"tool",toolCallId:p.id,result:{error:d.message}})}}o.push(...u)}else yield{type:"content",content:I,isComplete:!0,toolCalls:T.length>0?T:void 0}},r=async(l,i)=>{const o=s(l,i);let n={};for await(const c of o)n=c;return{content:n.content,toolCalls:n.toolCalls}};this.api.chat=(l,i={})=>{const{stream:o,...n}=i,c=o?"llm:stream_chat":"llm:chat";return o?s(l,n):t.withHistory(c,{messages:l,options:i},()=>r(l,n))}},api:{}});\n',metaType:"application/javascript"},"/modules/ai/plugins/conversations.js":{content:'export default()=>({name:"conversation",initialize(a){const r=new Map,c=new Set,i=a.plugin("history");if(!i)throw new Error("Conversation plugin requires the History plugin.");const h=(t,n)=>{c.forEach(e=>{try{e({action:t,conversation:n,conversations:Object.fromEntries(r)})}catch(o){console.error("Error in conversation listener:",o)}})};this.api.onConversationChange=t=>(c.add(t),()=>c.delete(t)),this.api.createConversation=(t={})=>i.withHistory("conversation:create",{params:t},async()=>{const n=t.id||`conv_${Date.now()}`;if(r.has(n))throw new Error(`Conversation with id ${n} already exists.`);const e={id:n,title:t.title||"New Conversation",messages:t.messages||[],createdAt:new Date().toISOString(),...t};return r.set(n,e),h("create",e),e}),this.api.deleteConversation=t=>i.withHistory("conversation:delete",{id:t},async()=>{if(!r.has(t))throw new Error(`Conversation with id ${t} not found.`);return r.delete(t),h("delete",{id:t}),{success:!0,deletedId:t}}),this.api.getConversation=t=>r.get(t),this.api.listConversations=()=>Array.from(r.values()),this.api.addMessage=({conversationId:t,message:n})=>i.withHistory("conversation:addMessage",{conversationId:t},async()=>{const e=r.get(t);if(!e)throw new Error(`Conversation with id ${t} not found.`);e.messages.push(n);const s=await a.plugin("chat").chat(e.messages);return e.messages.push({role:"assistant",content:s.content}),r.set(t,e),h("update",e),e}),this.api.getConversationContext=(t,n=500)=>t.length<=2?null:i.withHistory("conversation:get_context",{messageCount:t.length},async()=>{const e=a.plugin("chat"),o=[{role:"system",content:`Provide a brief context summary of this conversation in ${n} characters or less. Focus on key topics, decisions, and current state.`},...t.slice(-10),{role:"user",content:"Summarize the key context from our conversation so far."}];try{return{summary:(await e.chat(o)).content,messageCount:t.length,generatedAt:new Date().toISOString()}}catch(s){return console.error("Failed to generate context summary:",s),null}}),this.api.summarizeConversation=(t,n=150)=>i.withHistory("conversation:summarize",{messageCount:t.length},async()=>{const e=a.plugin("chat"),o=[{role:"system",content:`Please provide a brief summary of this conversation in ${n} characters or less.`},...t,{role:"user",content:"Please summarize our conversation."}];return{summary:(await e.chat(o)).content||"",messageCount:t.length,generatedAt:new Date().toISOString()}}),this.api.trimConversation=(t,n=4e3)=>i.withHistory("conversation:trim",{messageCount:t.length,maxTokens:n},async()=>{let e=0;const o=[];t[0]?.role==="system"&&(o.push(t[0]),e+=Math.ceil(t[0].content.length/4));for(let s=t.length-1;s>=(t[0]?.role==="system"?1:0);s--){const u=t[s],l=Math.ceil((u.content||"").length/4);if(e+l>n&&o.length>(t[0]?.role==="system"?1:0))break;o.unshift(u),e+=l}return{messages:o,originalCount:t.length,trimmedCount:o.length,estimatedTokens:e}})},api:{}});\n',metaType:"application/javascript"},"/modules/apps/admin/index.js":{content:'export const dependencies={cms:"/modules/apps/cms/index.js",drive:"/modules/apps/drive/index.js",project:"/modules/apps/project/index.js",IDE:"/modules/apps/ide/index.js",chat:"/modules/apps/chat/index.js",editor:"/modules/apps/editor/index.js",Bundler:"/modules/apps/bundler/index.js",mcp:"/modules/apps/mcp/index.js"};export default({$APP:m,html:e})=>{m.addModule({name:"admin",path:"apps/admin/views"});const n={"/admin":{component:()=>e`<cms-ui directory="admin/cms"></cms-ui>`,title:"Admin",template:"admin-template"},"/admin/cms":{component:()=>e`<cms-ui directory="admin/cms"></cms-ui>`,title:"Data",template:"admin-template"},"/admin/ide":{component:()=>e`<ide-ui full directory="/projects" hasProject></ide-ui>`,title:"IDE",template:"admin-template"},"/admin/bundler":{component:()=>e`<bundler-ui></bundler-ui>`,title:"Bundler",template:"admin-template"},"/admin/project":{component:()=>e`<cms-crud\n							view="board"\n							class="p-8"\n							._data=${{model:"tasks"}} \n							.allowedActions=${["import","export","changeViewMode","changeColumns"]}></cms-crud>`,title:"Data",template:"admin-template"},"/admin/design":{component:()=>e`<design-ui></design-ui>`,title:"Design",template:"admin-template"},"/admin/design/:component":{component:({component:t})=>e`<design-ui component=${t}></design-ui>`,title:"Component Design",template:"admin-template"},"/admin/cms/:model":{component:({model:t})=>e`<cms-ui directory="admin/cms" model=${t}></cms-ui>`,title:"Admin",template:"admin-template"},"/admin/cms/:model/:id":{name:"cms_item",component:({model:t,id:i})=>e`<cms-ui directory="admin/cms" model=${t} selectedId=${i}></cms-ui>`,title:"Admin",template:"admin-template"},"/admin/mcp":{component:()=>e`<mcp-inspector></mcp-inspector>`,title:"MCP Inspector",template:"admin-template"},"/admin/mcp-dev":{component:()=>e`<mcp-dev></mcp-dev>`,title:"Chat",template:"admin-template"},"/admin/mcp-chat":{component:()=>e`<mcp-chat></mcp-chat>`,title:"Chat",template:"admin-template"},"/admin/chat":{component:()=>e`<app-chat class="flex-1 flex h-screen bg-gray-100 font-sans"></app-chat>`,title:"Data",template:"admin-template"}};m.routes.set(n)};\n',metaType:"application/javascript"},"/modules/apps/cms/index.js":{content:`export default({$APP:a})=>a.addModule({name:"cms",path:"apps/cms/views",settings:{appbar:{label:"Data",icon:"database"}}});
`,metaType:"application/javascript"},"/modules/apps/drive/index.js":{content:`export const migration=!0;export default({$APP:e})=>e.addModule({name:"drive",path:"apps/drive",backend:!0});
`,metaType:"application/javascript"},"/modules/apps/project/index.js":{content:'export const migration=!0;export default({$APP:c,Controller:o})=>{const r={"project:new-project":async({IDE:t})=>{const e=prompt("Enter the new project name:");if(e){const s=c.project.newProjectTemplate(e);await t.filesystem.createFiles(s),o.local.set("selectedProject",e)}},"project:open-project":async({IDE:t})=>{o.local.set("selectedProject",null),o.local.set("selectedProjectConfig",null)},"project:save-project":async({IDE:t})=>{const e=t.project.getCurrent();e&&await t.project.save(e)},"project:close-project":async()=>{confirm("Are you sure you want to close the project?")&&(o.local.set("selectedProject",null),o.local.set("selectedProjectConfig",null))},"project:delete-project":async({IDE:t})=>{const e=t.project.getCurrent();e&&confirm(`Delete project ${e.name}?`)&&await t.project.delete(e)}},n={"ctrl+n":"project:new-project","ctrl+o":"project:open-project","ctrl+shift+d":"project:delete-project"},p={"project:new-project":"New Project...","project:open-project":"Open Project...","project:close-project":"Close Project","project:delete-project":"Delete Project"};c.settings.add("globalKeybindings",n),c.settings.add("commands",r),c.settings.add("menu",p),c.addModule({name:"project",path:"apps/project",settings:{appbar:{label:"Management",icon:"folder"}}})};\n',metaType:"application/javascript"},"/modules/apps/ide/index.js":{content:'import"/modules/apps/ide/plugins/highlight.js";import"/modules/apps/ide/plugins/format.js";import"/modules/apps/ide/plugins/explorer.js";import"/modules/apps/ide/plugins/edit.js";import"/modules/apps/ide/plugins/markdown.js";import"/modules/apps/ide/plugins/keybindings.js";import"/modules/apps/ide/highlights/css.js";import"/modules/apps/ide/highlights/html.js";import"/modules/apps/ide/highlights/javascript.js";export const dependencies={FileSystemAdapter:"/modules/sw/adapter.js"};const _={css:"css",html:"html",js:"javascript",md:"markdown"},O=n=>_[n.split(".").at(-1)]||"javascript";export default({$APP:n,FileSystemAdapter:E,Controller:f})=>{const{ram:a,local:r}=f,K=()=>{const x=n.settings.IDE,l=new E,d=()=>window.$("editor-textarea"),h=()=>window.$("editor-explorer")?.q("editor-explorer"),F=()=>{const e=r.get("tabs"),t=r.get("activeTab");return e[t]},I=e=>{l.saveFile(e).then(()=>{const t=window.$("ide-preview");t&&t.reload()})},S=async e=>await n.SW.request("FS:LIST_FILES",{path:e}),v=async e=>await n.SW.request("FS:LIST_FILES",{path:e,system:!0}),C=async(e,t=!1)=>{const s=await n.SW.request("FS:READ_FILE",{path:e,system:t});s&&window.$("editor-tabs").addTab({name:e.split("/").at(-1),path:e,content:s.content,original:s.content,language:O(e),system:t})},m=(e,t={})=>{const s=n.settings.commands[e];if(s){const o=d(),i=h(),M=a.get("IDE"),y=window.$("editor-textarea"),W=y?.q("textarea"),b={settings:x,IDE:M,panel:o,editor:y,explorer:i,input:W,...t};n.hooks.emit(e,b),s(b)}else console.warn(`Command ${e} is not registered.`)},L=e=>n.settings.commands[e],k=e=>e.toLowerCase().split("+").sort().join("+"),D=e=>k((e.ctrlKey?"ctrl+":"")+(e.metaKey?"meta+":"")+(e.altKey?"alt+":"")+(e.shiftKey?"shift+":"")+e.key),g=(e="globalKeybindings")=>(t,s)=>{const o=D(t);n.settings?.[e][o]&&(t.preventDefault(),console.log(n.settings?.[e][o]),m(n.settings?.[e][o],s))},j=g("editorKeybindings"),p=g("globalKeybindings"),q=(e,t)=>{u(),e.addEventListener("keydown",s=>j(s,{...t,event:s}))},u=()=>{},T=()=>{w(),window.addEventListener("keydown",p)},w=()=>{window.removeEventListener("keydown",p)},z=()=>{const e={},t=n.settings.menu||{};return Object.keys(t).forEach(s=>{const o=t[s],[i]=s.split(":");e[i]||(e[i]={label:G(i),items:[]}),e[i].items.push([o,s])}),Object.values(e)},G=e=>e.charAt(0).toUpperCase()+e.slice(1);return{getActiveEditor:d,getActiveFile:F,openFile:C,saveFile:I,listFiles:S,listSystemFiles:v,filesystem:l,getCommand:L,executeCommand:m,attachKeybindings:q,attachGlobalKeybindings:T,detachKeybindings:u,detachGlobalKeybindings:w,getMenuItems:z}};n.addModule({name:"ide",alias:"IDE",backend:!0,path:"apps/ide/views",settings:{useTabs:!1,tabSize:2,autoClosing:!0,appbar:{label:"IDE - Code Editor",icon:"code"}}});const c=K();return a.set("IDE",c),c};\n',metaType:"application/javascript"},"/modules/apps/ide/plugins/highlight.js":{content:'import o from"/bootstrap.js";const l={name:"highlight",applyHighlighting({language:i,code:n}){const e=o.settings.highlights[i]||{regex:[]},t=this.tokenize(n,e.regex);return this.tokensToHTMLLines(t,i).map((h,p)=>`${h||""}\n`).join("")},tokenize(i,n){const e=[];let t=i;for(;t.length>0;){let s=!1;for(const[h,p]of n){const r=h.exec(t);if(r&&r.index===0){e.push({text:r[0],type:p}),t=t.slice(r[0].length),s=!0;break}}s||(e.push({text:t[0],type:"plain"}),t=t.slice(1))}return e},tokensToHTMLLines(i,n){const e=[];let t=[];for(const s of i)s.text.split(`\n`).forEach((p,r)=>{r>0&&(e.push(this.renderTokens(t,n)),t=[]),p.length>0&&t.push({text:p,type:s.type})});return e.push(this.renderTokens(t,n)),e},renderTokens(i,n){return i.map(e=>e.type==="WHITESPACE"?e.text.replace(/\\t/g,"&nbsp;&nbsp;").replace(/ /g,"&nbsp;"):e.type==="plain"?`<editor-tag ${n} plain>${this.escapeHTML(e.text)}</editor-tag>`:`<editor-tag ${n} ${e.type.toLowerCase()}>${this.escapeHTML(e.text)}</editor-tag>`).join("")},escapeHTML(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}};o.settings.add("commands",{"highlight:apply":l.applyHighlighting.bind(l)});\n',metaType:"application/javascript"},"/modules/apps/ide/plugins/format.js":{content:'import c from"/bootstrap.js";const o={handleKeydown({event:e,input:t,editor:n}){const{selectionStart:a,selectionEnd:r}=t,{key:i}=e;o.isCharacterKey(e)?o.isOpeningBrace(i)||o.isQuote(i)?(e.preventDefault(),o.handleAutoComplete({key:i,start:a,end:r,input:t,editor:n})):a!==r&&(e.preventDefault(),o.handleReplaceSelection({key:i,start:a,end:r,input:t,editor:n})):(i==="Backspace"||i==="Delete")&&o.handleDelete({key:i,start:a,end:r,input:t,editor:n,event:e})},handleAutoComplete({key:e,start:t,end:n,input:a,editor:r}){const i=o.getPair(e),s=`${e}${i}`;o.updateContent({input:a,start:t,end:n,newText:s,cursorPosition:t+1,editor:r})},handleReplaceSelection({key:e,start:t,end:n,input:a,editor:r}){o.updateContent({input:a,start:t,end:n,cursorPosition:t+1,newText:e,editor:r})},handleDelete({key:e,start:t,end:n,input:a,editor:r,event:i}){const s=a.value[t-1],l=a.value[t];o.isMatchingPair(s,l)?(i.preventDefault(),o.updateContent({input:a,start:t-1,end:n+1,cursorPosition:t-1,newText:"",editor:r})):o.isIndentationDeletion({key:e,start:t,input:a})&&(i.preventDefault(),o.updateContent({input:a,start:t-2,cursorPosition:t-2,end:n,newText:"",editor:r}))},updateContent({input:e,start:t,end:n,cursorPosition:a,newText:r,editor:i}){const s=e.value,l=s.slice(0,t)+r+s.slice(n);l!==s&&(i.updateContent(l),a&&setTimeout(()=>{e.selectionStart=a,e.selectionEnd=a},0))},trimTrailingLines(e){return e.replace(/\\s+$/g,`\n`).replace(/\\n{2,}$/,`\n`)},isOpeningBrace(e){return["{","(","["].includes(e)},isQuote(e){return[\'"\',"\'","`"].includes(e)},getPair(e){return{"{":"}","(":")","[":"]",\'"\':\'"\',"\'":"\'","`":"`"}[e]},isMatchingPair(e,t){return o.getPair(e)===t},isIndentationDeletion({key:e,start:t,input:n}){return e!=="Backspace"||t<2?!1:n.value.slice(t-2,t)==="  "},isCharacterKey(e){if(e.ctrlKey||e.altKey||e.metaKey)return!1;const t=e.key,n=e.code;return t.length===1?!0:n==="Enter"?!1:!(n.startsWith("Arrow")||n.startsWith("Home")||n.startsWith("End")||n.startsWith("Page")||["Tab","Escape","Backspace","Delete","Control","Alt","Shift","ContextMenu"].includes(t))}},d={"editor:auto-complete":({key:e,start:t,end:n,input:a,editor:r})=>{const i=o.getPair(e),s=`${e}${i}`;o.updateContent({input:a,start:t,end:n,newText:s,cursorPosition:t+1,editor:r})},"editor:replace-selection":e=>{o.handleReplaceSelection(e)},"editor:delete-pair":e=>{o.handleDelete(e)},"editor:trim-trailing-lines":e=>{o.trimTrailingLines(e)}};c.hooks.on("onEditorInit",({editor:e,input:t})=>{t.addEventListener("keydown",n=>o.handleKeydown({event:n,input:t,editor:e}))}),c.hooks.on("onFileOpen",({editor:e,settings:t,file:n})=>{let a;if(!t.useTabs){const r=t.tabSize||2,i=" ".repeat(r);a=n.content.replace(/\\t/g,i)}a=o.trimTrailingLines(a),e.updateContent(a)}),c.settings.add("commands",d);\n',metaType:"application/javascript"},"/modules/apps/ide/plugins/explorer.js":{content:'import n from"/bootstrap.js";const s={"file:new-file":async({IDE:e,explorer:l,directory:t="/"})=>{setTimeout(async()=>{const o=prompt("What\'s the file name?");if(o){const i=await e.filesystem.createFile({name:o,directory:t,content:""});i&&l.selectItem(i)}},16)},"file:new-folder":async({IDE:e,directory:l="/"})=>{setTimeout(async()=>{const t=prompt("What\'s the folder name?");t&&await e.filesystem.createFolder({name:t,directory:l})},16)},"file:new-window":()=>{console.log("New Window command executed");const e=window.location.href;window.open(e,"_blank")},"file:open-file":async({IDE:e})=>{const l=await e.filesystem.openFile();l&&e.openFile(l)},"file:open-folder":async({IDE:e})=>{await e.filesystem.openFolder()},"file:save":async({IDE:e})=>{const l=e.getActiveFile();console.log({file:l}),l&&await e.saveFile(l)},"file:save-as":async({IDE:e,name:l,directory:t,path:o})=>{const i=e.getActiveFile();await e.saveFile({name:l,directory:t,path:o,content:i.content})},"file:delete-file":async({IDE:e,explorer:l})=>{const t=l.selectedFiles;for(const o of t)o.isDirectory||await e.deleteFile(o)},"file:delete-folder":async({IDE:e})=>{const l=await e.filesystem.getSelectedItems();for(const t of l)t.isDirectory&&await e.deleteFolder(t.path)},"file:rename":async({IDE:e})=>{const l=await e.filesystem.getSelectedItems();for(const t of l){const o=prompt(`Rename ${t.name} to:`,t.name);if(o&&o!==t.name){const i=t.path.replace(t.name,o);await e.filesystem.editName(t.path,i)}}},"file:move":async({IDE:e})=>{const l=await e.filesystem.getSelectedItems(),t=prompt("Enter new directory path:");if(t)for(const o of l){const i=`${t}/${o.name}`;await e.filesystem.moveFileOrFolder(o.path,i)}},"file:close-editor":({editor:e})=>{console.log("Close Editor command executed"),e&&(e.clearContent(),e.currentFileHandle=null,e.file=null)},"file:close-folder":({IDE:e})=>{console.log("Close Folder command executed"),n.settings["editor:filesystem"]=!1,e.setFiles([])},"file:close-window":()=>{console.log("Close Window command executed"),confirm("Are you sure you want to close this window?")&&window.close()},"file:exit":()=>{console.log("Exit command executed"),confirm("Are you sure you want to exit the IDE?")&&window.close()}},a={"file:new-file":"New File...","file:new-folder":"New Folder...","file:new-window":"New Window","file:open-file":"Open File...","file:open-folder":"Open Folder...","file:save":"Save","file:save-as":"Save As...","file:delete-file":"Delete File","file:delete-folder":"Delete Folder","file:rename":"Rename","file:move":"Move","file:close-editor":"Close Editor","file:close-folder":"Close Folder","file:close-window":"Close Window","file:exit":"Exit"};n.settings.add("commands",s),n.settings.add("menu",a);\n',metaType:"application/javascript"},"/modules/apps/ide/plugins/edit.js":{content:'import m from"/bootstrap.js";const p={"selection:select-all"({input:n}){n.setSelectionRange(0,n.value.length)},"selection:expand-selection"({input:n}){const{selectionStart:c,selectionEnd:l,value:t}=n;let e=c,i=l;e>0&&e--,i<t.length&&i++,n.setSelectionRange(e,i)},"selection:shrink-selection"({input:n}){const{selectionStart:c,selectionEnd:l}=n;let t=c,e=l;t<e&&t++,e>t&&e--,n.setSelectionRange(t,e)},"selection:copy-line-up"({input:n,editor:c}){const{selectionStart:l,selectionEnd:t,value:e}=n,i=e.lastIndexOf(`\n`,l-1)+1,o=e.indexOf(`\n`,t)===-1?e.length:e.indexOf(`\n`,t),s=e.slice(i,o),d=`${e.slice(0,i)}${s}\n${e.slice(i)}`;c.updateContent(d),n.setSelectionRange(l+s.length+1,t+s.length+1)},"selection:copy-line-down"({input:n,editor:c}){const{selectionStart:l,selectionEnd:t,value:e}=n,i=e.lastIndexOf(`\n`,l-1)+1,o=e.indexOf(`\n`,t)===-1?e.length:e.indexOf(`\n`,t),s=e.slice(i,o),d=`${e.slice(0,o)}\n${s}${e.slice(o)}`;c.updateContent(d),n.setSelectionRange(l+s.length+1,t+s.length+1)},"selection:move-line-up"({input:n,editor:c}){const{selectionStart:l,selectionEnd:t,value:e}=n,i=e.lastIndexOf(`\n`,l-1)+1,o=e.indexOf(`\n`,t)===-1?e.length:e.indexOf(`\n`,t),s=i-1,d=e.lastIndexOf(`\n`,s-1)+1;if(d>=0&&s>=0){const a=e.slice(i,o),g=e.slice(d,s),f=`${e.slice(0,d)}${a}\n${g}${e.slice(o)}`;c.updateContent(f);const r=a.length+1;n.setSelectionRange(l-r,t-r)}},"selection:move-line-down"({input:n,editor:c}){const{selectionStart:l,selectionEnd:t,value:e}=n,i=e.lastIndexOf(`\n`,l-1)+1,o=e.indexOf(`\n`,t)===-1?e.length:e.indexOf(`\n`,t),s=o+1,d=e.indexOf(`\n`,s)===-1?e.length:e.indexOf(`\n`,s);if(s<e.length){const a=e.slice(i,o),g=e.slice(s,d),f=`${e.slice(0,i)}${g}\n${a}${e.slice(d)}`;c.updateContent(f);const r=g.length+1;n.setSelectionRange(l+r,t+r)}},"selection:duplicate-selection"({input:n,editor:c}){const{selectionStart:l,selectionEnd:t,value:e}=n,i=e.slice(l,t),o=e.slice(0,t)+i+e.slice(t);c.updateContent(o),n.setSelectionRange(l,t+i.length)},"edit:undo"(){document.execCommand("undo")},"edit:redo"(){document.execCommand("redo")},"edit:cut"(){document.execCommand("cut")},"edit:copy"(){document.execCommand("copy")},"edit:paste"(){document.execCommand("paste")},"edit:find"(){},"edit:replace"(){},"edit:find-in-files"(){},"edit:replace-in-files"(){},"edit:toggle-line-comment"({input:n,editor:c}){const{value:l}=n,t=n.selectionStart,e=n.selectionEnd,o=l.slice(t,e).split(`\n`),s=o.every(a=>a.trim().startsWith("//")),d=o.map(a=>s?a.replace(/^(\\s*)\\/\\/\\s?/,"$1"):`// ${a}`).join(`\n`);c.updateContent(l.slice(0,t)+d+l.slice(e)),n.setSelectionRange(t,t+d.length)},"edit:toggle-block-comment"({input:n,editor:c}){const{value:l}=n,t=n.selectionStart,e=n.selectionEnd,i=l.slice(t,e);if(i.startsWith("/*")&&i.endsWith("*/")){const o=i.slice(2,-2).trim();c.updateContent(l.slice(0,t)+o+l.slice(e)),n.setSelectionRange(t,t+o.length)}else{const o=`/* ${i} */`;c.updateContent(l.slice(0,t)+o+l.slice(e)),n.setSelectionRange(t,t+o.length)}}},u={"ctrl+z":"edit:undo","ctrl+y":"edit:redo","ctrl+x":"edit:cut","ctrl+c":"edit:copy","ctrl+h":"edit:replace","ctrl+shift+f":"edit:find-in-files","ctrl+shift+h":"edit:replace-in-files","ctrl+/":"edit:toggle-line-comment","ctrl+shift+/":"edit:toggle-block-comment"},x={"edit:undo":"Undo","edit:redo":"Redo","edit:cut":"Cut","edit:copy":"Copy","edit:paste":"Paste","edit:find":"Find","edit:replace":"Replace","edit:find-in-files":"Find in Files","edit:replace-in-files":"Replace in Files","edit:toggle-line-comment":"Toggle Line Comment","edit:toggle-block-comment":"Toggle Block Comment","selection:select-all":"Select All","selection:expand-selection":"Expand Selection","selection:shrink-selection":"Shrink Selection","selection:copy-line-up":"Copy Line Up","selection:copy-line-down":"Copy Line Down","selection:move-line-up":"Move Line Up","selection:move-line-down":"Move Line Down","selection:duplicate-selection":"Duplicate Selection"};m.hooks.on("onEditorInit",({input:n,editor:c})=>{n.addEventListener("input",l=>{const t=l.target.value||l.target.textContent;c.content=t})}),m.settings.add("globalKeybindings",u),m.settings.add("commands",p),m.settings.add("menu",x);\n',metaType:"application/javascript"},"/modules/apps/ide/plugins/markdown.js":{content:'import g from"/bootstrap.js";import d from"/modules/mvc/view/html/index.js";import u from"/modules/types/index.js";function f(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#39;"};return e.replace(/[&<>"\']/g,n=>t[n])}const T=[{name:"code",regex:/^```\\n?([\\s\\S]*?)\\n```$/gm,replace:(e,t)=>`\n%%CODEBLOCK%%\n${f(t)}\n%%CODEBLOCK%%\n`},{name:"headings",regex:/^(#{1,6})\\s+(.+)$/gm,replace:(e,t,n)=>`<h${t.length}>${n}</h${t.length}>`}],O=[{name:"image",regex:/!\\[([^\\]]+)\\]\\(([^)]+)\\)/g,replace:(e,t,n)=>`<img src="${n}" alt="${t}" />`},{name:"bold",regex:/\\*\\*(.+?)\\*\\*/g,replace:(e,t)=>`<strong>${t}</strong>`},{name:"italic",regex:/\\*(.+?)\\*/g,replace:(e,t)=>`<em>${t}</em>`},{name:"link",regex:/\\[([^\\]]+)\\]\\(([^)]+)\\)/g,replace:(e,t,n)=>`<a href="${n}">${t}</a>`}];function _(e){const t=/^---\\s*\\n([\\s\\S]*?)\\n---\\s*\\n?/,n=e.match(t);return n?{frontMatter:n[1].split(`\n`).reduce((r,l)=>{const[a,...c]=l.split(":");return c.length===0?r:{...r,[a.trim()]:c.join(":").trim()}},{}),markdown:e.replace(t,"")}:{frontMatter:{},markdown:e}}function C(e){const{frontMatter:t,markdown:n}=_(e);return{frontMatter:t,markdown:w(n)}}const M={name:"Markdown",regex:[[/^\\[ \\]/,"TASK_PENDING"],[/^---$/,"FRONT_MATTER_TAG"],[/^---\\s*\\n([\\s\\S]*?)\\n---\\s*\\n/,"FRONT_MATTER_BLOCK"],[/^\\s*([\\w-]+):\\s*(.*)/,"FRONT_MATTER_PROP"],[/^\\[x\\]/i,"TASK_DONE"],[/^\\[-\\]/,"TASK_WONT_FIX"],[/^(#{1,6})\\s+(.+)$/,"HEADER"],[/^>\\s+(.+)$/,"BLOCKQUOTE"],[/^(\\s*[-+*]|\\d+\\.)\\s+/,"LIST"],[/\\*\\*([^*]+)\\*\\*/,"BOLD"],[/\\*([^*]+)\\*/,"ITALIC"],[/__([^_]+)__/,"BOLD"],[/_([^_]+)_/,"ITALIC"],[/~~([^~]+)~~/,"STRIKETHROUGH"],[/`([^`]+)`/,"INLINE_CODE"],[/^```([\\s\\S]+?)```/,"CODE_BLOCK"],[/^\\s{4}(.+)/,"CODE_BLOCK"],[/\\[(.+?)\\]\\((https?:\\/\\/[^\\s]+)\\)/,"LINK"],[/!\\[(.+?)\\]\\((https?:\\/\\/[^\\s]+)\\)/,"IMAGE"],[/<[^>]+>/,"HTML_TAG"],[/\\\\([`*_{}[\\]()#+\\-.!>])/,"ESCAPE"]]},E={properties:{content:u.string(),frontMatter:u.object({defaultValue:{}})},render(){const{frontMatter:e,markdown:t}=C(this.content);return this.frontMatter=e,d`${e?d`\n          <div class="front-matter">\n            <h3>Metadata</h3>\n            <table>\n              ${Object.entries(e).map(([n,s])=>d`\n                  <tr>\n                    <th>${n}</th>\n                    <td>${s}</td>\n                  </tr>\n                `)}\n            </table>\n          </div>\n          <uix-divider padding="0-md"></uix-divider>\n        `:null}\n      ${d.unsafeHTML(t)}`}},B=e=>{const t=Array.from(e.matchAll(/^```\\n?([\\s\\S]*?)\\n```$/gm)),n=t.map(r=>f(r[1]));return{content:t.reduce((r,l,a)=>r.replace(l[0],`\n%%CODEBLOCK_${a}%%\n`),e),codeBlocks:n}},$=(e,t)=>t.reduce((n,{regex:s,replace:r})=>n.replace(s,(...l)=>r(...l)),e);function w(e){const{content:t,codeBlocks:n}=B(e),s=$(t,T),r=A(s);return $(r,O).replace(/%%CODEBLOCK_(\\d+)%%/g,(i,m)=>`<pre><code>${n[m]}</code></pre>`).split(`\n`).map(i=>i.trim()&&!i.startsWith("<")?`<p>${i}</p>`:i).join(`\n`).replace(/\\n{2,}/g,i=>"<br/>".repeat(i.length-1))}function A(e){const{lines:t,currentList:n}=e.split(`\n`).reduce((s,r)=>/^\\s*([*\\-+]|\\d+\\.)\\s+/.test(r)?{...s,currentList:[...s.currentList,r]}:{lines:s.currentList.length?[...s.lines,k(s.currentList),r]:[...s.lines,r],currentList:[]},{lines:[],currentList:[]});return n.length?[...t,k(n)].join(`\n`):t.join(`\n`)}function k(e){const{html:t,stack:n}=e.reduce((r,l)=>{const a=l.match(/^(\\s*)([*\\-+]|\\d+\\.)\\s+(.*)/);if(!a)return r;const c=a[1].length,i=a[2],m=a[3],h=/^\\d+\\.$/.test(i)?"ol":"ul";let{html:p,stack:o}=r;for(;o.length&&c<o[o.length-1].indent;){const{type:L}=o.pop();p+=`</li></${L}>`}return o.length&&c===o[o.length-1].indent?o[o.length-1].type!==h?(o.pop(),p+=`</li></${h==="ol"?"ul":"ol"}>`,p+=`<${h}>`,o.push({indent:c,type:h})):p+="</li>":(!o.length||c>o[o.length-1].indent)&&(p+=`<${h}>`,o.push({indent:c,type:h})),p+=`<li>${m}`,{html:p,stack:o}},{html:"",stack:[]}),s=n.reduce((r,{type:l})=>`${r}</li></${l}>`,"");return t+s}function R(e){return e.split(`\n`).reduce((t,n)=>{const s=n.match(/^(#{1,6})\\s+(.+)$/);if(s){const r=s[1].length,l=s[2],a={level:r,title:l,children:[]};for(;t.stack.length&&t.stack[t.stack.length-1].level>=r;)t.stack.pop();t.stack.length?t.stack[t.stack.length-1].children.push(a):t.tree.push(a),t.stack.push(a)}return t},{tree:[],stack:[]}).tree}g.settings.add("highlights",{markdown:M}),g.define({"markdown-viewer":E});\n',metaType:"application/javascript"},"/modules/apps/ide/plugins/keybindings.js":{content:'import c from"/bootstrap.js";const a={name:"Keybindings",deleteChar({editor:e,input:o}){const l=o.selectionStart,n=o.selectionEnd;if(l===n){const t=e.getValue();if(l<t.length){const s=t.slice(0,l)+t.slice(l+1);e.updateContent(s),e.setCursorPosition(l)}}else{const t=e.getValue(),s=t.slice(0,l)+t.slice(n);e.updateContent(s),e.setCursorPosition(l)}},tabIndent({editor:e,input:o,settings:l}){const n=a.indentOrOutdentSelection({input:o,settings:l},!1);a.applyIndentationChange({editor:e,input:o},n)},outdentSelection({editor:e,input:o,settings:l}){const n=a.indentOrOutdentSelection({input:o,settings:l},!0);a.applyIndentationChange({editor:e,input:o},n)},applyIndentationChange({editor:e},{newContent:o,replaceStart:l,replaceEnd:n,newSelStart:t,newSelEnd:s}){const i=e.getValue(),r=i.slice(0,l)+o+i.slice(n);e.updateContent(r),setTimeout(()=>{e.setCursorPosition(t,s)},50)},indentOrOutdentSelection({input:e,settings:o},l=!1){const n=e.value,t=e.selectionStart,s=e.selectionEnd,i=o.useTabs?"	":" ".repeat(o.tabSize),r=n.lastIndexOf(`\n`,t-1)+1,g=n.indexOf(`\n`,s)===-1?n.length:n.indexOf(`\n`,s),u=n.slice(r,g).split(`\n`),p=u.map(d=>l?d.startsWith(i)?d.slice(i.length):d.startsWith("	")?d.slice(1):d:i+d),v=p.join(`\n`),w=p[0].length-u[0].length,h=t+(t>r?w:0),m=s+v.length-(g-r);return{newContent:v,replaceStart:r,replaceEnd:g,newSelStart:t===s?m:h,newSelEnd:m}},moveWordLeft({editor:e,input:o,event:l}){l.preventDefault();const n=e.getValue();let t=o.selectionStart;for(;t>0&&/\\s/.test(n[t-1]);)t--;for(;t>0&&/\\S/.test(n[t-1]);)t--;e.setCursorPosition(t)},moveWordRight({editor:e,input:o,event:l}){l.preventDefault();const n=e.getValue();let t=o.selectionEnd;for(;t<n.length&&/\\s/.test(n[t]);)t++;for(;t<n.length&&/\\S/.test(n[t]);)t++;e.setCursorPosition(t)},moveToLineStart({editor:e,input:o,event:l}){l.preventDefault();const n=e.getValue();let s=o.selectionStart;for(;s>0&&n[s-1]!==`\n`;)s--;e.setCursorPosition(s)},moveToLineEnd({editor:e,input:o,event:l}){l.preventDefault();const n=e.getValue();let s=o.selectionEnd;for(;s<n.length&&n[s]!==`\n`;)s++;e.setCursorPosition(s)},moveToTextStart({editor:e,event:o}){o.preventDefault(),e.setCursorPosition(0)},moveToTextEnd({editor:e,event:o}){o.preventDefault(),e.setCursorPosition(e.getValue().length)},handleEnter({editor:e,input:o}){const l=o.selectionStart,n=o.selectionEnd,t=e.getValue();let s=l;for(;s>0&&t[s-1]!==`\n`;)s--;let i="";for(;t[s]===" "||t[s]==="	";)i+=t[s++];if(l===n){const r=`\n${i}`;e.insertTextAtRange(r,l,n)}else e.insertTextAtRange(`\n${i}`,l,n)},handleEscape({editor:e,input:o}){o.blur(),e.focus()},openFile({event:e}){e.preventDefault(),console.log("Opening file dialog...")},newWindow({event:e}){e.preventDefault(),console.log("Opening a new window...")},openCommandPalette({event:e,IDE:o}){e.preventDefault(),console.log("Opening command palette...")},openSettings({event:e}){e.preventDefault(),console.log("Opening settings...")},addExtension({event:e}){e.preventDefault(),console.log("Opening extension manager...")},toggleSidebar({event:e}){e.preventDefault(),console.log("Toggling sidebar visibility...")}},f={"ctrl+d":"editor:delete-char",tab:"editor:tab-indent","shift+tab":"editor:outdent-selection","ctrl+w":"editor:quit",enter:"editor:insert-newline",escape:"editor:escape","alt+arrowleft":"editor:move-word-left","alt+arrowright":"editor:move-word-right","alt+arrowup":"editor:move-line-start","alt+arrowdown":"editor:move-line-end","ctrl+arrowup":"editor:move-text-start","ctrl+arrowdown":"editor:move-text-end"},b={"ctrl+p":"global:open-file","ctrl+n":"global:new-window","ctrl+shift+p":"global:open-command-palette",",+ctrl":"global:open-settings","ctrl+shift+x":"global:add-extension","ctrl+b":"global:toggle-sidebar","ctrl+s":"file:save"},S={"editor:delete-char":a.deleteChar,"editor:tab-indent":a.tabIndent,"editor:outdent-selection":a.outdentSelection,"editor:insert-newline":a.handleEnter,"editor:move-word-left":a.moveWordLeft,"editor:move-word-right":a.moveWordRight,"editor:move-line-start":a.moveToLineStart,"editor:move-line-end":a.moveToLineEnd,"editor:move-text-start":a.moveToTextStart,"editor:move-text-end":a.moveToTextEnd,"editor:escape":a.handleEscape,"global:open-file":a.openFile,"global:new-window":a.newWindow,"global:open-command-palette":a.openCommandPalette,"global:open-settings":a.openSettings,"global:add-extension":a.addExtension,"global:toggle-sidebar":a.toggleSidebar};c.settings.add("commands",S),c.settings.add("globalKeybindings",b),c.settings.add("editorKeybindings",f),c.hooks.on("onEditorInit",({editor:e,explorer:o,panel:l,input:n,IDE:t,settings:s})=>{t.attachKeybindings(n,{input:n,editor:e,panel:l,explorer:o,IDE:t,settings:s})});\n',metaType:"application/javascript"},"/modules/apps/ide/highlights/css.js":{content:`import s from"/bootstrap.js";const A={name:"css",regex:[[/^\\s+/,"WHITESPACE"],[/^\\/\\*[\\s\\S]*?\\*\\//,"COMMENT"],[/^#[a-fA-F0-9]{3,6}/,"COLOR_HEX"],[/^\\.[a-zA-Z_][\\w-]*/,"CLASS_NAME"],[/^\\b[a-zA-Z-]+\\b(?=\\s*:\\s*)/,"PROPERTY_NAME"],[/^:[a-zA-Z_][\\w-]*/,"PSEUDO_CLASS"],[/^[{}()[\\];,:]/,"PUNCTUATOR"]]};s.settings.add("highlights",{css:A});
`,metaType:"application/javascript"},"/modules/apps/ide/highlights/html.js":{content:`import T from"/bootstrap.js";const A={name:"html",regex:[[/^\\s+/,"WHITESPACE"],[/^<!--[\\s\\S]*?-->/,"COMMENT"],[/^<!DOCTYPE[^>]+>/i,"DOCTYPE"],[/^<[/]?[a-z][a-z0-9]*[^>]*>/i,"TAG"],[/^"([^"\\\\]|\\\\.)*"/,"ATTRIBUTE_VALUE"],[/^\\b[a-zA-Z-:]+\\b(?=\\s*=)/,"ATTRIBUTE_NAME"],[/^&[a-zA-Z0-9#]+;/,"ENTITY"],[/^[{}()[\\];,:]/,"PUNCTUATOR"]]};T.settings.add("highlights",{html:A});
`,metaType:"application/javascript"},"/modules/apps/ide/highlights/javascript.js":{content:`import t from"/bootstrap.js";const e={name:"highlight-javascript",regex:[[/^\\t+/,"WHITESPACE"],[/^\\s+/,"WHITESPACE"],[/^\\/\\/.*$/,"COMMENT"],[/^\\/\\*[\\s\\S]*?\\*\\//,"COMMENT"],[/^"([^"\\\\]|\\\\.)*"/,"STRING"],[/^'([^'\\\\]|\\\\.)*'/,"STRING"],[/^\\b(import|export|from)\\b/,"importExport"],[/^\\b(abstract|arguments|await|boolean|break|byte|case|catch|char|class|const|continue|debugger|default|delete|do|double|else|enum|export|extends|false|final|finally|float|for|function|goto|if|implements|import|in|instanceof|int|interface|let|long|native|new|null|package|private|protected|public|return|short|static|super|switch|synchronized|this|throw|throws|transient|true|try|typeof|var|void|volatile|while|with|yield|from|as|of)\\b/,"KEYWORD"],[/^\\b([A-Z][a-zA-Z0-9_$]*)\\b/,"type"],[/^\\b([a-zA-Z_$][a-zA-Z0-9_$]*)\\b(?=\\()/,"FUNCTION"],[/^\\b([a-zA-Z_$][a-zA-Z0-9_$]*)\\b(?=\\.)/,"OBJECT"],[/^\\.(\\w+)/,"PROPERTY"],[/^\\b([a-zA-Z_$][a-zA-Z0-9_$]*)\\b/,"IDENTIFIER"],[/^[0-9]+/,"NUMBER"],[/^[{}()[\\];,:]/,"PUNCTUATOR"],[/^[=!+-/*<>]+/,"OPERATOR"]]};t.settings.add("highlights",{javascript:e});
`,metaType:"application/javascript"},"/modules/sw/adapter.js":{content:'export default({$APP:n})=>{class a{async namespaceExists({namespace:r}){try{return(await this.listDirectory({namespace:r})).length>0}catch(e){return console.error("Error checking namespace existence:",e),!1}}async createFiles({namespace:r,files:e,system:t}){return n.SW.request("FS:WRITE_FILES",{namespace:r,files:e,system:t})}async createFile({namespace:r,path:e,content:t=""}){return this.writeFile({namespace:r,path:e,content:t})}async saveFile({namespace:r,path:e,content:t,system:s}){return this.writeFile({namespace:r,path:e,content:t,system:s})}async writeFile({namespace:r,path:e,system:t,content:s=""}){return console.trace(),n.SW.request("FS:WRITE_FILE",{namespace:r,path:e,content:s,system:t})}async readFile({namespace:r,path:e,system:t}){const{content:s}=await n.SW.request("FS:READ_FILE",{namespace:r,path:e,system:t});return s}async deleteFile({namespace:r,path:e}){return n.SW.request("FS:DELETE_FILE",{namespace:r,path:e})}async createFolder({namespace:r,path:e}){const s=`${e.endsWith("/")?e:`${e}/`}.dir-placeholder`;return this.writeFile({namespace:r,path:s,content:""})}async deleteDirectory({namespace:r,path:e}){return n.SW.request("FS:DELETE_DIRECTORY",{namespace:r,path:e})}async listDirectory({namespace:r,path:e="/",recursive:t=!0}){const{files:s}=await n.SW.request("FS:LIST_FILES",{namespace:r,path:e,recursive:t});return s}async deleteNamespace({namespace:r}){return n.SW.request("FS:DELETE_NAMESPACE",{namespace:r})}}return a};\n',metaType:"application/javascript"},"/modules/apps/chat/index.js":{content:`export const migration=!0;export default({$APP:n,T:i,AI:c,Model:r,html:s})=>{n.events.on("INIT_APP",async()=>{n.define("app-chat-message",{properties:{message:i.object()},render(){if(!this.message)return s\`\`;const{role:e,content:t,toolCalls:o}=this.message,a=e==="user";return o?s\`
                    <div class="text-xs text-gray-400 italic text-center my-2">
                        <uix-icon name="cog" class="animate-spin"></uix-icon>
                        Using tool: <strong>\${o[0].name}</strong>
                    </div>\`:s\`
                <div class="flex \${a?"justify-end":"justify-start"}">
                    <div class="flex items-end gap-2 max-w-lg">
                        \${a?"":s\`<uix-avatar class="is-sm bg-gray-700 text-white" icon="bot"></uix-avatar>\`}
                        <div class="p-3 rounded-lg \${a?"bg-blue-600 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"}">
                            <p>\${t}</p>
                        </div>
                    </div>
                </div>
            \`}}),n.define("app-chat-input",{properties:{conversation:i.object(),messages:i.array(),isThinking:i.boolean(!1),newMessage:i.string("")},async sendMessage(){if(!this.newMessage?.trim()||!this.conversation)return;const e=this.newMessage;this.newMessage="",this.isThinking=!0;try{await r.messages.add({conversationId:this.conversation.id,role:"user",content:e});const t=this.messages.map(a=>({role:a.role,content:a.content,toolCalls:a.toolCalls}));t.push({role:"user",content:e});const o=await c.chat(t);await r.messages.add({conversationId:this.conversation.id,...o})}catch(t){console.error("Chat AI error:",t),await r.messages.add({conversationId:this.conversation.id,role:"assistant",content:\`Sorry, an error occurred: \${t.message}\`})}finally{this.isThinking=!1}},render(){return s\`
                <footer class="p-2 border-t bg-white">
                    <uix-form .submit=\${this.sendMessage.bind(this)}>
                        <uix-join>
                            <uix-input
                                .bind=\${this.prop("newMessage")}
                                placeholder="Type a message..."
                                class="w-full"
                                ?disabled=\${this.isThinking}
                            ></uix-input>
                            <uix-button type="submit" icon="send" ?disabled=\${!this.newMessage?.trim()||this.isThinking}>
                                \${this.isThinking?"Thinking...":"Send"}
                            </uix-button>
                        </uix-join>
                    </uix-form>
                </footer>
            \`}}),n.define("app-chat-window",{extends:"uix-list",properties:{conversationId:i.string()},get conversation(){return!this._rows||!this.conversationId?null:this._rows.find(e=>e.id===this.conversationId)},render(){if(!this.conversationId)return s\`
                    <div class="flex-1 flex flex-col items-center justify-center bg-gray-50 text-gray-500 text-center p-8">
                        <uix-icon name="message-circle" class="text-5xl mb-4"></uix-icon>
                        <h2 class="text-2xl font-bold">Select a conversation</h2>
                        <p>Choose a conversation from the sidebar to start chatting.</p>
                    </div>
                \`;if(!this.conversation)return s\`<div class="flex-1 flex items-center justify-center"><uix-spinner></uix-spinner></div>\`;const e=this.conversation.type==="channel"?"hash":"at-sign";return s\`
                <div class="flex-1 flex flex-col bg-white">
                    <header class="p-4 border-b flex items-center gap-3">
                        <uix-icon name=\${e} class="text-gray-500"></uix-icon>
                        <h3 class="font-bold text-lg">\${this.conversation.name}</h3>
                    </header>

                    <app-messages-list
                        ._data=\${{model:"messages",where:{conversationId:this.conversationId},sort:"createdAt"}}
                        class="flex-1 p-4 overflow-y-auto flex flex-col gap-4"
                    ></app-messages-list>
                    
                    <app-chat-input 
                        .conversation=\${this.conversation}
                        ._data=\${{model:"messages",where:{conversationId:this.conversationId},sort:"createdAt"}}
                    ></app-chat-input>
                </div>
            \`}}),n.define("app-messages-list",{extends:"uix-list",render(){return this._rows?(this.scrollTop=this.scrollHeight,this._rows.map(e=>s\`<app-chat-message .message=\${e}></app-chat-message>\`)):s\`<div class="flex-1 flex items-center justify-center"><uix-spinner></uix-spinner></div>\`}}),n.define("app-chat-sidebar",{extends:"uix-list",properties:{selectedConversationId:i.string({sync:"querystring"}),newConversationName:i.string(),newConversationType:i.string("channel")},async createConversation(){if(this.newConversationName?.trim())try{await r.conversations.add({name:this.newConversationName,type:this.newConversationType}),this.newConversationName="";const e=this.querySelector("#new-conversation-modal");e&&e.hide()}catch(e){console.error("Failed to create conversation:",e),alert(\`Error: \${e.message}\`)}},selectConversation(e){console.log({id:e}),this.selectedConversationId=e},render(){if(!this._rows)return s\`<div class="p-4"><uix-spinner></uix-spinner></div>\`;const e=[...this._rows];return s\`
                <div class="w-full px-2">
                    <div class="flex justify-between items-center p-2">
                        <h4 class="text-sm font-bold uppercase text-gray-400">Conversations</h4>
                        <uix-modal id="new-conversation-modal">
                            <uix-button size="is-sm" shape="circle" icon="plus"></uix-button>
                            <dialog class="p-4 flex flex-col gap-4 rounded-lg shadow-xl w-80">
                                <h3 class="text-lg font-bold">New Conversation</h3>
                                <uix-form .submit=\${this.createConversation.bind(this)}>
                                    <uix-input
                                        label="Name"
                                        placeholder="e.g. general-questions"
                                        .bind=\${this.prop("newConversationName")}
                                    ></uix-input>
                                    <uix-input type="select" .options=\${["channel","dm"]} .bind=\${this.prop("newConversationType")} label="Type" class="mt-2">                                        
                                    </uix-input>
                                    <uix-list class="flex justify-end gap-2 pt-4">
                                        <uix-button type="submit" label="Create" class="is-primary"></uix-button>
                                    </uix-list>
                                </uix-form>
                            </dialog>
                        </uix-modal>
                    </div>
                    <uix-list class="flex flex-col gap-1">
                        \${e.map(t=>{const o=t.type==="channel"?"hash":"at-sign";return console.log({conv:t}),s\`
                                <a @click=\${()=>this.selectConversation(t.id)} class="flex items-center gap-2 p-2 rounded-md cursor-pointer hover:bg-gray-700 \${this.selectedConversationId===t.id?"bg-gray-900":""}">
                                    <uix-icon name=\${o} class="text-gray-500"></uix-icon>
                                    <span>\${t.parent.name}</span>
                                </a>
                            \`})}
                    </uix-list>
                </div>
            \`}}),n.define("app-chat",{properties:{selectedConversationId:i.string({sync:"querystring"})},render(){return s\`<aside class="w-64 bg-gray-800 text-gray-200 flex flex-col">
											<header class="p-4 border-b border-gray-700">
													<h2 class="text-xl font-bold">Chat</h2>
											</header>
											<app-chat-sidebar
													._data=\${{model:"conversations",includes:["parent"]}}
													.selectedConversationId=\${this.selectedConversationId}
													class="flex-1 overflow-y-auto py-2"
											></app-chat-sidebar>
									</aside>

									<!-- Main Chat Area -->
									<main class="flex-1 flex flex-col">
											<app-chat-window
													._data=\${{model:"conversations",id:this.selectedConversationId}}
											></app-chat-window>
									</main>\`}})}),n.addModule({name:"chat",path:"apps/chat",settings:{appbar:{label:"Conversations",icon:"message-circle"}}})};
`,metaType:"application/javascript"},"/modules/apps/editor/index.js":{content:`export default({$APP:e})=>e.addModule({name:"editor",path:"apps/editor/views"});
`,metaType:"application/javascript"},"/modules/apps/bundler/index.js":{content:"export default {}"},"/modules/integrations/github.js":{content:"export default {}"},"/modules/apps/mcp/index.js":{content:`export default({$APP:e})=>{e.addModule({name:"mcp",path:"apps/mcp/views",settings:{appbar:{label:"MCP Inspector",icon:"square-mouse-pointer"}}}),e.addModule({name:"mcp-dev",settings:{appbar:{label:"MCP dev",icon:"server-cog"}}}),e.addModule({name:"mcp-chat",settings:{appbar:{label:"MCP Chat",icon:"bot-message-square"}}})};
`,metaType:"application/javascript"},"/modules/uix/index.js":{content:`export default({$APP:a})=>{a.addModule({name:"uix",components:{form:["form","form-control","input","textarea","time","rating","join","file-upload","number-input","switch","slider"],navigation:["navbar","breadcrumbs","menu","sidebar","pagination","tabs","tabbed"],overlay:["overlay","modal","drawer","tooltip","popover","alert-dialog","toast"],display:["markdown","editable","link","button","avatar","badge","card","circle","image","pattern","logo","media","table","table-row","icon","calendar","calendar-day","tag","stat","chart"],layout:["list","accordion","container","divider","section","page","flex","stack","spacer"],feedback:["spinner","progress-bar","circular-progress","skeleton"],utility:["darkmode","draggable","droparea","clipboard","theme-toggle","dark-mode-switch"]}})};
`,metaType:"application/javascript"},"/modules/icon-lucide/index.js":{content:`export default({$APP:e})=>{e.addModule({name:"icon-lucide",icon:!0})};
`,metaType:"application/javascript"},"/worker.js":{content:'import n from"/bootstrap.js";let d;const i=async e=>{console.log("App Worker: bootstrap() called");const o=new URL(self.location).searchParams.get("project"),t=o?JSON.parse(decodeURIComponent(o)):{};t.backend=!0;const r=await n.bootstrap({backend:!0,...t||{},dependencies:{T:"/modules/types/index.js",IndexedDBWrapper:"/modules/mvc/model/indexeddb/index.js",Database:"/modules/mvc/model/database/index.js",Model:"/modules/mvc/model/backend.js",Backend:"/modules/mvc/controller/backend/worker.js","user-migration":"/models/migration.js",...t.dependencies||{}},settings:{...t.settings||{},preview:!!self.IS_PREVIEW,IS_MV3:!!self.chrome}});return r&&!d&&(console.log("App Worker: Initializing backend application"),await n.Backend.bootstrap(r)),r};let l,s;const a=[],p={handleMessage:async({data:e})=>{if(e.eventId&&a.includes(e.eventId))return;e.eventId&&a.push(e.eventId);const c=e.eventId&&(o=>{s&&(console.log({responsePayload:o,data:e}),s.postMessage({eventId:e.eventId,payload:o,connection:e.connection}))});n?.Backend?(console.info(`App Worker: Routing message to backend: ${e.type}`,{data:e}),n.Backend.handleMessage({data:e,respond:c})):n.hooks.on("APP:BACKEND_STARTED",async()=>{console.info(`App Worker: Routing message to backend after APP:BACKEND_STARTED: ${e.type}`),n.Backend.handleMessage({data:e,respond:c})})}};self.addEventListener("message",async e=>{e.data.type==="INIT_PORT"&&(s=e.ports[0],console.warn("App Worker: Communication port initialized."),s.onmessage=p.handleMessage,(async()=>(l=await i(),n.Backend.client=s))())});\n',metaType:"application/javascript"},"/modules/mvc/model/indexeddb/index.js":{content:'export default async()=>{const h={true:1,false:0},K={true:!0,false:!1};async function M($){const y=W($);return await y.init(),y}function W({name:$,models:y,version:k}){let l=null,m=!1,g=null,C=Number(k);const R=async()=>g||(g=new Promise((e,o)=>{const n=indexedDB.open($,C);n.onerror=s=>{g=null,o(new Error(`Failed to open database: ${s.target.error}`))},n.onsuccess=s=>{l=s.target.result,m=!0,l.onversionchange=()=>{l&&(l.close(),l=null,m=!1,g=null)},e(l)},n.onupgradeneeded=s=>{const i=s.target.result,c=s.target.transaction;Object.keys(y).forEach(t=>{if(!i.objectStoreNames.contains(t))J(i,t);else{const r=c.objectStore(t),u=y[t];Object.keys(u).forEach(a=>{u[a].index===!0&&!r.indexNames.contains(a)&&r.createIndex(a,a,{unique:u[a].unique||!1,multiEntry:u[a].type==="array"})})}})}}),g),D=()=>{l&&l.close(),l=null,m=!1,g=null},_=async e=>(g&&await g,D(),C=e.version,y=e.models,$APP.Backend.broadcast({type:"UPDATE_MODELS",payload:{models:y}}),R()),p=async()=>{(!m||!l)&&await R()},S=({model:e,row:o,reverse:n=!1,currentRow:s={}})=>{const i=n?K:h,c=y[e],t={...o};return Object.keys(c).forEach(r=>{r.relationship&&!r.belongs||(o[r]===void 0&&s[r]!==void 0?t[r]=s[r]:(c[r].type==="boolean"&&(t[r]=o[r]?i.true:i.false),t[r]===void 0&&delete t[r]))}),n&&Object.keys(c).forEach(r=>{c[r].type==="boolean"&&(t[r]===h.true?t[r]=!0:t[r]===h.false&&(t[r]=!1))}),t},B=(e,o,n)=>{const s=y[n];return Object.entries(o).every(([i,c])=>{const t=e[i],r=s?.[i];return typeof c=="object"&&c!==null&&!Array.isArray(c)?Object.entries(c).every(([u,a])=>{switch(u){case"$gt":return t>a;case"$gte":return t>=a;case"$lt":return t<a;case"$lte":return t<=a;case"$ne":return t!=a;case"$in":return Array.isArray(a)&&a.includes(t);case"$nin":return Array.isArray(a)&&!a.includes(t);case"$contains":return Array.isArray(t)||typeof t=="string"&&typeof a=="string"?t.includes(a):!1;default:return!1}}):r?.type==="boolean"?!!t==c:r?.type==="array"&&Array.isArray(t)?t.includes(c):t===c})},J=(e,o)=>{const n=y[o],s=e.createObjectStore(o,{keyPath:"id",autoIncrement:!0});Object.keys(n).forEach(i=>{(n[i].index===!0||n[i].unique===!0)&&s.createIndex(i,i,{unique:n[i].unique??!1,multiEntry:n[i].type==="array"})})},F=(e,o)=>{const n=y[o];if(!n||typeof e!="object"||e===null)return null;for(const s in e)if(Object.hasOwn(e,s)&&n[s]?.index)return s;return null},L=async(e,o,n={})=>(await p(),new Promise((s,i)=>{const c=l.transaction(e,"readwrite"),r=c.objectStore(e).put(S({model:e,row:o,currentRow:n.currentRow}));r.onerror=()=>i(new Error(`Failed to put: ${r.error}`)),c.oncomplete=()=>s(r.result)})),Q=async(e,o={},{limit:n=0,offset:s=0,order:i=null,keys:c}={})=>(await p(),new Promise((t,r)=>{try{const a=l.transaction(e,"readonly").objectStore(e),d=[],G=y[e],I=()=>{if(i&&d.length>0){const f=Array.isArray(i)?i:i.split(",").map(b=>b.trim());d.sort((b,H)=>{for(const A of f){let P=1,j=A;A.startsWith("-")?(P=-1,j=A.substring(1).trim()):A.startsWith("+")&&(j=A.substring(1).trim());const q=b[j],v=H[j];if(q===void 0&&v===void 0)return 0;if(q===void 0)return 1*P;if(v===void 0||q<v)return-1*P;if(q>v)return 1*P}return 0})}const w=n>0?d.slice(s,s+n):d.slice(s);t(w.map(f=>S({model:e,row:f,reverse:!0})))};if(Array.isArray(o)){const w=a.openCursor();w.onerror=()=>r(new Error(`Failed to getMany ${e}: ${w.error}`)),w.onsuccess=f=>{const b=f.target.result;b?(o.includes(b.key)&&(!c||c.includes(b.key))&&d.push(b.value),b.continue()):I()};return}let E,T=!1;const x=F(o,e);if(x&&Object.keys(o).length>0){let w=o[x];if(G[x]?.type==="boolean"&&(w=w?h.true:h.false),w!==void 0)try{E=a.index(x).openCursor(IDBKeyRange.only(w)),T=!0}catch{E=a.openCursor()}else E=a.openCursor()}else E=a.openCursor();E.onerror=()=>r(new Error(`Failed to getMany ${e}: ${E.error}`)),E.onsuccess=w=>{const f=w.target.result;if(f){const b=T?f.primaryKey:f.key;if(c&&!c.includes(b)){f.continue();return}B(f.value,o,e)&&d.push(f.value),f.continue()}else I()}}catch(u){r(new Error(`Failed to start transaction: ${u.message}. Query Props: ${JSON.stringify({storeName:e,limit:n,offset:s,filter:o,order:i,keys:c})}`))}})),U=async(e,o)=>(await p(),new Promise((n,s)=>{if(!o)return n(null);const c=l.transaction(e,"readonly").objectStore(e),t=y[e];if(typeof o=="object"&&!Array.isArray(o)){const r=F(o,e);let u;if(r){let a=o[r];if(t[r]?.type==="boolean"&&(a=a?h.true:h.false),a!==void 0)try{u=c.index(r).openCursor(IDBKeyRange.only(a))}catch{u=c.openCursor()}else u=c.openCursor()}else u=c.openCursor();u.onerror=()=>s(new Error(`Failed to get: ${u.error}`)),u.onsuccess=a=>{const d=a.target.result;d?B(d.value,o,e)?n(S({model:e,row:d.value,reverse:!0})):d.continue():n(null)}}else{if(Array.isArray(o)){s(new Error("Filter for get must be an object or a primary key."));return}const r=c.get(o);r.onerror=()=>s(new Error(`Failed to get: ${r.error}`)),r.onsuccess=()=>n(r.result?S({model:e,row:r.result,reverse:!0}):null)}})),z=async(e,o)=>(await p(),new Promise((n,s)=>{const t=l.transaction(e,"readwrite").objectStore(e).delete(o);t.onerror=()=>s(new Error(`Failed to delete: ${t.error}`)),t.onsuccess=()=>n(!0)})),O=async(e,{filter:o={}}={})=>(await p(),new Promise((n,s)=>{const c=l.transaction(e,"readonly").objectStore(e);if(Object.keys(o).length===0){const t=c.count();t.onerror=()=>s(new Error(`Failed to count: ${t.error}`)),t.onsuccess=()=>n(t.result)}else{const t=c.openCursor();let r=0;t.onerror=()=>s(new Error(`Failed to count: ${t.error}`)),t.onsuccess=u=>{const a=u.target.result;a?(B(a.value,o,e)&&r++,a.continue()):n(r)}}}));return{init:R,transaction:async(e,o="readwrite")=>{await p();const n=l.transaction(e,o);return{transaction:n,put:(s,i,c={})=>new Promise((t,r)=>{const u=n.objectStore(s),a=S({model:s,row:i,currentRow:c.currentRow}),d=u.put(a);d.onsuccess=()=>t(d.result),d.onerror=()=>r(d.error)}),remove:(s,i)=>new Promise((c,t)=>{const u=n.objectStore(s).delete(i);u.onsuccess=()=>c(!0),u.onerror=()=>t(u.error)}),done:()=>new Promise((s,i)=>{n.oncomplete=()=>s(),n.onerror=()=>i(n.error),n.onabort=()=>i(n.error||new Error("Transaction aborted"))}),abort:()=>n.abort()}},getMany:Q,prepareRow:S,put:L,get:U,remove:z,reload:_,count:O,isEmpty:async e=>await O(e)===0,clear:async e=>(await p(),new Promise((o,n)=>{const c=l.transaction(e,"readwrite").objectStore(e).clear();c.onerror=()=>n(new Error(`Failed to clear: ${c.error}`)),c.onsuccess=()=>o()})),get db(){return l},close:D,destroy:async()=>{const e=$;return D(),new Promise((o,n)=>{const s=indexedDB.deleteDatabase(e);s.onerror=()=>n(new Error(`Failed to delete database: ${s.error}`)),s.onsuccess=()=>o()})},export:async e=>(await p(),new Promise((o,n)=>{const c=l.transaction(e,"readonly").objectStore(e).getAll();c.onerror=()=>n(new Error(`Failed to export: ${c.error}`)),c.onsuccess=()=>{const t={};c.result&&c.result.forEach(r=>{["string","number"].includes(typeof r.id)&&(t[r.id]=r)}),o(t)}})),import:async(e,o)=>{if(await p(),!Array.isArray(o))throw new Error("No data provided or data is not an array");return o.length===0?Promise.resolve():new Promise((n,s)=>{const i=l.transaction(e,"readwrite"),c=i.objectStore(e);let t=0,r=null;o.forEach(u=>{if(r)return;const a=c.put(u);a.onerror=()=>{r||(r=a.error,i.abort(),s(new Error(`Failed to import: ${r}`)))},a.onsuccess=()=>{r||(t++,o.length)}}),i.oncomplete=()=>{r||n()},i.onerror=()=>{r||s(new Error(`Transaction error during import: ${i.error}`))}})},get isConnected(){return m},get version(){return C},name:$,models:y}}return{open:M}};\n',metaType:"application/javascript"},"/modules/mvc/model/database/index.js":{content:'export const dependencies={metadata:"/modules/mvc/model/extensions/metadata.js",operations:"/modules/mvc/model/extensions/operations.js"};export default async({$APP:u,T:F,IndexedDBWrapper:_,metadata:$,operations:q})=>{const z=({context:r,collection:E="models"})=>({module:x})=>{if(!x[E])return;const c=Object.fromEntries(Object.keys(x[E]).map(K=>{const N={id:F.string({primary:!0}),...x[E][K]};return[K,Object.fromEntries(Object.entries(N).map(([V,O])=>(O.name=V,O.relationship&&!O.targetForeignKey&&(O.targetForeignKey=K),[V,O])))]}));r.set(c)},G={operations:q,metadata:$};u.addModule({name:"sysmodels",hooks:({context:r})=>({moduleAdded:z({context:r,collection:"sysmodels"})}),settings:{APP:"App",USER:"User",DEVICE:"Device"}}),u.sysmodels.set({[u.settings.sysmodels.APP]:{name:F.string({index:!0,primary:!0}),version:F.number(),users:F.many(u.settings.sysmodels.USER,"appId"),active:F.boolean({defaultValue:!0,index:!0}),models:F.object(),migrationTimestamp:F.number()},[u.settings.sysmodels.USER]:{name:F.string({index:!0,primary:!0}),appId:F.one(u.settings.sysmodels.APP,"users"),devices:F.many(u.settings.sysmodels.DEVICE,"userId"),publicKey:F.string(),privateKey:F.string(),active:F.boolean({index:!0})},[u.settings.sysmodels.DEVICE]:{name:F.string({index:!0,primary:!0}),userId:F.one(u.settings.sysmodels.USER,"devices"),deviceData:F.string(),active:F.number({defaultValue:!0,index:!0})}});const S=r=>!!u.sysmodels[r];u.addModule({name:"DatabaseExtensions",base:u.storage.install([])});const H=(r,E)=>Object.fromEntries(Object.entries(r).filter(([x,c])=>Object.hasOwn(c,`$${E}`)).map(([x])=>[x,G[E]])),J=async r=>{const{dump:E}=r,x=r.app??await u.Backend.getApp();if(!E)throw"No dump provided";if(!x)throw"No app selected";for(const[c,K]of Object.entries(E))u.Model[c]&&await u.Model[c].addMany(K,{keepIndex:!0});await u.SysModel.edit(u.settings.sysmodels.APP,{id:x.id,migrationTimestamp:Date.now()})},L=async()=>{const r=await u.Backend.getApp(),E={},x=Object.keys(r.models);for(const c of x)u.Model[c]&&(E[c]=await u.Model[c].getAll({object:!0}));return E},T=()=>{let r,E,x,c,K;const N={},V={},O=async(e={})=>{e.extensions&&u.DatabaseExtensions.add(...e.extensions),e.name&&(x=e.name),e.models&&(r=e.models),e.version&&(E=e.version),K=e.system===!0,c&&c.close(),c=await _.open({name:x,version:E,models:r}),u.DatabaseExtensions.length&&!K&&u.DatabaseExtensions.forEach(async n=>{N[n]=await _.open({name:`${x}_${n}`,version:E,models:H(r,n)})})},B=async(e,n,o,i)=>{if(!e||e.length===0||!o||o.length===0)return;const l=r[n],v={},h={};for(const t of o){const y=l[t];if(!y)continue;h[t]=y;const{targetModel:f,belongs:d,polymorphic:p,mixed:a}=y;for(const M of e){let s=M[t];if(d)s=M[t];else continue;if(s==null)continue;const b=(g,D)=>{v[g]||(v[g]=new Set),v[g].add(D)},m=g=>{if(p){if(typeof g=="string"){const[D,k]=g.split("@");D&&k&&b(D,k)}}else typeof g=="string"&&b(f,g)};Array.isArray(s)?s.forEach(m):m(s)}}const w={};for(const[t,y]of Object.entries(v))if(y.size>0){const f=Array.from(y),d=await R.getMany(t,f);w[t]=d.reduce((p,a)=>(p[a.id]=a,p),{})}for(const t of e)for(const y of o){const f=h[y];if(!f)continue;const{targetModel:d,belongs:p,polymorphic:a,mixed:M,many:s}=f,b=i.transform??f.transform;if(p){const m=t[y];if(m==null){t[y]=s?[]:null;continue}const g=D=>{let k=d,I=D;if(a&&typeof D=="string"&&([k,I]=D.split("@")),M&&typeof D=="object"&&D!==null)return D;const j=w[k]?.[I]??null;return b?b(j,k):j};s?t[y]=Array.isArray(m)?m.map(g).filter(Boolean):[]:t[y]=g(m)}else{let m;if(a){const g=`${n}@${t.id}`;r[d]?.[f.targetForeignKey]?.many?m={[f.targetForeignKey]:{$contains:g}}:m={[f.targetForeignKey]:g}}else m={[f.targetForeignKey]:t.id};t[y]=f.relationship==="one"?await R.get(d,m):await R.getMany(d,m)}}},R={loadDBDump:J,createDBDump:L,extdbs:N,get db(){return c},get models(){return r},get version(){return c?.version},open:O,stores:V,reload:O,count:(...e)=>c.count(...e),isEmpty:(...e)=>c.isEmpty(...e),async put(e,n={},o={}){const{skipRelationship:i=!1,currentRow:l={}}=o,v=r[e];if(!v)return console.error(`Model ${e} not found. current schema version: ${E} / ${c.version}`);if(S(e))try{const t=await c.put(e,n);return t?[null,await c.get(e,t)]:[null,null]}catch(t){return[t,null]}const[h,w]=F.validateType(n,{schema:r[e],row:l,undefinedProps:!!o.insert,validateVirtual:!0});if(h)return[h,null];try{if(i)return await c.put(e,w,o),[null,w];const t=[e],y=Object.keys(v).filter(M=>{const s=v[M],b=s.targetModel&&s.relationship&&w[M]!==void 0&&w[M]!==null;return b&&!t.includes(s.targetModel)&&(s.polymorphic||t.push(s.targetModel)),b}),f=w.id||n.id,d=[];for(const M of y){const s=v[M];let b=w[M];if(s.many&&Array.isArray(b)){const g=[];for(const D of b)if(typeof D=="string"||s.mixed&&typeof D=="object"&&D!==null)g.push(D);else{const k=s.targetModel;if(r[k]){const I={...D};I.id||(I.id=u.Backend.generateId()),d.push([k,I]),t.includes(k)||t.push(k);const j=s.polymorphic?`${k}@${I.id}`:I.id;g.push(j)}}w[M]=g,b=g}if(!r[s.targetModel]&&!s?.polymorphic){console.error(`ERROR: couldn\'t find target model \'${s.targetModel}\' for relationship \'${M}\' on model \'${e}\'`);continue}const m=r[s.targetModel]?.[s.targetForeignKey];if(!m){s.belongs||console.warn(`WARN: couldn\'t find target foreign key \'${s.targetForeignKey}\' in model \'${s.targetModel}\' for relationship \'${M}\' from \'${e}\'. This might be a one-way definition or configuration issue.`);continue}if(m.belongs){const g=m.polymorphic?`${e}@${f}`:f;if(m.many){const k=Array.isArray(b)?b:[b];k.length&&(await R.getMany(s.targetModel,k.map(j=>j&&typeof j=="object"?j.id:j))).forEach(j=>{if(j){const A=j[s.targetForeignKey];A?A.includes(g)||A.push(g):j[s.targetForeignKey]=[g],d.push([s.targetModel,j])}})}else{const k=typeof b=="string"?b:b?.id;if(k){const I=await R.get(s.targetModel,k);I&&(I[s.targetForeignKey]=g,d.push([s.targetModel,I]))}}}!s.belongs&&!v[M]?.polymorphic&&delete w[M]}d.push([e,w]);const p=await c.transaction(t),a=d.map(([M,s])=>p.put(M,s));return await Promise.all(a),await p.done(),[null,w]}catch(t){return console.error("Error in put operation:",t,{model:e,row:n,models:r,version:E}),[t,null]}},async get(e,n,o={}){if(!n)return null;const{insert:i=!1,includes:l=[],recursive:v=null}=o;let h=await c.get(e,n);if(!h&&!i)return null;if(!h&&i){const[w,t]=await R.add(e,typeof n=="object"?n:{id:n},{skipRelationship:!0,...typeof n!="object"&&{overrideId:!0,keepIndex:!0}});if(w)return console.error("Failed to insert record in get():",w),null;h=t}if(h&&l.length&&await B([h],e,l,o),h&&v){const w=new Set;let t=[h];const y=v;for(;t.length>0;){const f=[];for(const d of t){const a=`${d._modelName||e}@${d.id}`;w.has(a)||(w.add(a),f.push(d))}if(f.length===0)break;await B(f,e,[y],o),t=[];for(const d of f){const p=d[y];if(Array.isArray(p))p.forEach(a=>{if(a){const M=r[e][y];M&&(a._modelName=M.targetModel),t.push(a)}});else if(p){const a=r[e][y];a&&(p._modelName=a.targetModel),t.push(p)}}}}return h},async getMany(e,n,o={}){const{limit:i,offset:l,order:v,includes:h=[],recursive:w=null}=o;let t;if(Array.isArray(n)?t=(await Promise.all(n.map(f=>c.get(e,f)))).filter(f=>f!==null):t=await c.getMany(e,n,{limit:i,offset:l,order:v}),h.length&&t.length&&await B(t,e,h,o),w&&t.length){const f=new Set;let d=[...t];const p=w;for(;d.length>0;){const a=[];for(const s of d){const m=`${s._modelName||e}@${s.id}`;f.has(m)||(f.add(m),a.push(s))}if(a.length===0)break;const M=a[0]._modelName||e;await B(a,M,[p],o),d=[];for(const s of a){const b=s[p],m=r[M][p];Array.isArray(b)?b.forEach(g=>{g&&(m&&(g._modelName=m.targetModel),d.push(g))}):b&&(m&&(b._modelName=m.targetModel),d.push(b))}}}return i?{count:await c.count(e,Array.isArray(n)?{id:{$in:n}}:n),limit:i,offset:l,items:t}:t},async remove(e,n,o={}){const i=r[e];if(!i)return console.error(`Model ${e} not found for removal.`),!1;const l=await R.get(e,n);if(!l)return!1;const v=Object.keys(i).filter(t=>i[t].targetModel&&i[t].relationship),h=[e],w=[];if(v.length>0)for(const t of v){const y=i[t];if(!y.targetModel||!y.targetForeignKey)continue;h.includes(y.targetModel)||y.polymorphic||h.push(y.targetModel);const f=y.targetModel,d=y.targetForeignKey,p=r[f]?.[d];if(p&&p.belongs){const a=p.polymorphic?`${e}@${n}`:n;let M;p.many?M={[d]:{$contains:a}}:M={[d]:a},(await R.getMany(f,M)).forEach(b=>{let m;p.many?m=(b[d]||[]).filter(g=>g!==a):m=null,w.push([f,{...b,[d]:m}])})}}try{const t=await c.transaction(h),y=w.map(([p,a])=>t.put(p,a)),f=t.remove(e,n);await Promise.all([...y,f]),await t.done();const d=S(e);return[`ModelRemoveRecord-${e}`,"onRemoveRecord"].forEach(p=>u.hooks.emit(p,{model:e,opts:o,id:n,system:d,row:l,db:R,extensions:Object.keys(r[e]).filter(a=>a[0]==="$").map(a=>a.slice(1))})),!0}catch(t){return console.error("Failed to remove record or update relationships:",t,{model:e,id:n}),!1}},async removeMany(e,n,o={}){!n&&o.filter&&(n=o.filter);const i=Array.isArray(n)?n.map(l=>typeof l=="object"?l.id:l):(await c.getMany(e,n)).map(l=>l.id);return Promise.all(i.filter(Boolean).map(l=>R.remove(e,l,o)))},async edit(e,n,o={}){if(!n||!n.id)return console.error("Edit operation requires a row with an ID.",{model:e,row:n}),{errors:{id:"ID is required for edit."},model:e,row:n,opts:o};const i={...o,update:!0,currentRow:o.currentRow??await R.get(e,n.id,{includes:[]})};if(!i.currentRow)return console.warn(`Record not found for edit: ${e} with id ${n.id}`),{errors:{record:"Record not found."},model:e,row:n,opts:i};const[l,v]=await R.put(e,{...i.currentRow,...n},i);if(l)return{errors:l,model:e,row:n,opts:i};const h=S(e);return[`ModelEditRecord-${e}`,"onEditRecord"].forEach(w=>u.hooks.emit(w,{row:n,model:e,system:h,opts:i,db:R,extensions:Object.keys(r[e]).filter(t=>t[0]==="$").map(t=>t.slice(1))})),v},async editMany(e,n,o={}){return n?.length?await Promise.allSettled(n.map(async l=>l?.id?R.edit(e,l,o):{errors:{id:"Row or ID missing for editMany"},row:l})):[]},async editAll(e,n,o,i={}){const l=await c.getMany(e,n,{...i});return await Promise.allSettled(l.map(h=>R.edit(e,{...h,...o},{...i,currentRow:h})))},async add(e,n,o={}){const i={...n},l=S(e);(!l&&!o.keepIndex&&!o.overrideId||!i.id)&&(i.id=u.Backend.generateId());const[v,h]=await R.put(e,i,{...o,insert:!0});return v?{errors:v,model:e,row:i,opts:o}:([`ModelAddRecord-${e}`,"onAddRecord"].forEach(w=>u.hooks.emit(w,{model:e,row:h,system:l,opts:o,db:R,extensions:Object.keys(r[e]).filter(t=>t[0]==="$").map(t=>t.slice(1))})),h)},async addMany(e,n=[],o={}){return await Promise.allSettled(n.map(l=>R.add(e,l,o)))}};return R},C=T();await C.open({name:u.settings.sysmodels.APP,version:1,models:u.sysmodels,system:!0}),u.addModule({name:"sysmodel",alias:"SysModel",base:C});const U=T();return u.hooks.on("APP:BACKEND_STARTED",async({app:r,user:E,device:x,models:c})=>{if(!r||!c){console.error("APP:BACKEND_STARTED hook called with invalid app or models.",{app:r,models:c});return}await U.open({name:r.id,version:r.version,extensions:r.extensions,system:!1,models:{...c,...r.models||{}}}),u.hooks.emit("APP:DATABASE_STARTED",{app:r,user:E,device:x})}),U};\n',metaType:"application/javascript"},"/modules/mvc/model/extensions/metadata.js":{content:`export const module=!0;export default({T:s,$APP:e})=>(e.hooks.set({onAddRecord({model:a,row:d,system:n,extensions:r}){if(n||!e.Database.extdbs||!r.includes("metadata"))return;const t=e.Database.extdbs.metadata;if(!t)return console.error("Metadata database instance not active.");t.put(a,{id:d.id,createdAt:Date.now(),updatedAt:Date.now()})},async onEditRecord({model:a,row:d,system:n,extensions:r}){if(n||!e.Database.extdbs||!r.includes("metadata"))return;const t=e.Database.extdbs.metadata;if(!t)return console.error("Metadata database instance not active.");const o=await t.get(a,d.id);o.updatedAt=Date.now(),t.put(a,o)},onRemoveRecord({model:a,id:d,system:n,extensions:r}){if(n||!e.Database.extdbs||!r.includes("metadata"))return;const t=e.Database.extdbs.metadata;if(!t)return console.error("Metadata database instance not active.");t.remove(a,d)}}),{createdAt:s.string({index:!0}),updatedAt:s.string({index:!0}),createdBy:s.string({index:!0}),updatedBy:s.string({index:!0})});
`,metaType:"application/javascript"},"/modules/mvc/model/extensions/operations.js":{content:`export const module=!0;export default({T:s,$APP:e})=>(e.hooks.set({onAddRecord({model:o,row:a,system:r,extensions:n}){if(r||!e.Database.extdbs||!n.includes("operations"))return;const t=e.Database.extdbs.operations;if(!t)return console.error("Operations database instance not active.");t.put(o,{timestamp:Date.now(),row:a})},async onEditRecord({model:o,id:a,row:r,system:n,extensions:t}){if(n||!e.Database.extdbs||!t.includes("operations"))return;const i=e.Database.extdbs.operations;if(!i)return console.error("Operations database instance not active.");i.put(o,{timestamp:Date.now(),rowId:a,row:r})},onRemoveRecord({model:o,id:a,system:r,extensions:n}){if(r||!e.Database.extdbs||!n.includes("operations"))return;const t=e.Database.extdbs.operations;if(!t)return console.error("Operations database instance not active.");t.put(o,{timestamp:Date.now(),removedAt:Date.now(),rowId:a})}}),{createdAt:s.string({index:!0}),removedAt:s.string(),rowId:s.string({index:!0}),row:s.object()});
`,metaType:"application/javascript"},"/modules/mvc/model/backend.js":{content:'import u from"/modules/mvc/model/index.js";export default({$APP:r,Database:c})=>{const E={DISCONNECT:(e,{port:t})=>t.removePort(),CREATE_REMOTE_WORKSPACE:async({payload:e},{importDB:t})=>t(e),ADD_REMOTE_USER:async({payload:e})=>r.Backend.createUserEntry(e),ADD:async({payload:e,respond:t})=>{const s=await c.add(e.model,e.row,e.opts);t(s)},ADD_MANY:async({payload:e,respond:t})=>{const s=await c.addMany(e.model,e.rows,e.opts);t({success:!0,results:s})},REMOVE:async({payload:e,respond:t})=>{const s=await c.remove(e.model,e.id,e.opts);t(s)},REMOVE_MANY:async({payload:e,respond:t})=>{const s=await c.removeMany(e.model,e.ids,e.opts);t({success:!0,results:s})},EDIT:async({payload:e,respond:t})=>{const s=await c.edit(e.model,e.row,e.opts);t(s)},EDIT_MANY:async({payload:e,respond:t})=>{const s=await c.editMany(e.model,e.rows,e.opts);t({success:!0,results:s})},GET:async({payload:e,respond:t})=>{const{id:s,model:o,opts:n={}}=e,i=await c.get(o,s??(n.filter&&(typeof n.filter=="string"&&JSON.parse(n.filter)||n.filter)),n);t(i)},GET_MANY:async({payload:{model:e,opts:t={}},respond:s}={})=>{const o=await c.getMany(e,t.filter,t);s(o)}};r.events.set(E);const p=(e,t,s={})=>new Promise(o=>{const n=E[e];n&&typeof n=="function"?n({respond:o,payload:{model:t,...s}}):o({success:!1,error:`Action "${e}" not found.`})}),a=({model:e,row:t})=>{if(!t)return;const s=r.models[e],o=Object.entries(s).filter(([,n])=>n.belongs&&n.targetModel!=="*");o.length&&o.forEach(([n,i])=>{t[n]&&r.Backend.broadcast({type:"REQUEST_DATA_SYNC",payload:{key:`get:${t[n]}`,model:i.targetModel,data:void 0}})})},l=({row:e,db:t,model:s})=>{if(!e.models)return;const o=new Set(e.extensions||[]),n=new Set;Object.values(e.models).forEach(d=>Object.keys(d).forEach(f=>{f.startsWith("$")&&n.add(f.slice(1))}));const i=[...n].filter(d=>!o.has(d));if(i.length===0)return;console.log(`New extensions found: ${i.join(", ")}`),i.forEach(d=>{console.log(`Initializing extension: ${d}`),r.DatabaseExtensions.add(d)});const y=[...o,...i];t.edit(s,{...e,extensions:y})};return r.hooks.set({"ModelAddRecord-App":l,"ModelEditRecord-App":l,onAddRecord({model:e,row:t,system:s}){s||(r.Backend.broadcast({type:"REQUEST_DATA_SYNC",payload:{key:`get:${t.id}`,model:e,data:t}}),a({model:e,row:t}),console.log("BROADCAST MESSAGE",{system:s,type:"REQUEST_DATA_SYNC",payload:{key:`get:${t.id}`,model:e,data:t}}))},onEditRecord({model:e,row:t,system:s}){s||(r.Backend.broadcast({type:"REQUEST_DATA_SYNC",payload:{key:`get:${t.id}`,model:e,data:t}}),a({model:e,row:t}))},onRemoveRecord({model:e,row:t,id:s,system:o}){o||(r.Backend.broadcast({type:"REQUEST_DATA_SYNC",payload:{key:`get:${s}`,model:e,data:void 0}}),a({model:e,row:t}))}}),u.request=p,u};\n',metaType:"application/javascript"},"/modules/mvc/controller/backend/worker.js":{content:'export default({$APP:t,Database:l})=>{const g=(()=>{let e=0,s=0;return()=>{let n=Date.now();return n>e?s=0:(s++,n+=s),e=n,n.toString()}})();let f=1;const m={},u={},B=async(e,s,n=5e3)=>{const o=(await self.clients.matchAll({type:"window",includeUncontrolled:!0}))[0];if(!o)return Promise.reject(new Error("No active client found to send request to."));const c=`backend-request-${f++}`;return new Promise((a,r)=>{u[c]={resolve:a,reject:r},setTimeout(()=>{delete u[c],r(new Error(`Request timed out after ${n}ms`))},n),o.postMessage({type:e,payload:s,eventId:c})})},v=async e=>{t.Backend.client&&(t.Backend.client.postMessage(e),t.Backend.client.postMessage({type:"BROADCAST",params:e}))},D=async({data:e,respond:s})=>{const{events:n}=t,{type:i,payload:o,connection:c,eventId:a}=e;if(u[a]){u[a].resolve(o),delete u[a];return}if(c){m[a]?m[a].postMessage(e):(t.mv3.postMessage(e,c),m[a]=s);return}const r=n[i];r&&await r({payload:o,eventId:a,respond:s,client:h(t.Backend.client),broadcast:v})},h=e=>new Proxy({},{get:(s,n)=>i=>T(e,n,i)}),T=(e,s,n)=>{const i=`sw_${f++}`;return new Promise((o,c)=>{u[i]={resolve:o,reject:c},e.postMessage({type:s,payload:n,eventId:i})})};function I({$APP:e,getApp:s,debounceDelay:n=50}){let i;const o=async()=>{if(e.dynamicModels.length){e.log(`Batch processing ${e.dynamicModels.length} model(s)...`);try{const{SysModel:c}=e,a=await s();a.version++,a.models=e.models,await c.edit(e.settings.sysmodels.APP,a),e.log(`Batch add successful. ${e.dynamicModels.length} model(s) added. App version is now ${a.version}.`),await l.reload({models:a.models,version:a.version});const r=await y(a);await S(Object.fromEntries(e.dynamicData),{skipDynamicCheck:!0}),await e.hooks.emit("APP:STARTED",r)}catch(c){console.error("Failed to process model additions batch:",c)}}};return e.addModule({name:"dynamicModels",base:[]}),e.addModule({name:"dynamicData",base:[]}),function({name:a,schema:r}){if(e.dynamicModels.includes(a)||e.dynamicModels.add(a),!a||!r)throw new Error("A model \'name\' and \'schema\' are required.");e.log(`Model "${a}" queued for addition.`),e.models.set({[a]:r}),clearTimeout(i),i=setTimeout(o,n)}}const E=async({timestamp:e=Date.now(),id:s=e.toString(),models:n=t.models,version:i=1}={})=>{const o={id:s,version:i,active:!0,models:n};return await t.SysModel.add(t.settings.sysmodels.APP,o),t.hooks.emit("APP:CREATED",{app:o}),o};async function C(){const e=await self.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]),s=await self.crypto.subtle.exportKey("spki",e.publicKey),n=await self.crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:btoa(String.fromCharCode(...new Uint8Array(s))),privateKey:btoa(String.fromCharCode(...new Uint8Array(n)))}}const R=async({app:e,device:s,user:n}={})=>{const i=e||await t.Backend.getApp();if(!n){const d=await t.SysModel.get(t.settings.sysmodels.USER,{active:!0,appId:i.id});if(d)return d.privateKey=null,await t.SysModel.get(t.settings.sysmodels.DEVICE,{userId:d.id,active:!0})||await t.SysModel.add(t.settings.sysmodels.DEVICE,s),d}const{publicKey:o,privateKey:c}=await C(),a=n||{id:n?.id||g(),name:n?.name||"Local User",publicKey:o,privateKey:c,appId:i.id,active:!0};await t.SysModel.add(t.settings.sysmodels.USER,a);const r=s||{userId:a.id,appId:i.id,active:!0};return await t.SysModel.add(t.settings.sysmodels.DEVICE,r),a.privateKey=null,a},p=async()=>await t.SysModel.get(t.settings.sysmodels.APP,{active:!0}),M=async e=>{if(t.Backend.user)return t.Backend.user;const s=e||await t.Backend.getApp();if(t.Backend.user&&t.Backend.user.appId!==s.id&&(t.Backend.user=null),!t.Backend.user){let n=await t.SysModel.get(t.settings.sysmodels.USER,{appId:s.id,active:!0});n||(n=await t.Backend.createUserEntry({app:s}));const{privateKey:i,active:o,...c}=n;t.Backend.user=c}return t.Backend.user},k=async({app:e,user:s}={})=>{const n=e||await t.Backend.getApp(),i=s||await t.Backend.getUser(n);if(!i)throw new Error("User not found");return await t.SysModel.get(t.settings.sysmodels.DEVICE,{userId:i.id,active:!0})||null},S=async(e,s={})=>{const{skipDynamicCheck:n=!1}=s,i=e??t.data,{SysModel:o}=t,c=await p(),a=Object.entries(i);if(a.length){const r={};for(const[d,w]of a)!n&&!t.models[d]?t.dynamicData.add([d,w]):r[d]=w;l.loadDBDump({dump:r,app:c}),l.app=await o.edit(t.settings.sysmodels.APP,{id:c.id,migrationTimestamp:Date.now()})}};t.DatabaseExtensions;const y=async e=>{l.app=e;const s=[];e.models??={},Object.values(e.models).forEach(a=>Object.keys(a).forEach(r=>{r.startsWith("$")&&s.push(r.slice(1))})),await l.reload({name:e.id,models:e.models,version:e.version,extensions:s});const{active:n,privateKey:i,...o}=await M(e),c=await k({app:e,user:o});return t.data&&!e.migrationTimestamp&&(await S(t.data),e=await p()),{app:e,user:o,device:c,models:e.models}},U=I({$APP:t,getApp:p}),K={bootstrap:async()=>{let e=await p();e||(e=await E());const s=await y(e);return t.dynamicModels.length||await t.hooks.on("APP:DATABASE_STARTED",async()=>{await t.hooks.emit("APP:STARTED",s)}),await t.hooks.emit("APP:BACKEND_STARTED",s),s},handleMessage:D,getApp:p,getDevice:k,createAppEntry:E,createUserEntry:R,getUser:M,generateId:g,broadcast:v,addModel:U,requestFromClient:B};return t.events.set({INIT_APP:async({respond:e})=>{await t.hooks.on("APP:STARTED",async({app:s,user:n,device:i,models:o})=>{e({app:s,user:n,device:i,models:o})})},GET_CURRENT_APP:async({respond:e})=>{const s=await t.Backend.getApp();e(s)},LIST_APPS:async({respond:e})=>{const s=await t.SysModel.getMany(t.settings.sysmodels.APP);e(s||[])},CREATE_APP:async({respond:e})=>{const s=await t.Backend.getApp();s&&await t.SysModel.edit(t.settings.sysmodels.APP,{id:s.id,active:!1});const n=await t.Backend.createAppEntry(),i=await y(n);e(i.app)},SELECT_APP:async({payload:e,respond:s})=>{const{appId:n}=e;if(!n)return s({error:"An \'appId\' is required to select an app."});const i=await t.Backend.getApp();i&&i.id!==n&&await t.SysModel.edit(t.settings.sysmodels.APP,{id:i.id,active:!1}),await t.SysModel.edit(t.settings.sysmodels.APP,{id:n,active:!0});const o=await t.SysModel.get(t.settings.sysmodels.APP,{id:n}),c=await y(o);s(c.app)},GET_DB_DUMP:async({respond:e})=>{const s=await l.createDBDump();e(s)},LOAD_DB_DUMP:async({payload:e,respond:s=console.log})=>{try{l.loadDBDump(e),s({success:!0})}catch(n){console.error("Failed to load DB dump:",n),s({success:!1,error:n})}}}),K};\n',metaType:"application/javascript"},"/models/migration.js":{content:`export const version=1;export default({T:e,$APP:t})=>{const a={blocks:[{id:"posts-schema-definition",collection:"posts",properties:{title:e.string({required:!0}),headline:e.string(),content:e.string({type:"textarea"}),status:e.string({enum:["draft","published","scheduled"],index:!0}),createdAt:e.string({type:"datetime"}),feed_items:e.many("feed","item"),tags:e.many("tags","taggable")}},{id:"links-schema-definition",collection:"links",properties:{url:e.string({required:!0}),title:e.string({required:!0}),description:e.string({type:"textarea"}),createdAt:e.string({type:"datetime"}),feed_items:e.many("feed","item"),tags:e.many("tags","taggable")}},{id:"projects-schema-definition",collection:"projects",properties:{name:e.string({required:!0}),description:e.string({type:"textarea"}),url:e.string(),image:e.string(),status:e.string({enum:["active","archived"]}),feed_items:e.many("feed","item"),tags:e.many("tags","taggable"),stack:e.many("stack","projects")}},{id:"stack-schema-definition",collection:"stack",properties:{name:e.string({required:!0,index:!0}),projects:e.belongs_many("projects","stack")}},{id:"feed-schema-definition",collection:"feed",properties:{type:e.string({index:!0,defaultValue:"main"}),item:e.one("*","feed_items",{polymorphic:!0}),createdAt:e.string({type:"datetime"})}},{id:"tags-schema-definition",collection:"tags",properties:{name:e.string({required:!0,index:!0}),taggable:e.belongs_many("*","tags",{polymorphic:!0})}},{id:"profile-schema-definition",collection:"profiles",properties:{name:e.string(),handle:e.string(),bio:e.string({input:"textarea"}),avatar:e.string(),headerImage:e.string()}},{id:"favorites-schema-definition",collection:"favorites",properties:{favoritable:e.one("*","favorites",{polymorphic:!0}),list:e.string({defaultValue:"default"})}},{id:"notifications-schema-definition",collection:"notifications",properties:{title:e.string({required:!0}),body:e.string({type:"textarea"}),read:e.boolean({defaultValue:!1}),endpoint:e.string(),p256dh:e.string(),auth:e.string()}}],profiles:[{id:"main-profile",name:"Alan Leal",handle:"brazuka.dev",bio:"I started to code at age 12 to create a website about Dragon Ball Z that got aired in a national TV program. Since then I've been trying to do something cooler without much success. Currently I work as a software engineer and consultant for tech companies and am now starting to write about a lot of stuff at brazuka.dev.",avatar:"https://lh3.googleusercontent.com/a/ACg8ocLY8rMTOQdVufDG-cMsgnz69KbyOWGh_zT59jNyl-JVyFbVQ07q=s288-c-no",headerImage:"https://cdn.bsky.app/img/banner/plain/did:plc:kft6lu4trxowqmter2b6vg6z/bafkreiek62qzg63w5utds443ptdul7u5kodm53rep3ib4lf62b53s343hi@jpeg"}],posts:[{id:"hello-world",title:"Brazuka.dev's First Post",content:"After ages, I have a blog to write about tech again. This is the first post! :)",createdAt:"2025-08-29T10:00:00Z",tags:["tag-js","tag-webdev"]}],links:[{id:"link-1",url:"https://arstechnica.com/information-technology/2025/08/the-personhood-trap-how-ai-fakes-human-personality/",title:"The Personhood Trap: How AI Fakes Human Personality",description:"A comprehensive survey of prompt engineering demonstrated just how powerful these prompts are. Adding instructions like 'You are a helpful assistant' versus 'You are an expert researcher' changed accuracy on factual questions by up to 15 percent.",createdAt:"2025-08-27T11:00:00Z",tags:["tag-ai"]}],projects:[{id:"proj-1",name:"Personal Website & Blog",description:"The very website you're looking at now. Built with a custom frontend framework and a flexible, block-based data model.",url:"https://brazuka.dev",status:"active",tags:["tag-webdev"],stack:["stack-js","stack-html","stack-tailwind","stack-css","stack-wc","stack-idb","stack-lit","stack-git","stack-md","stack-cm","stack-mcp"]}],stack:[{id:"stack-js",name:"JavaScript"},{id:"stack-html",name:"HTML"},{id:"stack-css",name:"CSS"},{id:"stack-tailwind",name:"Tailwind"},{id:"stack-wc",name:"Web Component"},{id:"stack-idb",name:"IndexedDB"},{id:"stack-lit",name:"Lit-html"},{id:"stack-git",name:"Git"},{id:"stack-md",name:"Markdown"},{id:"stack-cm",name:"CodeMirror"},{id:"stack-mcp",name:"MCP (Model Context Protocol)"}],feed:[{id:"feed-1",item:"posts@hello-world",createdAt:"2025-08-26T10:00:00Z"},{id:"feed-2",item:"links@link-1",createdAt:"2025-08-25T14:00:00Z"},{id:"feed-3",item:"projects@proj-1",createdAt:"2025-08-24T18:00:00Z"},{id:"feed-4",item:"links@link-1",createdAt:"2025-08-27T11:00:00Z"}],tags:[{id:"tag-js",name:"JavaScript"},{id:"tag-webdev",name:"Web Development"},{id:"tag-api",name:"API"},{id:"tag-ai",name:"AI",taggable:["posts@hello-world","links@link-1"]}],favorites:[{id:"fav-1",favoritable:"posts@hello-world",list:"reading-list"},{id:"fav-2",favoritable:"links@link-1"}]};t.data.set(a),t.models.set({blocks:{name:e.string({index:!0}),title:e.string(),tag:e.string({index:!0}),type:e.string({defaultValue:"block"}),properties:e.object(),indexed:e.many("index","indexed",{polymorphic:!0}),blocks:e.belongs_many("*","parents",{mixed:!0,polymorphic:!0}),parents:e.many("*","blocks",{polymorphic:!0}),collection:e.string({index:!0,description:"If present, this block defines and uses a data collection."}),mixed:e.boolean(),tags:e.array({description:"If mixed is false, defines the blocks which can be used inside this container"})},index:{indexed:e.belongs("*","indexed",{polymorphic:!0})}}),t.hooks.on("ModelAddRecord-blocks",async({row:i})=>{if(i.collection)return t.dynamicModels.add(i.collection),t.Backend.addModel({name:i.collection,schema:i.properties})})};
`,metaType:"application/javascript"},"/modules/apps/drive/models/migration.js":{content:`import e from"/bootstrap.js";import t from"/modules/types/index.js";const r={files:[{name:"modules",directory:"",isDirectory:!0},{name:"app.js",directory:"",content:\`
import T from "/modules/types/index.js";
import html from "/modules/mvc/view/html/index.js";
export default ({tag: "app-index",

	properties: {
		name: T.string({ defaultValue: "Visitor" }),
	},

	render() {
		return html\\\`
			<div class="p-4">
				<uix-card class="p-6 shadow rounded-xl bg-white">
					<span class="text-lg font-bold text-center">\\\${this.name}, Welcome to Bootstrapp!</span>
					<uix-button class="mt-4" label="Click!"></uix-button>
				</uix-card>
			</div>
		\\\`;
	}
});\`}]};e.data.set(r),e.models.set({files:{name:t.string({index:!0}),directory:t.string({index:!0}),path:t.string({index:!0,virtual:"\${directory}/\${name}"}),isDirectory:t.boolean({index:!0}),mimeType:t.string({defaultValue:"plain/text"}),content:t.string()}});
`,metaType:"application/javascript"},"/modules/apps/project/models/migration.js":{content:`const n=e=>{const t=\`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>\${e}</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <h1>Welcome to \${e}!</h1>
  <p>Your new project is ready to go.</p>
  <script type="module" src="index.js"><\\/script>
</body>
</html>\`,s=\`console.log("\\u2728 Hello from \${e}!");console.trace();

// Your JavaScript code starts here.
\`;return[{name:e,directory:"/projects",isDirectory:!0},{name:"index.html",directory:\`/projects/\${e}\`,content:t,mimeType:"text/html"},{name:"index.js",directory:\`/projects/\${e}\`,content:s,mimeType:"application/javascript"},{name:"index.css",directory:\`/projects/\${e}\`,content:\`body {
  font-family: system-ui, -apple-system, sans-serif;
  display: grid;
  place-content: center;
  text-align: center;
  min-height: 100vh;
  margin: 0;
  background-color: #f0f2f5;
  color: #1c1e21;
}
\`,mimeType:"text/css"}]};export default({T:e,$APP:t})=>{t.data.set({boards:[{name:"Backlog",description:"Development Tasks"},{name:"Development",description:"Development Tasks"},{name:"Finished",description:"Development Tasks"},{name:"Cancelled",description:"Development Tasks"}],files:[{name:"projects",directory:"",isDirectory:!0}]}),t.data.set({boards:[{name:"Backlog",description:"Development Tasks"},{name:"In Development",description:"Development Tasks"},{name:"Finished",description:"Development Tasks"},{name:"Cancelled",description:"Development Tasks"}],files:[{name:"projects",directory:"",isDirectory:!0},...n("untitled-1")]}),t.models.set({users:{username:e.string({primary:!0}),email:e.string({unique:!0}),role:e.string({defaultValue:"user",enum:["admin","user"]})},boards:{name:e.string(),description:e.string(),tasks:e.many("tasks","boardId")},tasks:{title:e.string(),description:e.string({input:"textarea"}),completed:e.boolean({defaultValue:!1}),dueDate:e.date(),priority:e.string({defaultValue:"medium",enum:["low","medium","high"]}),boardId:e.belongs("boards","tasks"),createdBy:e.belongs("users","tasks"),assignedTo:e.belongs("users","assignedTasks"),comments:e.array()}})};
`,metaType:"application/javascript"},"/modules/apps/chat/models/migration.js":{content:`import n from"/bootstrap.js";import e from"/modules/types/index.js";const s={users:[{id:"user-1",name:"You",avatar:"https://i.pravatar.cc/40?u=user-1"},{id:"user-2",name:"Alex",avatar:"https://i.pravatar.cc/40?u=user-2"},{id:"user-3",name:"Jordan",avatar:"https://i.pravatar.cc/40?u=user-3"},{id:"bot-1",name:"Habit Coach",avatar:"https://i.pravatar.cc/40?u=bot-1",isBot:!0}],channels:[{id:"chan-1",name:"general",topic:"General chat about habits",participants:["user-1","user-2","user-3"]},{id:"chan-2",name:"random",topic:"Anything else!",participants:["user-1","user-3"]}],conversations:[{id:"conv-1",type:"channel",parent:"channels@chan-1"},{id:"conv-2",type:"channel",parent:"channels@chan-2"},{id:"conv-3",type:"dm",parent:"users@user-2"},{id:"conv-4",type:"dm",parent:"users@bot-1"}],messages:[{id:"msg-1",conversation:"conv-3",sender:"user-2",role:"user",content:"Hey! How's the new habit tracker working out?",timestamp:new Date(Date.now()-1e3*60*5).toISOString()},{id:"msg-2",conversation:"conv-3",sender:"user-1",role:"user",content:"It's great! The AI integration is super helpful.",timestamp:new Date(Date.now()-1e3*60*4).toISOString()},{id:"msg-3",conversation:"conv-4",sender:"bot-1",role:"assistant",content:"Hello! I'm here to help you build better habits. What's on your mind?",timestamp:new Date(Date.now()-1e3*60*10).toISOString()},{id:"msg-4",conversation:"conv-1",sender:"user-3",role:"user",content:"Welcome to the general channel!",timestamp:new Date(Date.now()-1e3*60*20).toISOString()}]};n.data.set(s),n.models.set({users:{name:e.string(),avatar:e.string(),isBot:e.boolean(!1),messages:e.many("messages","sender"),conversations:e.many("conversations","parent",{polymorphic:!0}),channels:e.many("channels","users")},channels:{name:e.string(),topic:e.string(),participants:e.belongs_many("users","channels"),conversation:e.one("conversations","parent",{polymorphic:!0})},conversations:{type:e.string({options:["channel","dm"]}),parent:e.belongs("*","conversations",{polymorphic:!0}),messages:e.many("messages","conversation")},messages:{content:e.string(),timestamp:e.string(),role:e.string({options:["user","assistant"]}),toolCalls:e.object(null),sender:e.belongs("users","messages"),conversation:e.belongs("conversations","messages")}});
`,metaType:"application/javascript"},"/modules/apps/bundler/models/migration.js":{content:`import n from"/bootstrap.js";import e from"/modules/types/index.js";n.data.set({credentials:[{id:"singleton",owner:"meiraleal",branch:"main",repo:"brazuka.dev",token:""}]}),n.models.set({credentials:{owner:e.string(),repo:e.string(),branch:e.string({defaultValue:"main"}),token:e.string()},releases:{version:e.string({index:!0}),notes:e.string(),status:e.string({enum:["pending","success","failed"],defaultValue:"pending"}),deployedAt:e.string(),files:e.array()}});
`,metaType:"application/javascript"},"/theme.css":{content:`body{font-family:var(--font-family)}html,body{font-family:var(--theme-font-family);background-color:var(--theme-background-color)!important;color:var(--text-color)!important;width:100%;min-height:100%;height:100%;padding:0;margin:0}body:not(.production) *:not(:defined){border:1px solid red}.dark{filter:invert(1) hue-rotate(180deg)}.dark img,.dark dialog,.dark video,.dark iframe{filter:invert(1) hue-rotate(180deg)}html{font-size:14px}@media (max-width: 768px){html{font-size:18px}}@media (max-width: 480px){html{font-size:20px}}textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}:root{box-sizing:border-box;-moz-text-size-adjust:none;-webkit-text-size-adjust:none;text-size-adjust:none;line-height:1.2;-webkit-font-smoothing:antialiased}*,*:before,*:after{box-sizing:border-box}*{margin:0}body{-webkit-font-smoothing:antialiased;font-family:var(--font-family)}button,textarea,select{background-color:inherit;border-width:0;color:inherit}img,picture,video,canvas,svg{display:block;max-width:100%}input,button,textarea,select{font:inherit}p,h1,h2,h3,h4,h5,h6{font-family:var(--font-family);overflow-wrap:break-word}dialog::backdrop{background-color:#000c}*::-webkit-scrollbar{width:8px;margin-right:10px}*::-webkit-scrollbar-track{background:transparent}*::-webkit-scrollbar-thumb{&:hover{scrollbar-color:rgba(154,153,150,.8) transparent}border-radius:10px;border:none}*::-webkit-scrollbar-button{background:transparent;color:transparent}*{scrollbar-width:thin;scrollbar-color:transparent transparent;&:hover{scrollbar-color:rgba(154,153,150,.8) transparent}}[full]{width:100%;height:100vh}[w-full]{width:100%}[grow]{flex-grow:1}[hide],.hide{display:none!important}[noscroll]{overflow:hidden}div [container]{display:flex}div [container][horizontal]{display:flex;flex-direction:col}
`,metaType:"text/css"},"/modules/app/container.js":{content:`export default({routes:t,T:e})=>({tag:"app-container",class:"flex flex-grow",extends:"router-ui",properties:{routes:e.object({defaultValue:t}),full:e.boolean(!0)}});
`,metaType:"application/javascript"},"/modules/router/ui.js":{content:'export default({html:e,T:c})=>({tag:"router-ui",properties:{currentRoute:c.object({sync:"ram"})},renderRoute(t,n){const o=typeof t.component=="function"?t.component(n):t.component;return t.template?e.staticHTML`<${e.unsafeStatic(t.template)} .component=${o}>\n			</${e.unsafeStatic(t.template)}>`:o},render(){const{route:t,params:n}=this.currentRoute||{};return t?this.renderRoute(typeof t=="function"?{component:t}:t,n):e`404: Page not found`}});\n',metaType:"application/javascript"},"/modules/apps/admin/views/template.js":{content:`export default({T:e,html:a,$APP:t})=>({tag:"admin-template",properties:{component:e.object(),horizontal:e.boolean(!0),full:e.boolean(!0),currentRoute:e.object({sync:"ram"}),class:e.string("flex")},render(){const{modules:i}=t,o=i?Object.keys(t.settings).filter(l=>t.settings[l]?.appbar).map(l=>({...t.settings[l].appbar,label:l,href:\`/admin/\${l}\`})).map(l=>a\`
              <uix-button
                label=\${l.label}
                href=\${l.href}
                icon=\${l.icon}
                hideLabel
                tooltip
                vertical
                selectable
                ghost
                iconSize="lg"
                class="w-full"
              ></uix-button>
            \`):[];return a\`
      <div class="flex flex-col flex-shrink-0 justify-between bg-gray-100">
        <uix-navbar class="w-full flex flex-col">\${o}</uix-navbar>
        <uix-navbar class="w-full flex flex-col">
          <uix-darkmode
              hideLabel               
              tooltip
              vertical
              ghost
              iconSize="lg"
              label="Dark Mode"
              class="w-full"></uix-darkmode>            
          <uix-button
          icon="settings"
          hideLabel
          tooltip
          vertical
          ghost
          iconSize="lg"
          label="Settings"
          class="w-full"></uix-button>
          </uix-navbar>
      </div>
      <div class="flex flex-1 h-full">
        \${this.component}
      </div>
    \`}});
`,metaType:"application/javascript"},"/modules/uix/navigation/navbar.js":{content:`export default({T:e})=>({tag:"uix-navbar",style:!0,extends:"uix-list",properties:{join:e.boolean({defaultValue:!0}),docked:e.string()}});
`,metaType:"application/javascript"},"/modules/uix/display/button.js":{content:'export default({T:r})=>({tag:"uix-button",properties:{variant:r.string("default")},extends:"uix-link",style:!0,setVariant(){const{variant:t}=this;this.style.setProperty("--_variant-color-50",`var(--colors-${t}-50)`),this.style.setProperty("--_variant-color-300",`var(--colors-${t}-300)`),this.style.setProperty("--_variant-color-400",`var(--colors-${t}-400)`),this.style.setProperty("--_variant-color-500",`var(--colors-${t}-500)`),this.style.setProperty("--_variant-color-600",`var(--colors-${t}-600)`),this.style.setProperty("--_variant-color-700",`var(--colors-${t}-700)`),this.style.setProperty("--_variant-color-800",`var(--colors-${t}-800)`)},connected(){this.setVariant()},willUpdate(t){Object.keys(t).includes("variant")&&this.setVariant()}});\n',metaType:"application/javascript"},"/modules/uix/utility/darkmode.js":{content:`export default({T:t})=>({tag:"uix-darkmode",extends:"uix-button",icons:["moon","sun"],properties:{width:t.string({defaultValue:"fit"}),darkmode:t.boolean({sync:"local",defaultValue:!0})},click(o){o.stopPropagation(),this.darkmode=!this.darkmode,this.icon=this.darkmode?"sun":"moon"},willUpdate(o){console.log({changedProps:o}),Object.hasOwn(o,"darkmode")&&document.documentElement.classList.toggle("dark")},connected(){this.icon=this.darkmode?"sun":"moon",this.darkmode&&document.documentElement.classList.add("dark")}});
`,metaType:"application/javascript"},"/modules/uix/layout/list.js":{content:`export default({T:s})=>({tag:"uix-list",style:!0,properties:{multiple:s.boolean(),multipleWithCtrl:s.boolean(),multipleWithShift:s.boolean(),lastSelectedIndex:s.number(),selectedIds:s.array(),onSelectedChanged:s.function(),gap:s.string({defaultValue:"md"}),itemId:s.string(".uix-link"),selectable:s.boolean()},connected(){this.selectable&&this.addEventListener("click",this.handleClick.bind(this))},disconnected(){this.selectable&&this.removeEventListener("click",this.handleClick.bind(this))},handleClick:function(d){const e=d.target.closest(".uix-link");if(!e||!this.contains(e))return;d.preventDefault();const i=Array.from(this.qa(".uix-link")),t=i.indexOf(e);if(t!==-1){if(this.multipleWithShift&&d.shiftKey&&this.lastSelectedIndex!==null){const l=Math.min(this.lastSelectedIndex,t),c=Math.max(this.lastSelectedIndex,t);i.slice(l,c+1).forEach(n=>n.setAttribute("selected","")),this.lastSelectedIndex=t,this.updateSelectedIds();return}if(this.multipleWithCtrl){if(d.ctrlKey){e.hasAttribute("selected")?e.removeAttribute("selected"):e.setAttribute("selected",""),this.lastSelectedIndex=t,this.updateSelectedIds();return}i.forEach(l=>l.removeAttribute("selected")),e.hasAttribute("selected")?(e.removeAttribute("selected"),this.lastSelectedIndex=null):(e.setAttribute("selected",""),this.lastSelectedIndex=t),this.updateSelectedIds();return}if(this.multiple){e.hasAttribute("selected")?e.removeAttribute("selected"):e.setAttribute("selected",""),this.lastSelectedIndex=t,this.updateSelectedIds();return}e.hasAttribute("selected")?(i.forEach(l=>l.removeAttribute("selected")),this.lastSelectedIndex=null):(i.forEach(l=>l.removeAttribute("selected")),e.setAttribute("selected",""),this.lastSelectedIndex=t),this.updateSelectedIds()}},updateSelectedIds(){const d=Array.from(this.qa(this.itemId));this.selectedIds=d.reduce((e,i,t)=>(i.hasAttribute("selected")&&e.push(t),e),[]),this.onSelectedChanged&&this.onSelectedChanged(this.selectedIds)}});
`,metaType:"application/javascript"},"/modules/apps/bundler/views/ui.js":{content:`export default({T:i,html:t,$APP:s,Bundler:r})=>(s.define("credentials-manager",{class:"flex flex-col gap-4 p-4 border rounded-lg shadow-md bg-white",properties:{_row:i.object()},render(){return this._row?t\`
      <h2 class="text-2xl font-bold text-gray-800 border-b pb-2">
        Deployment Credentials
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <uix-input
          label="Owner"
          .value=\${this._row.owner}
          @change=\${e=>this._row.owner=e.target.value}
        ></uix-input>
        <uix-input
          label="Repository"
          .value=\${this._row.repo}
          @change=\${e=>this._row.repo=e.target.value}
        ></uix-input>
        <uix-input
          label="Branch"
          .value=\${this._row.branch}
          @change=\${e=>this._row.branch=e.target.value}
        ></uix-input>
        <uix-input
          label="GitHub Token"
          type="password"
          .value=\${this._row.token}
          @change=\${e=>this._row.token=e.target.value}
        ></uix-input>
      </div>
      <div class="flex justify-end">
        <uix-button
          @click=\${()=>!console.log(this._row)&&s.Model.credentials.edit({...this._row})}
          label="Save Credentials"
        ></uix-button>
      </div>
    \`:t\`<div class="text-center p-4">Loading credentials...</div>\`}}),s.define("release-creator",{class:"flex flex-col gap-4 p-4 border rounded-lg shadow-md bg-white",properties:{version:i.string(\`v\${new Date().toISOString().slice(0,10)}\`),notes:i.string(""),deploymentType:i.string(null)},async handleDeploy(e){this.deploymentType=e;const a=await s.Model.credentials.get("singleton");if(!a||!a.token){alert("Please provide a GitHub token before deploying."),this.deploymentType=null;return}let l;try{l=await s.Model.releases.add({version:this.version,notes:this.notes,status:"pending",deployedAt:new Date,deployType:e}),console.log({Bundler:r});const n=e==="spa"?await r.bundleSPA(a):await r.bundleSSG(a);await s.Model.releases.edit({...l,status:"success",files:n}),alert(\`Deployment (\${e.toUpperCase()}) successful!\`)}catch(n){console.error(\`Deployment failed for \${e.toUpperCase()}:\`,n),alert(\`Deployment failed: \${n.message}\`),l?._id&&await s.Model.releases.edit({...l,status:"failed"})}finally{this.deploymentType=null}},render(){return t\`
      <h2 class="text-2xl font-bold text-gray-800 border-b pb-2">
        New Release
      </h2>
      <uix-input
        label="Version"
        .value=\${this.version}
        @change=\${e=>this.version=e.target.value}
      ></uix-input>
      <uix-input
        type="textarea"
        label="Release Notes"
        .value=\${this.notes}
        @change=\${e=>this.notes=e.target.value}
      ></uix-input>
      <div class="flex justify-end gap-2">
        <uix-button
          @click=\${()=>this.handleDeploy("spa")}
          label=\${this.deploymentType==="spa"?"Deploying...":"Deploy SPA"}
          ?disabled=\${this.deploymentType!==null}
        ></uix-button>
        <uix-button
          @click=\${()=>this.handleDeploy("ssg")}
          label=\${this.deploymentType==="ssg"?"Deploying...":"Deploy SSG"}
          ?disabled=\${this.deploymentType!==null}
        ></uix-button>
      </div>
    \`}}),s.define("release-history",{class:"flex flex-col gap-4 p-4 border rounded-lg shadow-md bg-white",properties:{_rows:i.array()},getStatusClass(e){switch(e){case"success":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}},render(){return t\`
      <h2 class="text-2xl font-bold text-gray-800 border-b pb-2">
        Release History
      </h2>
      <div class="flex flex-col gap-3">
        \${this._rows&&this._rows.length>0?this._rows.sort((e,a)=>new Date(a.deployedAt)-new Date(e.deployedAt)).map(e=>t\`
                  <div
                    class="flex flex-col p-2 rounded-md \${this.getStatusClass(e.status)}"
                  >
                    <div class="grid grid-cols-3 items-center gap-2">
                      <div class="font-semibold">\${e.version}</div>
                      <div class="flex items-center gap-2">
                        <span>\${e.status}</span>
                        \${e.deployType?t\`<span
                                    class="text-xs font-mono px-2 py-1 rounded bg-gray-200 text-gray-700"
                                    >\${e.deployType.toUpperCase()}</span
                                  >\`:""}
                      </div>
                      <div class="text-sm text-right">
                        \${new Date(e.deployedAt).toLocaleString()}
                      </div>
                    </div>
                    \${e.notes?t\`<p class="text-sm text-gray-600 pt-2">
                                \${e.notes}
                              </p>\`:""}
                  </div>
                \`):t\`<p class="text-center text-gray-500">
                    No releases yet.
                  </p>\`}
      </div>
    \`}}),s.define("settings-editor",{class:"flex flex-col gap-4 p-4 border rounded-lg shadow-md bg-white",properties:{_settings:i.object(null)},connected(){this._settings=s.settings},async handleSave(){try{await s.settings.set(this._settings),alert("Settings saved successfully!")}catch(e){console.error("Failed to save settings:",e),alert("Error saving settings. Check the console for details.")}},render(){return this._settings?t\`
            <h2 class="text-2xl font-bold text-gray-800 border-b pb-2">
                App Settings
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <uix-input
                    label="App Name"
                    .value=\${this._settings.name}
                    @change=\${e=>this._settings.name=e.target.value}
                ></uix-input>
                <uix-input
                    label="Short Name"
                    .value=\${this._settings.short_name}
                    @change=\${e=>this._settings.short_name=e.target.value}
                ></uix-input>
                <uix-input
                    label="Start URL"
                    .value=\${this._settings.url}
                    @change=\${e=>this._settings.url=e.target.value}
                ></uix-input>
                 <uix-input
                    label="Theme Color"
                    type="color" 
                    .value=\${this._settings.theme_color}
                    @change=\${e=>this._settings.theme_color=e.target.value}
                ></uix-input>
                <uix-input
                    class="md:col-span-2"
                    label="Open Graph Image URL"
                    .value=\${this._settings.og_image}
                    @change=\${e=>this._settings.og_image=e.target.value}
                ></uix-input>
                <uix-input
                    class="md:col-span-2"
                    type="textarea"
                    label="Description"
                    .value=\${this._settings.description}
                    @change=\${e=>this._settings.description=e.target.value}
                ></uix-input>
            </div>
            <div class="flex justify-end">
                <uix-button
                    @click=\${this.handleSave.bind(this)}
                    label="Save Settings"
                ></uix-button>
            </div>
        \`:t\`<div class="text-center p-4">Loading settings...</div>\`}}),{tag:"bundler-ui",class:"flex flex-col gap-6 p-6 bg-gray-50 min-h-screen",render(){return t\`
            <h1 class="text-4xl font-extrabold text-gray-900">Release Manager</h1>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="flex flex-col gap-6">
                    <settings-editor></settings-editor> 
                    <credentials-manager
                        ._data=\${{model:"credentials",id:"singleton"}}
                    ></credentials-manager>
                    <release-creator></release-creator>
                </div>
                <release-history
                    ._data=\${{model:"releases",order:"-deployedAt"}}
                ></release-history>
            </div>
        \`}});
`,metaType:"application/javascript"},"/modules/uix/display/link.js":{content:'export default({T:t,html:n,Router:o})=>({tag:"uix-link",style:!0,properties:{content:t.object(),context:t.object(),external:t.boolean(),selectable:t.boolean(),skipRoute:t.boolean(),hideLabel:t.boolean(),accordion:t.boolean(),float:t.object(),tab:t.boolean(),tooltip:t.boolean(),dropdown:t.boolean(),direction:t.string(),name:t.string(),alt:t.string(),label:t.string(),type:t.string(),href:t.string(),related:t.string(),icon:t.string(),active:t.boolean(),reverse:t.boolean(),vertical:t.boolean(),selected:t.boolean(),floatOpen:t.boolean(),click:t.function(),confirmation:t.string()},connected(){this.boundHandleOutsideClick=this.handleOutsideClick.bind(this),this.boundHandleEscKey=this.handleEscKey.bind(this),this.context&&this.addEventListener("contextmenu",this.handleContextMenu)},disconnected(){this.removeEventListener("contextmenu",this.handleContextMenu),this._removeGlobalListeners()},_addGlobalListeners(){setTimeout(()=>{document.addEventListener("click",this.boundHandleOutsideClick),document.addEventListener("keydown",this.boundHandleEscKey)},0)},_removeGlobalListeners(){document.removeEventListener("click",this.boundHandleOutsideClick),document.removeEventListener("keydown",this.boundHandleEscKey)},closeAllPopups(){let e=!1;this.hasAttribute("selected")&&(this.removeAttribute("selected"),e=!0);const i=this.q("[context]");i?.hasAttribute("open")&&(i.removeAttribute("open"),e=!0),this.hasAttribute("floatOpen")&&(this.removeAttribute("floatOpen"),e=!0),e&&this._removeGlobalListeners()},defaultOnClick(e){if(e.ctrlKey||e.metaKey||e.shiftKey||e.button===1)return;const i=e.currentTarget,s=this.href&&i.origin===window.location.origin&&!this.external,l=this.dropdown||this.accordion||this.tab;if((!this.href||s||l||this.float)&&e.preventDefault(),this.float){this.toggleAttribute("floatOpen"),this.hasAttribute("floatOpen")?this._addGlobalListeners():this._removeGlobalListeners();return}if(s&&!this.skipRoute){const a=[i.pathname,i.search].filter(Boolean).join("");l?o.push(a):o.go(a);return}this.click&&this.type!=="submit"&&(this.confirmation?window.confirm(this.confirmation)&&this.click(e):this.click(e),e.stopImmediatePropagation()),this.dropdown&&(this.toggleAttribute("selected"),this.hasAttribute("selected")?this._addGlobalListeners():this._removeGlobalListeners())},handleContextMenu(e){e.preventDefault();const i=this.q("[context]");i&&(i.toggleAttribute("open"),i.hasAttribute("open")?this._addGlobalListeners():this._removeGlobalListeners())},handleOutsideClick(e){const i=this.q("[dropdown], [context], [float]")?.contains(e.target)&&e.target.closest("a");(!this.contains(e.target)||i)&&this.closeAllPopups()},handleEscKey(e){e.key==="Escape"&&(e.preventDefault(),this.closeAllPopups())},render(){return n`<a\n            class=${this.icon?"uix-text-icon__element":void 0}\n            content\n            href=${this.href}\n            @click=${this.defaultOnClick.bind(this)}\n            related=${this.related}\n            name=${this.name||this.label||this.alt}\n            alt=${this.alt||this.label||this.name}\n        >\n            ${this.icon?n`<uix-icon\n                          name=${this.icon}\n                          alt=${this.alt||this.label||this.name}\n                          size=${this.iconSize||this.size}\n                      ></uix-icon>`:""}\n            ${this.hideLabel?null:this.label}\n        </a>\n        ${this.dropdown?n`<div dropdown>${this.dropdown}</div>`:null}\n        ${this.context?n`<div context>${this.context}</div>`:null}\n        ${this.accordion?n`<div accordion>${this.accordion}</div>`:null}\n        ${this.tooltip?n`<div tooltip>${this.tooltip===!0?this.label:this.tooltip}</div>`:null}\n        ${this.float?n`<div float>${this.float}</div>`:null}\n    `}});\n',metaType:"application/javascript"},"/modules/uix/layout/list.css":{content:`.uix-list{display:flex;&[vertical]{flex-direction:column}}
`,metaType:"text/css"},"/modules/uix/navigation/navbar.css":{content:`.uix-navbar{--uix-navbar-text-color: var(--color-default-90);--uix-navbar-hover-text-color: var(--color-surface-80);--uix-navbar-border-radius: 0px;--uix-navbar-border-color: var(--color-default-60);--uix-navbar-border-size: 1px;--uix-navbar-border-style: solid;--uix-navbar-hover-background-color: var(--color-default-40);--uix-container-position: var(--uix-navbar-position);display:flex;flex-direction:column;&[docked]{--uix-list-button-radius: 0;border-bottom:0;position:fixed;bottom:0;background-color:var(--uix-navbar-background-color, var(--color-default-5));>*{border-right:0;border-bottom:0;&:first-child{border-left:0}}}}
`,metaType:"text/css"},"/modules/uix/display/link.css":{content:`:where(.uix-link){font-weight:var(--uix-link-font-weight, 600);width:var(--uix-link-width, auto);color:var(--uix-link-text-color, var(--colors-default-900));--uix-link-indent: 0;cursor:pointer;&[vertical]{margin:0 auto}a,button{width:inherit;cursor:pointer;padding:var(--uix-link-padding);&:hover{color:var(--uix-link-hover-color, var(--uix-link-text-color))}}.uix-text-icon__element{display:flex;align-items:center;gap:var(--uix-link-icon-gap, .5rem);&[reverse][vertical]{flex-direction:column-reverse}&:not([reverse])[vertical]{flex-direction:column}&[reverse]:not([vertical]){flex-direction:row-reverse}&:not([reverse]):not([vertical]){flex-direction:row}}transition:all .3s ease-in-out;&[indent]{>a,>button{padding-left:var(--uix-link-indent)}}&[active]:hover{color:var(--uix-link-hover-text-color, var(--colors-primary-400))}&[selectable][selected]{background-color:var(--colors-primary-400)}&:hover{[tooltip]{display:flex}}&[tooltip]{display:inline-block;&:hover{[tooltip]{visibility:visible}}[tooltip]{visibility:hidden;width:120px;background-color:#000;color:#fff;text-align:center;border-radius:6px;padding:5px 10px;margin-left:3px;position:absolute;z-index:1000000000;top:50%;left:100%;transform:translateY(-50%)}}&[position~=top] [tooltip]{bottom:100%;left:50%;transform:translate(-50%)}&[position~=bottom] [tooltip]{top:100%;left:50%;transform:translate(-50%)}&[position~=left] [tooltip]{top:50%;right:100%;transform:translateY(-50%)}&[tooltip],&[dropdown],&[context],&[float]{position:relative}&[dropdown],&[accordion]{flex-direction:column}[float],[dropdown],[accordion],[context]{display:none}&[floatopen]>a{display:none}&[floatopen] [float]{display:block;position:relative;bottom:0;right:0}&[context]{z-index:auto}[context][open]{display:flex;flex-direction:column}[dropdown],[context][open]{position:absolute;left:0;top:100%;width:100%;min-width:200px;z-index:1000;background-color:var(--colors-primary-100);box-shadow:0 8px 16px #0003;.uix-link:hover,input{background-color:var(--colors-primary-200)}>.uix-link{width:100%}}[context][open]{display:flex}&[selected]{[dropdown],[accordion]{display:flex;flex-direction:column}}}
`,metaType:"text/css"},"/modules/uix/display/button.css":{content:`:where(.uix-button){border:var(--uix-button-borderSize, 0) solid var(--uix-button-borderColor);border-radius:var(--uix-button-borderRadius, var(--radius-md));box-shadow:var(--uix-button-shadow);width:var(--uix-button-width);min-width:fit-content;background-color:var(--uix-button-backgroundColor, black);color:var(--uix-button-textColor, var(--colors-default-100));font-weight:var(--uix-button-fontWeight, 700);display:flex;text-align:center;transition:transform .2s ease-in-out,opacity .2s ease-in-out,background-color .2s ease-in-out;&:hover{opacity:var(--uix-button-hover-opacity, .4)}&:active{transform:scale(.97)}>button,>a,>input{width:max-content;display:block;border-radius:inherit;cursor:var(--uix-button-cursor, pointer);height:calc(var(--spacing) * 10);line-height:calc(var(--spacing) * 5);padding:var( --uix-button-padding, calc(var(--spacing) * 2.5) calc(var(--spacing) * 4) );word-break:keep-all;flex-basis:100%}.uix-icon,button,input,a{cursor:pointer}&[bordered]{--uix-button-border-size: 1px;--uix-button-backgroundColor: transparent;--uix-button-hoverBackgroundColor: var(--_variant-color-300);--uix-button-borderColor: var(--_variant-color-400);--uix-button-textColor: var(--_variant-color-700)}&[ghost]{--uix-button-backgroundColor: transparent;--uix-button-hoverBackgroundColor: var(--_variant-color-300);--uix-button-borderSize: 0px;--uix-button-textColor: var(--_variant-color-700)}&[outline]{--uix-button-backgroundColor: transparent;--uix-button-hoverBackgroundColor: var(--_variant-color-300);--uix-button-textColor: var(--_variant-color-800);--uix-button-borderSize: 1px;--uix-button-borderColor: var(--_variant-color-400)}&[float]{background-color:#000;--uix-button-hoverBackgroundColor: var(--_variant-color-500);--uix-button-textColor: var(--_variant-color-50);--uix-button-borderSize: 0px;--uix-button-borderRadius: 9999px;--uix-button-width: var(--uix-button-height);box-shadow:var(--shadow-md, 0 4px 6px -1px rgb(0 0 0 / .1));--uix-button-padding: .5rem}&[float]:hover{box-shadow:var(--shadow-lg, 0 10px 15px -3px rgb(0 0 0 / .1))}}
`,metaType:"text/css"},"/modules/uix/form/input.js":{content:'import{ifDefined as a}from"/modules/mvc/view/html/directive.js";const x={string:"text"};let V=0;export default({T:i,html:s})=>({tag:"uix-input",style:!0,properties:{bind:i.object({attribute:!1}),autofocus:i.boolean(),value:i.string(),placeholder:i.string(),name:i.string(),label:i.string(),disabled:i.boolean(),required:i.boolean(),type:i.string({defaultValue:"text",enum:["text","textarea","select","password","email","number","decimal","search","tel","url","checkbox","radio"]}),options:i.array({defaultValue:[]}),checked:i.boolean(),selected:i.boolean(),regex:i.string(),maxLength:i.string(),rows:i.number({defaultValue:4}),keydown:i.function(),input:i.function(),icon:i.string()},formAssociated:!0,formResetCallback(){const e=this.getInput();e&&(["submit","button","reset"].includes(e.type)||(e.value=this._defaultValue||""),["radio","checkbox","switch"].includes(e.type)&&(e.checked=this._defaultValue||!1),this.value=this.isCheckable?e.checked:e.value,this._updateHasValue())},formDisabledCallback(e){const t=this.getInput();t&&(t.disabled=e)},formStateRestoreCallback(e){const t=this.getInput();t&&(t.value=e),this.value=e,this._updateHasValue()},reportValidity(){const e=this.getInput();if(!e)return!0;const t=e.reportValidity()!==!1;return e?.classList.toggle("input-error",!t),t},getInput(){return this.$input||(this.$input=this.querySelector("input, select, textarea"),this.$input&&this._internals.setValidity(this.$input.validity,this.$input.validationMessage,this.$input)),this.$input},connected(){this._internals=this.attachInternals(),this.fieldId=`uix-input-${++V}`,this.isCheckable=this.type==="checkbox"||this.type==="radio",this.name||(this.name=this.label?`uix-input-${this.label.toLowerCase().replace(/\\s+/g,"-")}`:this.fieldId),this.placeholder=this.placeholder||" ",this.bind&&(this.value=this.bind.value,this.bind.instance&&this.bind.instance.on(`${this.bind.prop}Changed`,({value:e})=>{this.setValue(e)})),this._updateHasValue()},_updateHasValue(){if(this.isCheckable){this.classList.remove("has-value");return}const e=this.value!==null&&this.value!==void 0&&this.value!=="";this.classList.toggle("has-value",e)},_onInput(e){const{target:t}=e,l=this.isCheckable?t.checked:t.value;this.value!==l&&(this.value=l,this._updateHasValue(),this.bind&&this.bind.setValue(this.value),this.input&&this.input(e))},inputValue(){const e=this.getInput();return e?this.isCheckable?e.checked:e.value:void 0},setValue(e){const t=this.getInput();t&&(this.isCheckable?t.checked=!!e:t.value=e),this.bind&&(this.bind.value=e),this.value=e,this._updateHasValue(),this.requestUpdate()},resetValue(){const e=this.getInput();e&&(this.isCheckable?e.checked=!1:e.value=""),this.value=this.isCheckable?!1:"",this.bind&&(this.bind.value=this.value),this._updateHasValue(),this.requestUpdate()},render(){const{fieldId:e,name:t,type:l,label:p,value:u="",placeholder:h,rows:v,regex:g,autofocus:c,required:d,disabled:o,maxLength:b,keydown:$,icon:f,options:k}=this;let r;switch(l){case"textarea":r=s`\n                    <textarea\n                        id=${e}\n                        name=${t}\n                        placeholder=${a(h)}\n                        ?autofocus=${c}\n                        ?disabled=${o}\n                        ?required=${d}\n                        maxLength=${a(b)}\n                        @input=${this._onInput.bind(this)}\n                        @keydown=${a($)}\n                        rows=${v}\n                    >${u}</textarea>`;break;case"select":r=s`\n									<div class="select-container">\n											<select\n												id=${e}\n												name=${t}\n												value=${u}\n												?disabled=${o}\n												?required=${d}\n												?autofocus=${c}\n												@change=${this._onInput.bind(this)}>\n													${h&&!u?s`<option value="" disabled selected hidden>${h}</option>`:""}\n													${k.map(n=>s`\n															<option value=${n.value??n} ?selected=${(n.value??n)===this.value}>\n																	${n.label??n}\n															</option>\n													`)}\n											</select>\n											<uix-icon name="chevron-down" class="select-arrow"></uix-icon>\n										</div>\n										`;break;default:r=s`\n                    <input\n                        id=${e}\n                        name=${t}\n                        type=${x[l]||l}\n                        .value=${u}\n                        placeholder=${a(h)}\n                        ?autofocus=${c}\n                        maxLength=${a(b)}\n                        @input=${this._onInput.bind(this)}\n                        @keydown=${a($)}\n                        ?disabled=${o}\n                        ?required=${d}\n                        pattern=${a(g)}\n                        ?checked=${this.isCheckable&&!!this.value}\n                    />`;break}return s`\n            ${p?s`<label for=${e} ?required=${d}>${p}</label>`:""}\n            ${r}\n            ${f?s`<uix-icon name=${f} class="input-icon"></uix-icon>`:""}\n        `}});\n',metaType:"application/javascript"},"/modules/uix/display/icon.js":{content:'export default({T:s,html:n,$APP:l,Icons:i,theme:o})=>({tag:"uix-icon",style:!0,properties:{name:s.string(),svg:s.string(),solid:s.boolean()},async getIcon(t){if(i.has(t))this.svg=i.get(t);else try{const e=await fetch(l.fs.getFilePath(`modules/icon-${o.font.icon.family}/${o.font.icon.family}/${t}.svg`));if(e.ok){const r=await e.text();i.set(t,r),this.svg=r}else console.error(`Failed to fetch icon: ${t}`)}catch(e){console.error(`Error fetching icon: ${t}`,e)}},willUpdate(){this.name&&this.getIcon(this.name)},render(){return this.svg?n.unsafeHTML(this.svg):null}});\n',metaType:"application/javascript"},"/modules/uix/display/icon.css":{content:`.uix-icon{display:inline-block;vertical-align:middle;svg{height:inherit;width:inherit}}&[solid]{stroke:currentColor;fill:currentColor}
`,metaType:"text/css"},"/modules/mvc/view/html/directive.js":{content:'export const directive=r=>(...e)=>({_$litDirective$:r,values:e});export class Directive{__part;__attributeIndex;__directive;_$parent;_$disconnectableChildren;_$notifyDirectiveConnectionChanged;constructor(e){}get _$isConnected(){return this._$parent._$isConnected}_$initialize(e,t,n){this.__part=e,this._$parent=t,this.__attributeIndex=n}_$resolve(e,t){return this.update(e,t)}render(...e){throw new Error("The `render()` method must be implemented.")}update(e,t){return this.render(...t)}}const o={},s=(r,e=o)=>r._$committedValue=e,i=Symbol.for("lit-nothing");class d extends Directive{key=i;render(e,t){return this.key=e,t}update(e,[t,n]){return t!==this.key&&(s(e),this.key=t),n}}export const keyed=directive(d),ifDefined=r=>r??i;\n',metaType:"application/javascript"},"/modules/icon-lucide/lucide/folder.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/code.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m16 18l6-6l-6-6M8 6l-6 6l6 6"/></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/message-circle.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/cog.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M12 20a8 8 0 1 0 0-16a8 8 0 0 0 0 16"/><path d="M12 14a2 2 0 1 0 0-4a2 2 0 0 0 0 4m0-12v2m0 18v-2m5 .66l-1-1.73m-5-8.66L7 3.34M20.66 17l-1.73-1M3.34 7l1.73 1M14 12h8M2 12h2m16.66-5l-1.73 1M3.34 17l1.73-1M17 3.34l-1 1.73m-5 8.66l-4 6.93"/></g></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/square-mouse-pointer.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z"/><path d="M21 11V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6"/></g></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/database.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M3 5v14a9 3 0 0 0 18 0V5"/><path d="M3 12a9 3 0 0 0 18 0"/></g></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/server-cog.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M4.5 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-.5m-15 4H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-.5M6 6h.01M6 18h.01m9.69-4.6l-.9-.3m-5.6-2.2l-.9-.3m2.3 5.1l.3-.9m2.7.9l-.4-1m-2.4-5.4l-.4-1m-2.1 5.3l1-.4m5.4-2.4l1-.4m-2.3-2.1l-.3.9"/></g></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/bot-message-square.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V2H8m0 16l-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Zm-6-6h2m5-1v2m6-2v2m5-1h2"/></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/sun.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="4"/><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></g></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/settings.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2"/><circle cx="12" cy="12" r="3"/></g></svg>',metaType:"image/svg+xml"},"/modules/uix/form/input.css":{content:`:where(.uix-input){--uix-input-background-color: var(--colors-surface-100);--uix-input-border-color: var(--colors-gray-900);--uix-input-text-color: var(--colors-gray-900);--uix-input-placeholder-color: var(--colors-default-500);--uix-input-border-radius: var(--border-radius-md);--uix-input-border-width: 2px;--uix-input-padding-x: calc(var(--spacing) * 4);--uix-input-padding-y: calc(var(--spacing) * 2.5);--uix-input-font-size: var(--font-size-base);--uix-input-height: 2.5rem;--uix-input-disabled-opacity: .6;--uix-input-label-font-size: var(--font-size-sm);--uix-input-label-font-weight: var(--font-weight-bold);--uix-input-label-color: var(--colors-default-700);--uix-input-checkbox-size: 1.5rem;--uix-input-checkbox-border-radius: var(--border-radius-sm);--uix-input-checkbox-checked-bg: var(--colors-primary-600);--uix-input-checkbox-check-color: var(--colors-surface-100);width:100%;display:flex;flex-direction:column;input,select,textarea{width:100%;height:var(--uix-input-height);border-radius:var(--uix-input-border-radius);border:var(--uix-input-border-width) solid var(--uix-input-border-color);font-size:var(--uix-input-font-size);background-color:var(--uix-input-background-color);color:var(--uix-input-text-color);transition:var(--uix-transition);outline:none;padding:var(--uix-input-padding-y) var(--uix-input-padding-x)}textarea{resize:vertical}&:has(textarea){height:auto}select{appearance:none;-webkit-appearance:none;cursor:pointer;font-weight:600;padding-block:0;option{font-weight:600;background-color:var(--uix-input-background-color);font-size:1.1rem;line-height:1.5rem;color:#333;padding:50px;border:2px solid red}}.select-container{position:relative;.select-arrow{position:absolute;right:calc(2 * var(--spacing))}}input::placeholder{color:transparent}label{font-weight:var(--uix-input-label-font-weight);color:var(--uix-input-label-color, var(--colors-gray-600));margin-bottom:var(--spacing);font-size:.9rem;padding:0 4px;transition:all .2s ease-in-out;pointer-events:none;&[required]:after{content:"*";color:var(--colors-danger-500);margin-left:2px}}input:not(:placeholder-shown)+label,textarea:not(:placeholder-shown)+label,&:focus-within label,&.has-value label{top:-2px;transform:translateY(0);font-size:var(--uix-input-label-font-size)}&:focus-within input,&:focus-within select,&:focus-within textarea{box-shadow:0 0 var(--uix-input-focus-ring-width, 5px) var(--uix-input-focus-ring-color, rgba(0, 0, 255, .5))}&[disabled]{cursor:not-allowed;opacity:var(--uix-input-disabled-opacity);& label{cursor:not-allowed}}.input-icon,.select-arrow{position:absolute;top:50%;right:var(--spacing);transform:translateY(-50%);pointer-events:none;color:var(--uix-input-label-color);transition:transform .2s ease-in-out}&:has(select:hover:active) .select-arrow{transform:translateY(-50%) rotate(180deg)}&:has(.input-icon:not(.select-arrow))>input{padding-right:calc(var(--uix-input-padding-x) + 1.75em)}&[type=checkbox],&[type=radio]{flex-direction:row;align-items:center;border:0;height:auto;width:auto;background-color:transparent;box-shadow:none;gap:.75rem;cursor:pointer;label{margin:0;line-height:1.5rem;position:static;transform:none;background-color:transparent;padding:0;cursor:pointer;font-weight:var(--font-weight-normal);order:2;pointer-events:auto}input{appearance:none;-webkit-appearance:none;width:var(--uix-input-checkbox-size);height:var(--uix-input-checkbox-size);margin:0;border:var(--uix-input-border-width) solid var(--uix-input-border-color);background-color:var(--uix-input-background-color);cursor:pointer;position:relative;transition:var(--uix-transition);padding:0;&:after{content:"";position:absolute;display:none;left:50%;top:50%}&:checked{background-color:var(--uix-input-checkbox-checked-bg);border-color:var(--uix-input-checkbox-checked-bg);&:after{display:block}}&:focus-visible{box-shadow:0 0 0 var(--uix-input-focus-ring-width) var(--uix-input-focus-ring-color);border-color:var(--uix-input-focus-ring-color)}}}&[type=checkbox] input:after{width:.375rem;height:.75rem;border:solid var(--uix-input-checkbox-check-color);border-width:0 2px 2px 0;transform:translate(-50%,-60%) rotate(45deg)}&[type=radio] input{border-radius:var(--border-radius-full);&:after{width:calc(var(--uix-input-checkbox-size) / 2);height:calc(var(--uix-input-checkbox-size) / 2);border-radius:var(--border-radius-full);background-color:var(--uix-input-checkbox-check-color);transform:translate(-50%,-50%)}}&[ghost]{&:focus-within select{box-shadow:none}.select-arrow{margin-left:5px;padding-left:5px}select{background:inherit;border:0}}}
`,metaType:"text/css"},"/modules/icon-lucide/lucide/chevron-right.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 18l6-6l-6-6"/></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/layout-dashboard.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></g></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/wrench.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/terminal.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m4 17l6-6l-6-6m8 14h8"/></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/git-branch-plus.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M6 3v12m12-6a3 3 0 1 0 0-6a3 3 0 0 0 0 6M6 21a3 3 0 1 0 0-6a3 3 0 0 0 0 6"/><path d="M15 6a9 9 0 0 0-9 9m12 0v6m3-3h-6"/></g></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/key.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m15.5 7.5l2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4m2-2l-9.6 9.6"/><circle cx="7.5" cy="15.5" r="5.5"/></g></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/file-text.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4M10 9H8m8 4H8m8 4H8"/></g></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/file-code-2.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"/><path d="M14 2v4a2 2 0 0 0 2 2h4M5 12l-3 3l3 3m4 0l3-3l-3-3"/></g></svg>',metaType:"image/svg+xml"},"/modules/apps/mcp/views/roots.js":{content:`export default({html:o,AI:e,T:s})=>({properties:{roots:s.array([]),isLoading:s.boolean(!0),newRootPath:s.string(""),errorMessage:s.string("")},connected(){this.loadRoots()},async loadRoots(){this.isLoading=!0,this.errorMessage="";try{const t=e.listClients();if(t&&t.length>0){const{roots:r}=await e.listRoots();this.roots=r||[]}}catch(t){console.error("Error loading roots:",t),this.errorMessage="Failed to load roots.",this.roots=[]}finally{this.isLoading=!1}},handleInput(t){this.newRootPath=t.target.value},async addRoot(){if(this.newRootPath.trim()){this.errorMessage="";try{const t=e.listClients();t&&t.length>0&&(await e.addRoot({path:this.newRootPath}),this.newRootPath="",await this.loadRoots())}catch(t){console.error("Error adding root:",t),this.errorMessage=\`Failed to add root: \${t.message}\`}}},render(){return o\`
                <div class="flex flex-col h-full bg-white border border-gray-200 rounded-lg p-6">
                    <h3 class="font-semibold text-lg mb-4">Manage Roots</h3>
                    <div class="mb-4 flex items-center gap-2">
                        <uix-input
                            class="flex-grow font-mono text-sm"
                            placeholder="Enter new root path..."
                            .value=\${this.newRootPath}
                            @input=\${this.handleInput.bind(this)}
                        ></uix-input>
                        <uix-button
                            label="Add Root"
                            class="is-primary"
                            @click=\${this.addRoot.bind(this)}
                        ></uix-button>
                    </div>

                    \${this.errorMessage?o\`<p class="text-xs text-red-600 mb-4">\${this.errorMessage}</p>\`:""}

                    <div class="flex-grow border rounded-lg overflow-y-auto bg-gray-50">
                        \${this.isLoading?o\`<p class="text-center text-gray-500 p-8">Loading roots...</p>\`:this.roots.length>0?o\`
                                <ul class="divide-y divide-gray-200">
                                    \${this.roots.map(t=>o\`
                                            <li class="p-3 font-mono text-xs text-gray-700">\${t.path}</li>
                                        \`)}
                                </ul>\`:o\`<p class="text-center text-gray-400 p-8">No roots have been added yet.</p>\`}
                    </div>
                </div>
            \`}});
`,metaType:"application/javascript"},"/modules/icon-lucide/lucide/arrow-left.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m12 19l-7-7l7-7m7 7H5"/></svg>',metaType:"image/svg+xml"},"/templates/servers/basic.js":{content:'import{McpServer as h,ResourceTemplate as p}from"@modelcontextprotocol/sdk/server/mcp.js";import c from"zod";export default()=>{const l=new h({name:"example-server",version:"0.1.0"},{capabilities:{tools:{},resources:{subscribe:!0},logging:{},prompts:{},sampling:{},elicitation:{}}}),n={users:[{id:1,name:"Alice",email:"alice@example.com",role:"admin"},{id:2,name:"Bob",email:"bob@example.com",role:"user"},{id:3,name:"Charlie",email:"charlie@example.com",role:"user"}],posts:[{id:1,title:"Welcome Post",content:"Welcome to our platform!",authorId:1},{id:2,title:"Getting Started",content:"Here\'s how to get started...",authorId:1}],settings:{theme:"dark",language:"en",notifications:!0,maxUsers:100}},d=new Set;return l.registerTool("echo",{title:"Echo Tool",description:"Echo back the input text with optional formatting",inputSchema:{text:c.string().describe("Text to echo back"),uppercase:c.boolean().optional().describe("Convert to uppercase"),repeat:c.number().min(1).max(5).optional().default(1).describe("Number of times to repeat")}},async({text:s,uppercase:r=!1,repeat:i=1})=>{let e=r?s.toUpperCase():s;return e=Array(i).fill(e).join(" | "),{content:[{type:"text",text:`Echo: ${e}`}]}}),l.registerTool("calculate",{title:"Calculator",description:"Perform basic mathematical operations",inputSchema:{operation:c.enum(["add","subtract","multiply","divide","power"]).describe("Mathematical operation to perform"),a:c.number().describe("First number"),b:c.number().describe("Second number")}},async({operation:s,a:r,b:i})=>{let e;switch(s){case"add":e=r+i;break;case"subtract":e=r-i;break;case"multiply":e=r*i;break;case"divide":if(i===0)throw new Error("Division by zero is not allowed");e=r/i;break;case"power":e=r**i;break}return{content:[{type:"text",text:`${r} ${s} ${i} = ${e}`}]}}),l.registerTool("manage_user",{title:"User Management",description:"Create, update, or delete users",inputSchema:{action:c.enum(["create","update","delete","list"]).describe("Action to perform"),userId:c.number().optional().describe("User ID (required for update/delete)"),name:c.string().optional().describe("User name (required for create)"),email:c.string().email().optional().describe("User email (required for create)"),role:c.enum(["admin","user"]).optional().describe("User role")}},async({action:s,userId:r,name:i,email:e,role:a})=>{switch(s){case"list":return{content:[{type:"text",text:`Users:\n${n.users.map(o=>`${o.id}: ${o.name} (${o.email}) - ${o.role}`).join(`\n`)}`}]};case"create":{if(!i||!e)throw new Error("Name and email are required for creating a user");const o={id:Math.max(...n.users.map(t=>t.id))+1,name:i,email:e,role:a||"user"};return n.users.push(o),d.has("data://users")&&l.notifyResourceUpdated("data://users"),{content:[{type:"text",text:`Created user: ${o.name} (ID: ${o.id})`}]}}case"update":{if(!r)throw new Error("User ID is required for updating");const o=n.users.findIndex(t=>t.id===r);if(o===-1)throw new Error(`User with ID ${r} not found`);return i&&(n.users[o].name=i),e&&(n.users[o].email=e),a&&(n.users[o].role=a),d.has("data://users")&&l.notifyResourceUpdated("data://users"),d.has(`data://users/${r}`)&&l.notifyResourceUpdated(`data://users/${r}`),{content:[{type:"text",text:`Updated user: ${n.users[o].name}`}]}}case"delete":{if(!r)throw new Error("User ID is required for deletion");const o=n.users.findIndex(u=>u.id===r);if(o===-1)throw new Error(`User with ID ${r} not found`);const t=n.users.splice(o,1)[0];return d.has("data://users")&&l.notifyResourceUpdated("data://users"),{content:[{type:"text",text:`Deleted user: ${t.name}`}]}}}}),l.registerTool("delete_user_with_confirmation",{title:"Delete User with Confirmation",description:"Deletes a user after confirming with the user",inputSchema:{userId:c.number().describe("ID of the user to delete"),force:c.boolean().optional().describe("Skip confirmation if true (default: false)")}},async({userId:s,force:r=!1})=>{const i=n.users.findIndex(a=>a.id===s);if(i===-1)throw new Error(`User with ID ${s} not found`);const e=n.users[i];if(!r){const a=await l.server.elicitInput({message:`Are you sure you want to delete user "${e.name}" (${e.email})?`,requestedSchema:{type:"object",properties:{confirm:{type:"boolean",title:"Confirm deletion",description:`Confirm deletion of user "${e.name}"`},transferPosts:{type:"boolean",title:"Transfer posts",description:"Transfer user\'s posts to another user",default:!1},newAuthorId:{type:"number",title:"New author ID",description:"ID of user to transfer posts to (if transferring)"}},required:["confirm"]}});if(a.action!=="accept"||!a.content?.confirm)return{content:[{type:"text",text:`Deletion cancelled by user for ${e.name}`}]};if(a.content?.transferPosts&&a.content?.newAuthorId){const o=n.users.find(t=>t.id===a.content.newAuthorId);o&&(n.posts.forEach(t=>{t.authorId===s&&(t.authorId=a.content.newAuthorId)}),await l.sendLoggingMessage({level:"info",data:`Transferred posts from ${e.name} to ${o.name}`}))}}return n.users.splice(i,1),d.has("data://users")&&l.notifyResourceUpdated("data://users"),{content:[{type:"text",text:`Successfully deleted user: ${e.name}`}]}}),l.registerTool("generate_post",{title:"Generate Post Content",description:"Uses AI to generate a blog post with the specified parameters",inputSchema:{title:c.string().describe("Title of the post"),authorId:c.number().describe("ID of the author"),topic:c.string().optional().describe("Topic or theme for the post"),style:c.enum(["professional","casual","technical","creative"]).optional().default("professional").describe("Writing style for the post")}},async({title:s,authorId:r,topic:i,style:e="professional"})=>{const a=n.users.find(t=>t.id===r);if(!a)throw new Error(`Author with ID ${r} not found`);let o=`Write a blog post with the title "${s}"`;i&&(o+=` about ${i}`),o+=`. Use a ${e} writing style. Keep it concise (2-3 paragraphs).`;try{const t=await l.server.createMessage({messages:[{role:"user",content:{type:"text",text:o}}],maxTokens:500,temperature:e==="creative"?.8:.3});let u="";if(t.content.type==="text")u=t.content.text;else throw new Error("Failed to generate text content");const m={id:Math.max(...n.posts.map(f=>f.id))+1,title:s,content:u,authorId:r};return n.posts.push(m),d.has("data://posts")&&l.notifyResourceUpdated("data://posts"),await l.sendLoggingMessage({level:"info",data:`Generated post "${s}" for author ${a.name} in ${e} style`}),{content:[{type:"text",text:`Successfully generated post "${s}" (ID: ${m.id})\n\nContent preview:\n${u.substring(0,200)}${u.length>200?"...":""}`}]}}catch(t){throw await l.sendLoggingMessage({level:"error",data:`Failed to generate post: ${t.message}`}),new Error(`Post generation failed: ${t.message}`)}}),l.registerTool("slow_task",{title:"Slow Task Simulator",description:"Simulates a long-running task with progress updates",inputSchema:{taskName:c.string().describe("Name of the task to simulate"),duration:c.number().min(1).max(10).describe("Duration in seconds")}},async({taskName:s,duration:r},{progress:i})=>{await l.sendLoggingMessage({level:"info",data:`Starting task: ${s} (${r}s)`});const e=r*2;for(let a=1;a<=e;a++)await new Promise(o=>setTimeout(o,500)),i({progress:a,total:e});return await l.sendLoggingMessage({level:"info",data:`Completed task: ${s}`}),{content:[{type:"text",text:`Task "${s}" completed successfully after ${r} seconds!`}]}}),l.registerResource("config","config://app",{title:"App Configuration",description:"Application configuration settings",mimeType:"application/json"},async s=>({contents:[{uri:s.href,mimeType:"application/json",text:JSON.stringify({name:"MCP Dev Server",version:"1.0.0",features:["tools","resources","templates"],status:"active",...n.settings},null,2)}]})),l.registerResource("data_users","data://users",{title:"Users List",description:"List of all users in the system",mimeType:"application/json"},async s=>({contents:[{uri:s.href,mimeType:"application/json",text:JSON.stringify(n.users,null,2)}]})),l.registerResource("data_posts","data://posts",{title:"Posts List",description:"List of all posts in the system",mimeType:"application/json"},async s=>({contents:[{uri:s.href,mimeType:"application/json",text:JSON.stringify(n.posts,null,2)}]})),l.registerResource("data_users_template",new p("data://users/{id}",{list:void 0}),{title:"User Resource",description:"Individual user data by ID"},async(s,{id:r})=>{const i=Number.parseInt(r),e=n.users.find(t=>t.id===i);if(!e)throw new Error(`User with ID ${i} not found`);const a=n.posts.filter(t=>t.authorId===i),o={...e,posts:a};return{contents:[{uri:s.href,mimeType:"application/json",text:JSON.stringify(o,null,2)}]}}),l.registerResource("data_posts_template",new p("data://posts/{id}",{list:void 0}),{title:"Post Resource",description:"Individual post data by ID"},async(s,{id:r})=>{const i=Number.parseInt(r),e=n.posts.find(t=>t.id===i);if(!e)throw new Error(`Post with ID ${i} not found`);const a=n.users.find(t=>t.id===e.authorId),o={...e,author:a?{name:a.name,email:a.email}:null};return{contents:[{uri:s.href,mimeType:"application/json",text:JSON.stringify(o,null,2)}]}}),l.registerResource("reports",new p("reports://{type}/{format}",{list:void 0}),{title:"Dynamic Reports",description:"Generate various reports in different formats"},async(s,{type:r,format:i})=>{let e,a;switch(r){case"users":e={title:"User Report",generated:new Date().toISOString(),summary:{total:n.users.length,admins:n.users.filter(t=>t.role==="admin").length,users:n.users.filter(t=>t.role==="user").length},users:n.users};break;case"posts":e={title:"Posts Report",generated:new Date().toISOString(),summary:{total:n.posts.length,byAuthor:n.users.map(t=>({author:t.name,count:n.posts.filter(u=>u.authorId===t.id).length}))},posts:n.posts};break;default:throw new Error(`Unknown report type: ${r}`)}let o;switch(i){case"json":a="application/json",o=JSON.stringify(e,null,2);break;case"csv":a="text/csv",r==="users"?o=`ID,Name,Email,Role\n`+n.users.map(t=>`${t.id},${t.name},${t.email},${t.role}`).join(`\n`):o=`ID,Title,Author ID\n`+n.posts.map(t=>`${t.id},${t.title},${t.authorId}`).join(`\n`);break;case"txt":a="text/plain",o=`${e.title}\nGenerated: ${e.generated}\n\n${JSON.stringify(e.summary,null,2)}`;break;default:throw new Error(`Unknown format: ${i}`)}return{contents:[{uri:s.href,mimeType:a,text:o}]}}),l.registerPrompt("simple_greeting",{title:"Simple Greeting",description:"A basic greeting prompt"},()=>({messages:[{role:"user",content:{type:"text",text:"Please greet the user in a friendly and professional manner."}}]})),l.registerPrompt("analyze_user_data",{title:"Analyze User Data",description:"Analyze user data with specific parameters",argsSchema:{userId:c.number().describe("ID of the user to analyze"),includeStats:c.boolean().default(!0).describe("Include statistical analysis")}},({userId:s,includeStats:r})=>({messages:[{role:"user",content:{type:"text",text:`Please analyze the user data for user ID ${s}.${r?" Include detailed statistics and insights.":" Provide a basic summary only."}`}},{role:"user",content:{type:"resource",uri:`data://users/${s}`}}]})),l.registerPrompt("summarize_post",{title:"Summarize Post",description:"Generate a summary of a specific post",argsSchema:{postId:c.number().describe("ID of the post to summarize")}},({postId:s})=>({messages:[{role:"user",content:{type:"text",text:"Please provide a concise summary of the following post:"}},{role:"user",content:{type:"resource",uri:`data://posts/${s}`}}]})),l};\n',metaType:"application/javascript"},"/modules/apps/mcp/worker.js":{content:'let ts,tsLibCache={};async function loadCjsModule(s){try{const e=await fetch(s);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const r=await e.text(),o={exports:{}},i=o.exports;new Function("module","exports",r)(o,i);const c=o.exports;return Object.keys(c).length===0?i:c}catch(e){throw console.error(`Failed to load module from ${s}:`,e),e}}const loadTypeScript=async()=>{if(!ts)try{ts=await loadCjsModule("https://unpkg.com/typescript@latest/lib/typescript.js"),self.ts=ts,console.log({ts},self.ts)}catch(s){console.error("Failed to load TypeScript:",s)}},loadTypeScriptLibs=async()=>{if(Object.keys(tsLibCache).length>0)return;const s=["lib.es2020.d.ts","lib.es2018.d.ts","lib.es2019.d.ts","lib.es2019.string.d.ts","lib.es2019.array.d.ts","lib.es2019.object.d.ts","lib.es2020.bigint.d.ts","lib.es2020.date.d.ts","lib.es2020.number.d.ts","lib.es2020.promise.d.ts","lib.es2020.sharedmemory.d.ts","lib.es2020.string.d.ts","lib.es2020.symbol.wellknown.d.ts","lib.es2015.symbol.d.ts","lib.es2019.symbol.d.ts","lib.es2019.intl.d.ts","lib.es2015.iterable.d.ts","lib.es2018.intl.d.ts","lib.es2020.intl.d.ts","lib.es5.d.ts","lib.dom.d.ts","lib.es2017.d.ts","lib.es2018.asynciterable.d.ts","lib.es2018.asyncgenerator.d.ts","lib.es2018.promise.d.ts","lib.es2018.regexp.d.ts","lib.es2016.d.ts","lib.es2017.arraybuffer.d.ts","lib.es2017.date.d.ts","lib.es2017.intl.d.ts","lib.es2017.object.d.ts","lib.es2017.sharedmemory.d.ts","lib.es2017.string.d.ts","lib.es2017.typedarrays.d.ts","lib.es2015.d.ts","lib.es2016.array.include.d.ts","lib.es2016.intl.d.ts","lib.es2015.symbol.wellknown.d.ts","lib.es2015.core.d.ts","lib.es2015.collection.d.ts","lib.es2015.generator.d.ts","lib.es2015.promise.d.ts","lib.es2015.proxy.d.ts","lib.es2015.reflect.d.ts","lib.decorators.d.ts","lib.decorators.legacy.d.ts"];try{const e=s.map(i=>fetch(`https://unpkg.com/typescript@latest/lib/${i}`).then(l=>{if(!l.ok)throw new Error(`Failed to fetch ${i}`);return l.text()})),r=await Promise.all(e),o={};return s.forEach((i,l)=>{o[i]=r[l]}),o}catch(e){console.error("Could not fetch TypeScript library definitions. Type checking will be less accurate.",e)}};self.onmessage=async s=>{const{type:e,payload:r}=s.data;switch(e){case"init":await loadTypeScript(),tsLibCache=await loadTypeScriptLibs();break;case"validate":{if(!ts)return;const o=validate(r.code,r.filePath);self.postMessage({type:"validationComplete",payload:{errors:o}});break}case"transpile":{if(!ts){self.postMessage({type:"transpileComplete",payload:{transpiledCode:r.code,requestId:r.requestId}});return}const o=transpile(r.code);self.postMessage({type:"transpileComplete",payload:{transpiledCode:o,requestId:r.requestId}});break}}};const validate=(s,e)=>{try{const r="lib.es2020.d.ts",o={target:ts.ScriptTarget.ES2020,module:ts.ModuleKind.CommonJS,allowJs:!0,esModuleInterop:!0,noEmit:!0},i={getSourceFile:(t,n)=>{const a=tsLibCache[t]||(t===e?s:void 0);return a!==void 0?ts.createSourceFile(t,a,n):void 0},writeFile:()=>{},getDefaultLibFileName:()=>r,useCaseSensitiveFileNames:()=>!1,getCanonicalFileName:t=>t,getCurrentDirectory:()=>"/",getNewLine:()=>`\n`,fileExists:t=>t===e||!!tsLibCache[t],readFile:t=>t===e?s:tsLibCache[t]},l=ts.createProgram([e],o,i);return ts.getPreEmitDiagnostics(l).map(t=>{const n=ts.flattenDiagnosticMessageText(t.messageText,`\n`);if(t.file&&t.start){const{line:a,character:d}=ts.getLineAndCharacterOfPosition(t.file,t.start);return{line:a+1,character:d+1,message:n}}return{line:0,character:0,message:n}})}catch(r){return console.error("Error during code validation in worker:",r),[{line:0,character:0,message:"An unexpected error occurred during validation."}]}},transpile=s=>{try{return ts.transpileModule(s,{compilerOptions:{module:ts.ModuleKind.CommonJS,target:ts.ScriptTarget.ES2020}}).outputText}catch(e){return console.error("TypeScript compilation failed in worker:",e),s}};\n',metaType:"application/javascript"},"/style.css":{content:`@font-face{font-family:Manrope;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7_YHE41ni1AdIRqAuZuw1Bx9mbZk79FN_P-bnBeA.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Manrope;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7_YHE41ni1AdIRqAuZuw1Bx9mbZk79FN_G-bnBeA.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Manrope;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7_YHE41ni1AdIRqAuZuw1Bx9mbZk79FN_B-bnBeA.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Manrope;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7_YHE41ni1AdIRqAuZuw1Bx9mbZk79FN_N-bnBeA.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Manrope;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7_YHE41ni1AdIRqAuZuw1Bx9mbZk79FN_M-bnBeA.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Manrope;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/manrope/v20/xn7_YHE41ni1AdIRqAuZuw1Bx9mbZk79FN_C-bk.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--un-bg-opacity:100%;--un-text-opacity:100%}}@property --un-text-opacity{syntax:"<percentage>";inherits:false;initial-value:100%;}@property --un-bg-opacity{syntax:"<percentage>";inherits:false;initial-value:100%;}@property --un-inset-ring-color{syntax:"*";inherits:false;}@property --un-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000;}@property --un-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000;}@property --un-inset-shadow-color{syntax:"*";inherits:false;}@property --un-ring-color{syntax:"*";inherits:false;}@property --un-ring-inset{syntax:"*";inherits:false;}@property --un-ring-offset-color{syntax:"*";inherits:false;}@property --un-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000;}@property --un-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0px;}@property --un-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000;}@property --un-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000;}@property --un-shadow-color{syntax:"*";inherits:false;}:root,:host{--spacing: .25rem;--font-sans: "Manrope",ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-serif: ui-serif,Georgia,Cambria,"Times New Roman",Times,serif;--font-mono: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--font-family: "Manrope", -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;--font-icon-family: lucide;--colors-black: #000;--colors-white: #fff;--colors-slate-50: oklch(98.4% .003 247.858);--colors-slate-100: oklch(96.8% .007 247.896);--colors-slate-200: oklch(92.9% .013 255.508);--colors-slate-300: oklch(86.9% .022 252.894);--colors-slate-400: oklch(70.4% .04 256.788);--colors-slate-500: oklch(55.4% .046 257.417);--colors-slate-600: oklch(44.6% .043 257.281);--colors-slate-700: oklch(37.2% .044 257.287);--colors-slate-800: oklch(27.9% .041 260.031);--colors-slate-900: oklch(20.8% .042 265.755);--colors-slate-950: oklch(12.9% .042 264.695);--colors-slate-DEFAULT: oklch(70.4% .04 256.788);--colors-gray-50: oklch(98.5% .002 247.839);--colors-gray-100: oklch(96.7% .003 264.542);--colors-gray-200: oklch(92.8% .006 264.531);--colors-gray-300: oklch(87.2% .01 258.338);--colors-gray-400: oklch(70.7% .022 261.325);--colors-gray-500: oklch(55.1% .027 264.364);--colors-gray-600: oklch(44.6% .03 256.802);--colors-gray-700: oklch(37.3% .034 259.733);--colors-gray-800: oklch(27.8% .033 256.848);--colors-gray-900: oklch(21% .034 264.665);--colors-gray-950: oklch(13% .028 261.692);--colors-gray-DEFAULT: oklch(70.7% .022 261.325);--colors-zinc-50: oklch(98.5% 0 0);--colors-zinc-100: oklch(96.7% .001 286.375);--colors-zinc-200: oklch(92% .004 286.32);--colors-zinc-300: oklch(87.1% .006 286.286);--colors-zinc-400: oklch(70.5% .015 286.067);--colors-zinc-500: oklch(55.2% .016 285.938);--colors-zinc-600: oklch(44.2% .017 285.786);--colors-zinc-700: oklch(37% .013 285.805);--colors-zinc-800: oklch(27.4% .006 286.033);--colors-zinc-900: oklch(21% .006 285.885);--colors-zinc-950: oklch(14.1% .005 285.823);--colors-zinc-DEFAULT: oklch(70.5% .015 286.067);--colors-neutral-50: oklch(98.5% 0 0);--colors-neutral-100: oklch(97% 0 0);--colors-neutral-200: oklch(92.2% 0 0);--colors-neutral-300: oklch(87% 0 0);--colors-neutral-400: oklch(70.8% 0 0);--colors-neutral-500: oklch(55.6% 0 0);--colors-neutral-600: oklch(43.9% 0 0);--colors-neutral-700: oklch(37.1% 0 0);--colors-neutral-800: oklch(26.9% 0 0);--colors-neutral-900: oklch(20.5% 0 0);--colors-neutral-950: oklch(14.5% 0 0);--colors-neutral-DEFAULT: oklch(70.8% 0 0);--colors-stone-50: oklch(98.5% .001 106.423);--colors-stone-100: oklch(97% .001 106.424);--colors-stone-200: oklch(92.3% .003 48.717);--colors-stone-300: oklch(86.9% .005 56.366);--colors-stone-400: oklch(70.9% .01 56.259);--colors-stone-500: oklch(55.3% .013 58.071);--colors-stone-600: oklch(44.4% .011 73.639);--colors-stone-700: oklch(37.4% .01 67.558);--colors-stone-800: oklch(26.8% .007 34.298);--colors-stone-900: oklch(21.6% .006 56.043);--colors-stone-950: oklch(14.7% .004 49.25);--colors-stone-DEFAULT: oklch(70.9% .01 56.259);--colors-red-50: oklch(97.1% .013 17.38);--colors-red-100: oklch(93.6% .032 17.717);--colors-red-200: oklch(88.5% .062 18.334);--colors-red-300: oklch(80.8% .114 19.571);--colors-red-400: oklch(70.4% .191 22.216);--colors-red-500: oklch(63.7% .237 25.331);--colors-red-600: oklch(57.7% .245 27.325);--colors-red-700: oklch(50.5% .213 27.518);--colors-red-800: oklch(44.4% .177 26.899);--colors-red-900: oklch(39.6% .141 25.723);--colors-red-950: oklch(25.8% .092 26.042);--colors-red-DEFAULT: oklch(70.4% .191 22.216);--colors-orange-50: oklch(98% .016 73.684);--colors-orange-100: oklch(95.4% .038 75.164);--colors-orange-200: oklch(90.1% .076 70.697);--colors-orange-300: oklch(83.7% .128 66.29);--colors-orange-400: oklch(75% .183 55.934);--colors-orange-500: oklch(70.5% .213 47.604);--colors-orange-600: oklch(64.6% .222 41.116);--colors-orange-700: oklch(55.3% .195 38.402);--colors-orange-800: oklch(47% .157 37.304);--colors-orange-900: oklch(40.8% .123 38.172);--colors-orange-950: oklch(26.6% .079 36.259);--colors-orange-DEFAULT: oklch(75% .183 55.934);--colors-amber-50: oklch(98.7% .022 95.277);--colors-amber-100: oklch(96.2% .059 95.617);--colors-amber-200: oklch(92.4% .12 95.746);--colors-amber-300: oklch(87.9% .169 91.605);--colors-amber-400: oklch(82.8% .189 84.429);--colors-amber-500: oklch(76.9% .188 70.08);--colors-amber-600: oklch(66.6% .179 58.318);--colors-amber-700: oklch(55.5% .163 48.998);--colors-amber-800: oklch(47.3% .137 46.201);--colors-amber-900: oklch(41.4% .112 45.904);--colors-amber-950: oklch(27.9% .077 45.635);--colors-amber-DEFAULT: oklch(82.8% .189 84.429);--colors-yellow-50: oklch(98.7% .026 102.212);--colors-yellow-100: oklch(97.3% .071 103.193);--colors-yellow-200: oklch(94.5% .129 101.54);--colors-yellow-300: oklch(90.5% .182 98.111);--colors-yellow-400: oklch(85.2% .199 91.936);--colors-yellow-500: oklch(79.5% .184 86.047);--colors-yellow-600: oklch(68.1% .162 75.834);--colors-yellow-700: oklch(55.4% .135 66.442);--colors-yellow-800: oklch(47.6% .114 61.907);--colors-yellow-900: oklch(42.1% .095 57.708);--colors-yellow-950: oklch(28.6% .066 53.813);--colors-yellow-DEFAULT: oklch(85.2% .199 91.936);--colors-lime-50: oklch(98.6% .031 120.757);--colors-lime-100: oklch(96.7% .067 122.328);--colors-lime-200: oklch(93.8% .127 124.321);--colors-lime-300: oklch(89.7% .196 126.665);--colors-lime-400: oklch(84.1% .238 128.85);--colors-lime-500: oklch(76.8% .233 130.85);--colors-lime-600: oklch(64.8% .2 131.684);--colors-lime-700: oklch(53.2% .157 131.589);--colors-lime-800: oklch(45.3% .124 130.933);--colors-lime-900: oklch(40.5% .101 131.063);--colors-lime-950: oklch(27.4% .072 132.109);--colors-lime-DEFAULT: oklch(84.1% .238 128.85);--colors-green-50: oklch(98.2% .018 155.826);--colors-green-100: oklch(96.2% .044 156.743);--colors-green-200: oklch(92.5% .084 155.995);--colors-green-300: oklch(87.1% .15 154.449);--colors-green-400: oklch(79.2% .209 151.711);--colors-green-500: oklch(72.3% .219 149.579);--colors-green-600: oklch(62.7% .194 149.214);--colors-green-700: oklch(52.7% .154 150.069);--colors-green-800: oklch(44.8% .119 151.328);--colors-green-900: oklch(39.3% .095 152.535);--colors-green-950: oklch(26.6% .065 152.934);--colors-green-DEFAULT: oklch(79.2% .209 151.711);--colors-emerald-50: oklch(97.9% .021 166.113);--colors-emerald-100: oklch(95% .052 163.051);--colors-emerald-200: oklch(90.5% .093 164.15);--colors-emerald-300: oklch(84.5% .143 164.978);--colors-emerald-400: oklch(76.5% .177 163.223);--colors-emerald-500: oklch(69.6% .17 162.48);--colors-emerald-600: oklch(59.6% .145 163.225);--colors-emerald-700: oklch(50.8% .118 165.612);--colors-emerald-800: oklch(43.2% .095 166.913);--colors-emerald-900: oklch(37.8% .077 168.94);--colors-emerald-950: oklch(26.2% .051 172.552);--colors-emerald-DEFAULT: oklch(76.5% .177 163.223);--colors-teal-50: oklch(98.4% .014 180.72);--colors-teal-100: oklch(95.3% .051 180.801);--colors-teal-200: oklch(91% .096 180.426);--colors-teal-300: oklch(85.5% .138 181.071);--colors-teal-400: oklch(77.7% .152 181.912);--colors-teal-500: oklch(70.4% .14 182.503);--colors-teal-600: oklch(60% .118 184.704);--colors-teal-700: oklch(51.1% .096 186.391);--colors-teal-800: oklch(43.7% .078 188.216);--colors-teal-900: oklch(38.6% .063 188.416);--colors-teal-950: oklch(27.7% .046 192.524);--colors-teal-DEFAULT: oklch(77.7% .152 181.912);--colors-cyan-50: oklch(98.4% .019 200.873);--colors-cyan-100: oklch(95.6% .045 203.388);--colors-cyan-200: oklch(91.7% .08 205.041);--colors-cyan-300: oklch(86.5% .127 207.078);--colors-cyan-400: oklch(78.9% .154 211.53);--colors-cyan-500: oklch(71.5% .143 215.221);--colors-cyan-600: oklch(60.9% .126 221.723);--colors-cyan-700: oklch(52% .105 223.128);--colors-cyan-800: oklch(45% .085 224.283);--colors-cyan-900: oklch(39.8% .07 227.392);--colors-cyan-950: oklch(30.2% .056 229.695);--colors-cyan-DEFAULT: oklch(78.9% .154 211.53);--colors-sky-50: oklch(97.7% .013 236.62);--colors-sky-100: oklch(95.1% .026 236.824);--colors-sky-200: oklch(90.1% .058 230.902);--colors-sky-300: oklch(82.8% .111 230.318);--colors-sky-400: oklch(74.6% .16 232.661);--colors-sky-500: oklch(68.5% .169 237.323);--colors-sky-600: oklch(58.8% .158 241.966);--colors-sky-700: oklch(50% .134 242.749);--colors-sky-800: oklch(44.3% .11 240.79);--colors-sky-900: oklch(39.1% .09 240.876);--colors-sky-950: oklch(29.3% .066 243.157);--colors-sky-DEFAULT: oklch(74.6% .16 232.661);--colors-blue-50: oklch(97% .014 254.604);--colors-blue-100: oklch(93.2% .032 255.585);--colors-blue-200: oklch(88.2% .059 254.128);--colors-blue-300: oklch(80.9% .105 251.813);--colors-blue-400: oklch(70.7% .165 254.624);--colors-blue-500: oklch(62.3% .214 259.815);--colors-blue-600: oklch(54.6% .245 262.881);--colors-blue-700: oklch(48.8% .243 264.376);--colors-blue-800: oklch(42.4% .199 265.638);--colors-blue-900: oklch(37.9% .146 265.522);--colors-blue-950: oklch(28.2% .091 267.935);--colors-blue-DEFAULT: oklch(70.7% .165 254.624);--colors-indigo-50: oklch(96.2% .018 272.314);--colors-indigo-100: oklch(93% .034 272.788);--colors-indigo-200: oklch(87% .065 274.039);--colors-indigo-300: oklch(78.5% .115 274.713);--colors-indigo-400: oklch(67.3% .182 276.935);--colors-indigo-500: oklch(58.5% .233 277.117);--colors-indigo-600: oklch(51.1% .262 276.966);--colors-indigo-700: oklch(45.7% .24 277.023);--colors-indigo-800: oklch(39.8% .195 277.366);--colors-indigo-900: oklch(35.9% .144 278.697);--colors-indigo-950: oklch(25.7% .09 281.288);--colors-indigo-DEFAULT: oklch(67.3% .182 276.935);--colors-violet-50: oklch(96.9% .016 293.756);--colors-violet-100: oklch(94.3% .029 294.588);--colors-violet-200: oklch(89.4% .057 293.283);--colors-violet-300: oklch(81.1% .111 293.571);--colors-violet-400: oklch(70.2% .183 293.541);--colors-violet-500: oklch(60.6% .25 292.717);--colors-violet-600: oklch(54.1% .281 293.009);--colors-violet-700: oklch(49.1% .27 292.581);--colors-violet-800: oklch(43.2% .232 292.759);--colors-violet-900: oklch(38% .189 293.745);--colors-violet-950: oklch(28.3% .141 291.089);--colors-violet-DEFAULT: oklch(70.2% .183 293.541);--colors-purple-50: oklch(97.7% .014 308.299);--colors-purple-100: oklch(94.6% .033 307.174);--colors-purple-200: oklch(90.2% .063 306.703);--colors-purple-300: oklch(82.7% .119 306.383);--colors-purple-400: oklch(71.4% .203 305.504);--colors-purple-500: oklch(62.7% .265 303.9);--colors-purple-600: oklch(55.8% .288 302.321);--colors-purple-700: oklch(49.6% .265 301.924);--colors-purple-800: oklch(43.8% .218 303.724);--colors-purple-900: oklch(38.1% .176 304.987);--colors-purple-950: oklch(29.1% .149 302.717);--colors-purple-DEFAULT: oklch(71.4% .203 305.504);--colors-fuchsia-50: oklch(97.7% .017 320.058);--colors-fuchsia-100: oklch(95.2% .037 318.852);--colors-fuchsia-200: oklch(90.3% .076 319.62);--colors-fuchsia-300: oklch(83.3% .145 321.434);--colors-fuchsia-400: oklch(74% .238 322.16);--colors-fuchsia-500: oklch(66.7% .295 322.15);--colors-fuchsia-600: oklch(59.1% .293 322.896);--colors-fuchsia-700: oklch(51.8% .253 323.949);--colors-fuchsia-800: oklch(45.2% .211 324.591);--colors-fuchsia-900: oklch(40.1% .17 325.612);--colors-fuchsia-950: oklch(29.3% .136 325.661);--colors-fuchsia-DEFAULT: oklch(74% .238 322.16);--colors-pink-50: oklch(97.1% .014 343.198);--colors-pink-100: oklch(94.8% .028 342.258);--colors-pink-200: oklch(89.9% .061 343.231);--colors-pink-300: oklch(82.3% .12 346.018);--colors-pink-400: oklch(71.8% .202 349.761);--colors-pink-500: oklch(65.6% .241 354.308);--colors-pink-600: oklch(59.2% .249 .584);--colors-pink-700: oklch(52.5% .223 3.958);--colors-pink-800: oklch(45.9% .187 3.815);--colors-pink-900: oklch(40.8% .153 2.432);--colors-pink-950: oklch(28.4% .109 3.907);--colors-pink-DEFAULT: oklch(71.8% .202 349.761);--colors-rose-50: oklch(96.9% .015 12.422);--colors-rose-100: oklch(94.1% .03 12.58);--colors-rose-200: oklch(89.2% .058 10.001);--colors-rose-300: oklch(81% .117 11.638);--colors-rose-400: oklch(71.2% .194 13.428);--colors-rose-500: oklch(64.5% .246 16.439);--colors-rose-600: oklch(58.6% .253 17.585);--colors-rose-700: oklch(51.4% .222 16.935);--colors-rose-800: oklch(45.5% .188 13.697);--colors-rose-900: oklch(41% .159 10.272);--colors-rose-950: oklch(27.1% .105 12.094);--colors-rose-DEFAULT: oklch(71.2% .194 13.428);--colors-light-50: oklch(99.4% 0 0);--colors-light-100: oklch(99.11% 0 0);--colors-light-200: oklch(98.51% 0 0);--colors-light-300: oklch(98.16% .0017 247.84);--colors-light-400: oklch(97.31% 0 0);--colors-light-500: oklch(96.12% 0 0);--colors-light-600: oklch(96.32% .0034 247.86);--colors-light-700: oklch(94.17% .0052 247.88);--colors-light-800: oklch(91.09% .007 247.9);--colors-light-900: oklch(90.72% .0051 228.82);--colors-light-950: oklch(89.23% .006 239.83);--colors-light-DEFAULT: oklch(97.31% 0 0);--colors-dark-50: oklch(40.91% 0 0);--colors-dark-100: oklch(35.62% 0 0);--colors-dark-200: oklch(31.71% 0 0);--colors-dark-300: oklch(29.72% 0 0);--colors-dark-400: oklch(25.2% 0 0);--colors-dark-500: oklch(23.93% 0 0);--colors-dark-600: oklch(22.73% .0038 286.09);--colors-dark-700: oklch(22.21% 0 0);--colors-dark-800: oklch(20.9% 0 0);--colors-dark-900: oklch(16.84% 0 0);--colors-dark-950: oklch(13.44% 0 0);--colors-dark-DEFAULT: oklch(25.2% 0 0);--colors-primary-50: hsl(198, 100%, 97%);--colors-primary-100: hsl(198, 100%, 92%);--colors-primary-200: hsl(198, 100%, 84%);--colors-primary-300: hsl(198, 100%, 75%);--colors-primary-400: hsl(198, 100%, 66%);--colors-primary-500: hsl(198, 100%, 55%);--colors-primary-600: hsl(198, 100%, 45%);--colors-primary-700: hsl(198, 100%, 35%);--colors-primary-800: hsl(198, 100%, 24%);--colors-primary-900: hsl(198, 100%, 15%);--colors-primary-DEFAULT: hsl(198, 100%, 55%);--colors-secondary-50: hsl(120, 100%, 97%);--colors-secondary-100: hsl(120, 100%, 92%);--colors-secondary-200: hsl(120, 100%, 84%);--colors-secondary-300: hsl(120, 100%, 75%);--colors-secondary-400: hsl(120, 100%, 66%);--colors-secondary-500: hsl(120, 100%, 55%);--colors-secondary-600: hsl(120, 100%, 45%);--colors-secondary-700: hsl(120, 100%, 35%);--colors-secondary-800: hsl(120, 100%, 24%);--colors-secondary-900: hsl(120, 100%, 15%);--colors-secondary-DEFAULT: hsl(120, 100%, 55%);--colors-tertiary-50: hsl(175, 100%, 97%);--colors-tertiary-100: hsl(175, 100%, 92%);--colors-tertiary-200: hsl(175, 100%, 84%);--colors-tertiary-300: hsl(175, 100%, 75%);--colors-tertiary-400: hsl(175, 100%, 66%);--colors-tertiary-500: hsl(175, 100%, 55%);--colors-tertiary-600: hsl(175, 100%, 45%);--colors-tertiary-700: hsl(175, 100%, 35%);--colors-tertiary-800: hsl(175, 100%, 24%);--colors-tertiary-900: hsl(175, 100%, 15%);--colors-tertiary-DEFAULT: hsl(175, 100%, 55%);--colors-success-50: hsl(149, 87%, 97%);--colors-success-100: hsl(149, 87%, 92%);--colors-success-200: hsl(149, 87%, 84%);--colors-success-300: hsl(149, 87%, 75%);--colors-success-400: hsl(149, 87%, 66%);--colors-success-500: hsl(149, 87%, 55%);--colors-success-600: hsl(149, 87%, 45%);--colors-success-700: hsl(149, 87%, 35%);--colors-success-800: hsl(149, 87%, 24%);--colors-success-900: hsl(149, 87%, 15%);--colors-success-DEFAULT: hsl(149, 87%, 55%);--colors-warning-50: hsl(32, 100%, 97%);--colors-warning-100: hsl(32, 100%, 92%);--colors-warning-200: hsl(32, 100%, 84%);--colors-warning-300: hsl(32, 100%, 75%);--colors-warning-400: hsl(32, 100%, 66%);--colors-warning-500: hsl(32, 100%, 55%);--colors-warning-600: hsl(32, 100%, 45%);--colors-warning-700: hsl(32, 100%, 35%);--colors-warning-800: hsl(32, 100%, 24%);--colors-warning-900: hsl(32, 100%, 15%);--colors-warning-DEFAULT: hsl(32, 100%, 55%);--colors-danger-50: hsl(345, 100%, 97%);--colors-danger-100: hsl(345, 100%, 92%);--colors-danger-200: hsl(345, 100%, 84%);--colors-danger-300: hsl(345, 100%, 75%);--colors-danger-400: hsl(345, 100%, 66%);--colors-danger-500: hsl(345, 100%, 55%);--colors-danger-600: hsl(345, 100%, 45%);--colors-danger-700: hsl(345, 100%, 35%);--colors-danger-800: hsl(345, 100%, 24%);--colors-danger-900: hsl(345, 100%, 15%);--colors-danger-DEFAULT: hsl(345, 100%, 55%);--colors-default-50: hsl(0, 0%, 97%);--colors-default-100: hsl(0, 0%, 92%);--colors-default-200: hsl(0, 0%, 84%);--colors-default-300: hsl(0, 0%, 75%);--colors-default-400: hsl(0, 0%, 66%);--colors-default-500: hsl(0, 0%, 55%);--colors-default-600: hsl(0, 0%, 45%);--colors-default-700: hsl(0, 0%, 35%);--colors-default-800: hsl(0, 0%, 24%);--colors-default-900: hsl(0, 0%, 15%);--colors-default-DEFAULT: hsl(0, 0%, 35%);--colors-surface-50: hsl(0, 0%, 97%);--colors-surface-100: hsl(0, 0%, 92%);--colors-surface-200: hsl(0, 0%, 84%);--colors-surface-300: hsl(0, 0%, 75%);--colors-surface-400: hsl(0, 0%, 66%);--colors-surface-500: hsl(0, 0%, 55%);--colors-surface-600: hsl(0, 0%, 45%);--colors-surface-700: hsl(0, 0%, 35%);--colors-surface-800: hsl(0, 0%, 24%);--colors-surface-900: hsl(0, 0%, 15%);--colors-surface-DEFAULT: hsl(0, 0%, 35%);--text-xs-fontSize: .75rem;--text-xs-lineHeight: 1rem;--text-sm-fontSize: .875rem;--text-sm-lineHeight: 1.25rem;--text-base-fontSize: 1rem;--text-base-lineHeight: 1.5rem;--text-lg-fontSize: 1.125rem;--text-lg-lineHeight: 1.75rem;--text-xl-fontSize: 1.25rem;--text-xl-lineHeight: 1.75rem;--text-2xl-fontSize: 1.5rem;--text-2xl-lineHeight: 2rem;--text-3xl-fontSize: 1.875rem;--text-3xl-lineHeight: 2.25rem;--text-4xl-fontSize: 2.25rem;--text-4xl-lineHeight: 2.5rem;--text-5xl-fontSize: 3rem;--text-5xl-lineHeight: 1;--text-6xl-fontSize: 3.75rem;--text-6xl-lineHeight: 1;--text-7xl-fontSize: 4.5rem;--text-7xl-lineHeight: 1;--text-8xl-fontSize: 6rem;--text-8xl-lineHeight: 1;--text-9xl-fontSize: 8rem;--text-9xl-lineHeight: 1;--text-color: var(--color-surface-100);--fontWeight-thin: 100;--fontWeight-extralight: 200;--fontWeight-light: 300;--fontWeight-normal: 400;--fontWeight-medium: 500;--fontWeight-semibold: 600;--fontWeight-bold: 700;--fontWeight-extrabold: 800;--fontWeight-black: 900;--tracking-tighter: -.05em;--tracking-tight: -.025em;--tracking-normal: 0em;--tracking-wide: .025em;--tracking-wider: .05em;--tracking-widest: .1em;--leading-none: 1;--leading-tight: 1.25;--leading-snug: 1.375;--leading-normal: 1.5;--leading-relaxed: 1.625;--leading-loose: 2;--textStrokeWidth-DEFAULT: 1.5rem;--textStrokeWidth-none: 0;--textStrokeWidth-sm: thin;--textStrokeWidth-md: medium;--textStrokeWidth-lg: thick;--radius-DEFAULT: .25rem;--radius-none: 0;--radius-xs: .125rem;--radius-sm: .25rem;--radius-md: .375rem;--radius-lg: .5rem;--radius-xl: .75rem;--radius-2xl: 1rem;--radius-3xl: 1.5rem;--radius-4xl: 2rem;--ease-linear: linear;--ease-in: cubic-bezier(.4, 0, 1, 1);--ease-out: cubic-bezier(0, 0, .2, 1);--ease-in-out: cubic-bezier(.4, 0, .2, 1);--ease-DEFAULT: cubic-bezier(.4, 0, .2, 1);--blur-DEFAULT: 8px;--blur-xs: 4px;--blur-sm: 8px;--blur-md: 12px;--blur-lg: 16px;--blur-xl: 24px;--blur-2xl: 40px;--blur-3xl: 64px;--perspective-dramatic: 100px;--perspective-near: 300px;--perspective-normal: 500px;--perspective-midrange: 800px;--perspective-distant: 1200px;--default-transition-duration: .15s;--default-transition-timingFunction: cubic-bezier(.4, 0, .2, 1);--default-font-family: var(--font-sans);--default-font-featureSettings: var(--font-sans--font-feature-settings);--default-font-variationSettings: var(--font-sans--font-variation-settings);--default-monoFont-family: var(--font-mono);--default-monoFont-featureSettings: var(--font-mono--font-feature-settings);--default-monoFont-variationSettings: var(--font-mono--font-variation-settings);--container-3xs: 16rem;--container-2xs: 18rem;--container-xs: 20rem;--container-sm: 24rem;--container-md: 28rem;--container-lg: 32rem;--container-xl: 36rem;--container-2xl: 42rem;--container-3xl: 48rem;--container-4xl: 56rem;--container-5xl: 64rem;--container-6xl: 72rem;--container-7xl: 80rem;--container-prose: 65ch;--background-color: var(--colors-primary-100);--boxShadow-md: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--boxShadow-lg: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--theme-font-family: "Manrope"}*,:after,:before,::backdrop,::file-selector-button{box-sizing:border-box;margin:0;padding:0;border:0 solid}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;tab-size:4;font-family:var( --default-font-family, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" );font-feature-settings:var(--default-font-featureSettings, normal);font-variation-settings:var(--default-font-variationSettings, normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var( --default-monoFont-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace );font-feature-settings:var(--default-monoFont-featureSettings, normal);font-variation-settings:var(--default-monoFont-variationSettings, normal);font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea,::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;border-radius:0;background-color:transparent;opacity:1}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not (-webkit-appearance: -apple-pay-button)) or (contain-intrinsic-size: 1px){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit,::-webkit-datetime-edit-year-field,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute-field,::-webkit-datetime-edit-second-field,::-webkit-datetime-edit-millisecond-field,::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]),::file-selector-button{appearance:button}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}.text-2xl{font-size:var(--text-2xl-fontSize);line-height:var(--un-leading, var(--text-2xl-lineHeight))}.text-4xl{font-size:var(--text-4xl-fontSize);line-height:var(--un-leading, var(--text-4xl-lineHeight))}.text-sm{font-size:var(--text-sm-fontSize);line-height:var(--un-leading, var(--text-sm-lineHeight))}.text-xs{font-size:var(--text-xs-fontSize);line-height:var(--un-leading, var(--text-xs-lineHeight))}.text-gray-500{color:color-mix(in srgb,var(--colors-gray-500) var(--un-text-opacity),transparent)}.text-gray-700{color:color-mix(in srgb,var(--colors-gray-700) var(--un-text-opacity),transparent)}.text-gray-800{color:color-mix(in srgb,var(--colors-gray-800) var(--un-text-opacity),transparent)}.text-gray-900{color:color-mix(in srgb,var(--colors-gray-900) var(--un-text-opacity),transparent)}.text-yellow-800{color:color-mix(in srgb,var(--colors-yellow-800) var(--un-text-opacity),transparent)}.font-bold{--un-font-weight:var(--fontWeight-bold);font-weight:var(--fontWeight-bold)}.font-extrabold{--un-font-weight:var(--fontWeight-extrabold);font-weight:var(--fontWeight-extrabold)}.font-mono{font-family:var(--font-mono)}.font-semibold{--un-font-weight:var(--fontWeight-semibold);font-weight:var(--fontWeight-semibold)}.tab{-moz-tab-size:4;-o-tab-size:4;tab-size:4}.m16{margin:calc(var(--spacing) * 16)}.p-2{padding:calc(var(--spacing) * 2)}.p-4{padding:calc(var(--spacing) * 4)}.p-6{padding:calc(var(--spacing) * 6)}.px-2{padding-inline:calc(var(--spacing) * 2)}.py-1{padding-block:calc(var(--spacing) * 1)}.pb-2{padding-bottom:calc(var(--spacing) * 2)}.text-center{text-align:center}.text-right{text-align:right}.border{border-width:1px}.border-b{border-bottom-width:1px}.rounded{border-radius:var(--radius-DEFAULT)}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.bg-gray-100{background-color:color-mix(in srgb,var(--colors-gray-100) var(--un-bg-opacity),transparent)}.bg-gray-200{background-color:color-mix(in srgb,var(--colors-gray-200) var(--un-bg-opacity),transparent)}.bg-gray-50{background-color:color-mix(in srgb,var(--colors-gray-50) var(--un-bg-opacity),transparent)}.bg-white{background-color:color-mix(in srgb,var(--colors-white) var(--un-bg-opacity),transparent)}.bg-yellow-100{background-color:color-mix(in srgb,var(--colors-yellow-100) var(--un-bg-opacity),transparent)}.flex{display:flex}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.selection\\:shrink-selection *::selection,.selection\\:shrink-selection::selection{flex-shrink:1}.flex-grow{flex-grow:1}.flex-col{flex-direction:column}.gap-2{gap:calc(var(--spacing) * 2)}.gap-3{gap:calc(var(--spacing) * 3)}.gap-4{gap:calc(var(--spacing) * 4)}.gap-6{gap:calc(var(--spacing) * 6)}.grid{display:grid}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.h-full{height:100%}.min-h-screen{min-height:100vh}.w-full{width:100%}.selection\\:select-all *::selection,.selection\\:select-all::selection{-webkit-user-select:all;user-select:all}.shadow-md{--un-shadow:0 4px 6px -1px var(--un-shadow-color, rgb(0 0 0 / .1)),0 2px 4px -2px var(--un-shadow-color, rgb(0 0 0 / .1));box-shadow:var(--un-inset-shadow),var(--un-inset-ring-shadow),var(--un-ring-offset-shadow),var(--un-ring-shadow),var(--un-shadow)}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-between{justify-content:space-between}@supports (color: color-mix(in lab,red,red)){.text-gray-500{color:color-mix(in oklab,var(--colors-gray-500) var(--un-text-opacity),transparent)}.text-gray-700{color:color-mix(in oklab,var(--colors-gray-700) var(--un-text-opacity),transparent)}.text-gray-800{color:color-mix(in oklab,var(--colors-gray-800) var(--un-text-opacity),transparent)}.text-gray-900{color:color-mix(in oklab,var(--colors-gray-900) var(--un-text-opacity),transparent)}.text-yellow-800{color:color-mix(in oklab,var(--colors-yellow-800) var(--un-text-opacity),transparent)}.bg-gray-100{background-color:color-mix(in oklab,var(--colors-gray-100) var(--un-bg-opacity),transparent)}.bg-gray-200{background-color:color-mix(in oklab,var(--colors-gray-200) var(--un-bg-opacity),transparent)}.bg-gray-50{background-color:color-mix(in oklab,var(--colors-gray-50) var(--un-bg-opacity),transparent)}.bg-white{background-color:color-mix(in oklab,var(--colors-white) var(--un-bg-opacity),transparent)}.bg-yellow-100{background-color:color-mix(in oklab,var(--colors-yellow-100) var(--un-bg-opacity),transparent)}}@media (min-width: 48rem){.md\\:col-span-2{grid-column:span 2/span 2}.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width: 64rem){.lg\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}body{font-family:var(--font-family)}html,body{font-family:var(--theme-font-family);background-color:var(--theme-background-color)!important;color:var(--text-color)!important;width:100%;min-height:100%;height:100%;padding:0;margin:0}body:not(.production) *:not(:defined){border:1px solid red}.dark{filter:invert(1) hue-rotate(180deg)}.dark img,.dark dialog,.dark video,.dark iframe{filter:invert(1) hue-rotate(180deg)}html{font-size:14px}@media (max-width: 768px){html{font-size:18px}}@media (max-width: 480px){html{font-size:20px}}textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}:root{box-sizing:border-box;-moz-text-size-adjust:none;-webkit-text-size-adjust:none;text-size-adjust:none;line-height:1.2;-webkit-font-smoothing:antialiased}*,*:before,*:after{box-sizing:border-box}*{margin:0}body{-webkit-font-smoothing:antialiased;font-family:var(--font-family)}button,textarea,select{background-color:inherit;border-width:0;color:inherit}img,picture,video,canvas,svg{display:block;max-width:100%}input,button,textarea,select{font:inherit}p,h1,h2,h3,h4,h5,h6{font-family:var(--font-family);overflow-wrap:break-word}dialog::backdrop{background-color:#000c}*::-webkit-scrollbar{width:8px;margin-right:10px}*::-webkit-scrollbar-track{background:transparent}*::-webkit-scrollbar-thumb{&:hover{scrollbar-color:rgba(154,153,150,.8) transparent}border-radius:10px;border:none}*::-webkit-scrollbar-button{background:transparent;color:transparent}*{scrollbar-width:thin;scrollbar-color:transparent transparent;&:hover{scrollbar-color:rgba(154,153,150,.8) transparent}}[full]{width:100%;height:100vh}[w-full]{width:100%}[grow]{flex-grow:1}[hide],.hide{display:none!important}[noscroll]{overflow:hidden}div [container]{display:flex}div [container][horizontal]{display:flex;flex-direction:col}.uix-list{display:flex;&[vertical]{flex-direction:column}}.uix-navbar{--uix-navbar-text-color: var(--color-default-90);--uix-navbar-hover-text-color: var(--color-surface-80);--uix-navbar-border-radius: 0px;--uix-navbar-border-color: var(--color-default-60);--uix-navbar-border-size: 1px;--uix-navbar-border-style: solid;--uix-navbar-hover-background-color: var(--color-default-40);--uix-container-position: var(--uix-navbar-position);display:flex;flex-direction:column;&[docked]{--uix-list-button-radius: 0;border-bottom:0;position:fixed;bottom:0;background-color:var(--uix-navbar-background-color, var(--color-default-5));>*{border-right:0;border-bottom:0;&:first-child{border-left:0}}}}:where(.uix-link){font-weight:var(--uix-link-font-weight, 600);width:var(--uix-link-width, auto);color:var(--uix-link-text-color, var(--colors-default-900));--uix-link-indent: 0;cursor:pointer;&[vertical]{margin:0 auto}a,button{width:inherit;cursor:pointer;padding:var(--uix-link-padding);&:hover{color:var(--uix-link-hover-color, var(--uix-link-text-color))}}.uix-text-icon__element{display:flex;align-items:center;gap:var(--uix-link-icon-gap, .5rem);&[reverse][vertical]{flex-direction:column-reverse}&:not([reverse])[vertical]{flex-direction:column}&[reverse]:not([vertical]){flex-direction:row-reverse}&:not([reverse]):not([vertical]){flex-direction:row}}transition:all .3s ease-in-out;&[indent]{>a,>button{padding-left:var(--uix-link-indent)}}&[active]:hover{color:var(--uix-link-hover-text-color, var(--colors-primary-400))}&[selectable][selected]{background-color:var(--colors-primary-400)}&:hover{[tooltip]{display:flex}}&[tooltip]{display:inline-block;&:hover{[tooltip]{visibility:visible}}[tooltip]{visibility:hidden;width:120px;background-color:#000;color:#fff;text-align:center;border-radius:6px;padding:5px 10px;margin-left:3px;position:absolute;z-index:1000000000;top:50%;left:100%;transform:translateY(-50%)}}&[position~=top] [tooltip]{bottom:100%;left:50%;transform:translate(-50%)}&[position~=bottom] [tooltip]{top:100%;left:50%;transform:translate(-50%)}&[position~=left] [tooltip]{top:50%;right:100%;transform:translateY(-50%)}&[tooltip],&[dropdown],&[context],&[float]{position:relative}&[dropdown],&[accordion]{flex-direction:column}[float],[dropdown],[accordion],[context]{display:none}&[floatopen]>a{display:none}&[floatopen] [float]{display:block;position:relative;bottom:0;right:0}&[context]{z-index:auto}[context][open]{display:flex;flex-direction:column}[dropdown],[context][open]{position:absolute;left:0;top:100%;width:100%;min-width:200px;z-index:1000;background-color:var(--colors-primary-100);box-shadow:0 8px 16px #0003;.uix-link:hover,input{background-color:var(--colors-primary-200)}>.uix-link{width:100%}}[context][open]{display:flex}&[selected]{[dropdown],[accordion]{display:flex;flex-direction:column}}}:where(.uix-button){border:var(--uix-button-borderSize, 0) solid var(--uix-button-borderColor);border-radius:var(--uix-button-borderRadius, var(--radius-md));box-shadow:var(--uix-button-shadow);width:var(--uix-button-width);min-width:fit-content;background-color:var(--uix-button-backgroundColor, black);color:var(--uix-button-textColor, var(--colors-default-100));font-weight:var(--uix-button-fontWeight, 700);display:flex;text-align:center;transition:transform .2s ease-in-out,opacity .2s ease-in-out,background-color .2s ease-in-out;&:hover{opacity:var(--uix-button-hover-opacity, .4)}&:active{transform:scale(.97)}>button,>a,>input{width:max-content;display:block;border-radius:inherit;cursor:var(--uix-button-cursor, pointer);height:calc(var(--spacing) * 10);line-height:calc(var(--spacing) * 5);padding:var( --uix-button-padding, calc(var(--spacing) * 2.5) calc(var(--spacing) * 4) );word-break:keep-all;flex-basis:100%}.uix-icon,button,input,a{cursor:pointer}&[bordered]{--uix-button-border-size: 1px;--uix-button-backgroundColor: transparent;--uix-button-hoverBackgroundColor: var(--_variant-color-300);--uix-button-borderColor: var(--_variant-color-400);--uix-button-textColor: var(--_variant-color-700)}&[ghost]{--uix-button-backgroundColor: transparent;--uix-button-hoverBackgroundColor: var(--_variant-color-300);--uix-button-borderSize: 0px;--uix-button-textColor: var(--_variant-color-700)}&[outline]{--uix-button-backgroundColor: transparent;--uix-button-hoverBackgroundColor: var(--_variant-color-300);--uix-button-textColor: var(--_variant-color-800);--uix-button-borderSize: 1px;--uix-button-borderColor: var(--_variant-color-400)}&[float]{background-color:#000;--uix-button-hoverBackgroundColor: var(--_variant-color-500);--uix-button-textColor: var(--_variant-color-50);--uix-button-borderSize: 0px;--uix-button-borderRadius: 9999px;--uix-button-width: var(--uix-button-height);box-shadow:var(--shadow-md, 0 4px 6px -1px rgb(0 0 0 / .1));--uix-button-padding: .5rem}&[float]:hover{box-shadow:var(--shadow-lg, 0 10px 15px -3px rgb(0 0 0 / .1))}}.uix-icon{display:inline-block;vertical-align:middle;svg{height:inherit;width:inherit}}&[solid]{stroke:currentColor;fill:currentColor}:where(.uix-input){--uix-input-background-color: var(--colors-surface-100);--uix-input-border-color: var(--colors-gray-900);--uix-input-text-color: var(--colors-gray-900);--uix-input-placeholder-color: var(--colors-default-500);--uix-input-border-radius: var(--border-radius-md);--uix-input-border-width: 2px;--uix-input-padding-x: calc(var(--spacing) * 4);--uix-input-padding-y: calc(var(--spacing) * 2.5);--uix-input-font-size: var(--font-size-base);--uix-input-height: 2.5rem;--uix-input-disabled-opacity: .6;--uix-input-label-font-size: var(--font-size-sm);--uix-input-label-font-weight: var(--font-weight-bold);--uix-input-label-color: var(--colors-default-700);--uix-input-checkbox-size: 1.5rem;--uix-input-checkbox-border-radius: var(--border-radius-sm);--uix-input-checkbox-checked-bg: var(--colors-primary-600);--uix-input-checkbox-check-color: var(--colors-surface-100);width:100%;display:flex;flex-direction:column;input,select,textarea{width:100%;height:var(--uix-input-height);border-radius:var(--uix-input-border-radius);border:var(--uix-input-border-width) solid var(--uix-input-border-color);font-size:var(--uix-input-font-size);background-color:var(--uix-input-background-color);color:var(--uix-input-text-color);transition:var(--uix-transition);outline:none;padding:var(--uix-input-padding-y) var(--uix-input-padding-x)}textarea{resize:vertical}&:has(textarea){height:auto}select{appearance:none;-webkit-appearance:none;cursor:pointer;font-weight:600;padding-block:0;option{font-weight:600;background-color:var(--uix-input-background-color);font-size:1.1rem;line-height:1.5rem;color:#333;padding:50px;border:2px solid red}}.select-container{position:relative;.select-arrow{position:absolute;right:calc(2 * var(--spacing))}}input::placeholder{color:transparent}label{font-weight:var(--uix-input-label-font-weight);color:var(--uix-input-label-color, var(--colors-gray-600));margin-bottom:var(--spacing);font-size:.9rem;padding:0 4px;transition:all .2s ease-in-out;pointer-events:none;&[required]:after{content:"*";color:var(--colors-danger-500);margin-left:2px}}input:not(:placeholder-shown)+label,textarea:not(:placeholder-shown)+label,&:focus-within label,&.has-value label{top:-2px;transform:translateY(0);font-size:var(--uix-input-label-font-size)}&:focus-within input,&:focus-within select,&:focus-within textarea{box-shadow:0 0 var(--uix-input-focus-ring-width, 5px) var(--uix-input-focus-ring-color, rgba(0, 0, 255, .5))}&[disabled]{cursor:not-allowed;opacity:var(--uix-input-disabled-opacity);& label{cursor:not-allowed}}.input-icon,.select-arrow{position:absolute;top:50%;right:var(--spacing);transform:translateY(-50%);pointer-events:none;color:var(--uix-input-label-color);transition:transform .2s ease-in-out}&:has(select:hover:active) .select-arrow{transform:translateY(-50%) rotate(180deg)}&:has(.input-icon:not(.select-arrow))>input{padding-right:calc(var(--uix-input-padding-x) + 1.75em)}&[type=checkbox],&[type=radio]{flex-direction:row;align-items:center;border:0;height:auto;width:auto;background-color:transparent;box-shadow:none;gap:.75rem;cursor:pointer;label{margin:0;line-height:1.5rem;position:static;transform:none;background-color:transparent;padding:0;cursor:pointer;font-weight:var(--font-weight-normal);order:2;pointer-events:auto}input{appearance:none;-webkit-appearance:none;width:var(--uix-input-checkbox-size);height:var(--uix-input-checkbox-size);margin:0;border:var(--uix-input-border-width) solid var(--uix-input-border-color);background-color:var(--uix-input-background-color);cursor:pointer;position:relative;transition:var(--uix-transition);padding:0;&:after{content:"";position:absolute;display:none;left:50%;top:50%}&:checked{background-color:var(--uix-input-checkbox-checked-bg);border-color:var(--uix-input-checkbox-checked-bg);&:after{display:block}}&:focus-visible{box-shadow:0 0 0 var(--uix-input-focus-ring-width) var(--uix-input-focus-ring-color);border-color:var(--uix-input-focus-ring-color)}}}&[type=checkbox] input:after{width:.375rem;height:.75rem;border:solid var(--uix-input-checkbox-check-color);border-width:0 2px 2px 0;transform:translate(-50%,-60%) rotate(45deg)}&[type=radio] input{border-radius:var(--border-radius-full);&:after{width:calc(var(--uix-input-checkbox-size) / 2);height:calc(var(--uix-input-checkbox-size) / 2);border-radius:var(--border-radius-full);background-color:var(--uix-input-checkbox-check-color);transform:translate(-50%,-50%)}}&[ghost]{&:focus-within select{box-shadow:none}.select-arrow{margin-left:5px;padding-left:5px}select{background:inherit;border:0}}}
`,metaType:"text/css"}};self.addEventListener("install",e=>e.waitUntil(self.skipWaiting())),self.addEventListener("activate",e=>e.waitUntil(self.clients.claim())),self.addEventListener("fetch",e=>{const o=new URL(e.request.url),t=FILE_BUNDLE[o.pathname];t&&e.respondWith(new Response(t.content,{headers:{"Content-Type":t.metaType||"application/javascript"}}))});
